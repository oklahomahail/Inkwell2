/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIX_SUMMARY.md:139:2. `[data-tour-id="sidebar"]` - Main navigation sidebar
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIX_SUMMARY.md:140:3. `[data-tour-id="topbar"]` - Top action bar
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:10:- `src/components/Topbar.tsx`
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:20:- Topbar: `z-index: 30` (changed from 40)
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:104:.Topbar {
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:107:.Topbar::before,
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:108:.Topbar::after {
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:156:### Problem 2: Tour Clipped by Topbar
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:158:**Root Cause:** Topbar had higher z-index (40) than tour overlay (9999 effective)
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:159:**Fix:** Reduced topbar to z-30, increased tour to z-10000
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:217:Topbar:           30     (Above base, below content)
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:218:Sidebar:          20     (Default navigation)
/Users/davehail/Developer/inkwell/TOUR_BUTTON_FIXES_SUMMARY.md:235:  ‚úì src/components/Topbar.tsx
/Users/davehail/Developer/inkwell/HOOKS_PR_COMMIT.md:31:- `src/components/Writing/EnhancedAIWritingToolbar.tsx` - Reorder performRealTimeAnalysis, add to deps
/Users/davehail/Developer/inkwell/BRAND_INCONSISTENCY_REPORT.md:61:| Legacy (Footer)                     | `#0C1C3D` | Old value             |
/Users/davehail/Developer/inkwell/CHANGELOG.md:241:    - Headers with title/author, footers with page numbers
/Users/davehail/Developer/inkwell/CHANGELOG.md:283:  - Added brand component utility classes (ink-header, ink-sidebar, ink-nav-item, ink-btn)
/Users/davehail/Developer/inkwell/CHANGELOG.md:320:- Topbar display on authentication routes
/Users/davehail/Developer/inkwell/CHANGELOG.md:439:- `ProgressBar.tsx` - Visual progress indicator with step labels and completion states
/Users/davehail/Developer/inkwell/CHANGELOG.md:817:  - Progress bar with celebration animations
/Users/davehail/Developer/inkwell/CHANGELOG.md:1132:- **Enhanced Main Layout**: Modern collapsible sidebar with smooth animations and responsive design
/Users/davehail/Developer/inkwell/CHANGELOG.md:1148:- New MainLayout component with collapsible sidebar architecture
/Users/davehail/Developer/inkwell/CHANGELOG.md:1186:- Replace mock data with real Claude API calls in `storyArchitectService`.
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:1:# Inkwell Footer Brand Update - Implementation Summary
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:5:### ‚úÖ **Updated Main Footer Component**
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:7:**File**: `src/components/Layout/Footer.tsx`
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:33:### ‚úÖ **Created Light Footer Variant**
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:35:**File**: `src/components/Layout/FooterLight.tsx`
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:66:// Dark footer (main app)
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:67:import { Footer } from '@/components/Layout/Footer';
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:69:// Light footer (docs/marketing)
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:70:import { FooterLight } from '@/components/Layout/FooterLight';
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:74:<Footer />
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:97:**Main Footer (Dark):**
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:103:**Light Footer:**
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:111:All footer variants include:
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:127:1. **Test across views** to ensure footer displays correctly
/Users/davehail/Developer/inkwell/FOOTER_BRAND_UPDATE_SUMMARY.md:132:The footer now properly reflects the Inkwell brand identity with correct attribution to Nexus Partners! üéâ
/Users/davehail/Developer/inkwell/src/test/syntheticCorpusGenerator.ts:58:    '[CHARACTER_NAME] could barely focus during [ACTIVITY]. [HIS_HER] mind drifted back to [PLOT_ELEMENT].',
/Users/davehail/Developer/inkwell/src/test/syntheticCorpusGenerator.ts:658:    return this.pickRandom(['The warning bell', 'Footsteps', 'Voices', 'The loudspeaker']);
/Users/davehail/Developer/inkwell/src/onboarding/steps/StepQuickActions.tsx:7:  selectors: ['.quick-actions-bar'],
/Users/davehail/Developer/inkwell/SUPABASE_INTEGRATION_COMPLETE_CHECKLIST.md:274:- [ ] Add to app header/status bar
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:1031:    resolution: {integrity: sha512-uUtx8BFoO1hNxtHjp3eqVPC/mWImGb2exOfGjMLUoipuWgjej+f4o/VP4bUI8U40gu7Teogd5VTeZUkGvJSPOQ==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:1170:    resolution: {integrity: sha512-Qq6YHhayieor3DxFOoYM1q0q1uMFYb7cSpLD2qzDSvK1NAvqFi8Xgivv0cFC6J+hWVw2teCYltyy9/m/14ryHg==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:2086:    resolution: {integrity: sha512-kpqnYK4wcdm5UaWI3fLcELopqLrHgLqNsdpHauzlQktfkHL3npOSwtj1Uz9oKBAzs7lFtVkV8j83voAz2D8fhw==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:2385:    resolution: {integrity: sha512-TIGnTpdo+E3+pCyAluZvtED5p5wCqLdezCyhPZzKPcxvFplEt4i+W7OONCKgeZFT3+y5NZZfOOS/Bdcanm1MYA==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:3303:    resolution: {integrity: sha512-A1rHYb06zjMGAxdLSkN2fXPBwuSaQ0iO5M/hdyS0Ajj1VBaRp0sPD3dn1FhME3c/JluGFbwSxyCfqdSbtQLAHQ==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:3551:    resolution: {integrity: sha512-9XNj/o4wrRFyhSMJOvsuyMwy8aUfBaZ1VrqHVfohyXf0Sw0e+yfKG+xZaY3arGCOMdwFsqObtzVOc1gU9KiT9w==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:4596:    resolution: {integrity: sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:5647:    resolution: {integrity: sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:5667:    resolution: {integrity: sha512-q+MB8nYR1KDLrgr4G5yemftpMC7/QLqVndBmEEdqzmNj5dcFOO4Oo8qlwZE3ULT3+Zim1F8Kq4cBnikNhlCMlg==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:5704:    resolution: {integrity: sha512-nWJ91DjeOkej/TA8pXQ3myruKpKEYgqvpw9lz4OPHj/NWFNluYrjbz9j01CJ8yKQd2g4jFoOkINCTW2I5LEEyw==}
/Users/davehail/Developer/inkwell/pnpm-lock.yaml:5916:    resolution: {integrity: sha512-WUu7Rg1DroM7oQvGWfOiAK21n74Gg+T4elXEQYkOhtyLeWiJFoOGLXPKI/9gzIie9CtwVLm8wtw6YJdKyxSjeg==}
/Users/davehail/Developer/inkwell/PR24_STATUS_SUMMARY.md:25:  - [x] StorageStatusIndicator UI component (footer badge)
/Users/davehail/Developer/inkwell/PR24_STATUS_SUMMARY.md:145:MainLayout (Footer)
/Users/davehail/Developer/inkwell/CONSOLIDATION_PROGRESS.md:450:- Faster chapter loading coming soon
/Users/davehail/Developer/inkwell/CHAPTER_MVP_COMPLETE.md:37:‚îÇ   ‚îú‚îÄ‚îÄ ChapterSidebar.tsx            # Main sidebar with DnD
/Users/davehail/Developer/inkwell/USER_GUIDE.md:10:| **‚åò\\**                                                                                  | Toggle Sidebar          |
/Users/davehail/Developer/inkwell/USER_GUIDE.md:81:1. Click **"Writing"** in the sidebar
/Users/davehail/Developer/inkwell/USER_GUIDE.md:102:Inkwell now features a **collapsible sidebar** and enhanced navigation:
/Users/davehail/Developer/inkwell/USER_GUIDE.md:104:**Sidebar Features**:
/Users/davehail/Developer/inkwell/USER_GUIDE.md:106:- **Collapsible Design**: Click the hamburger menu (‚ò∞) to toggle sidebar
/Users/davehail/Developer/inkwell/USER_GUIDE.md:128:| **‚åò\\**                        | Toggle Sidebar          |
/Users/davehail/Developer/inkwell/USER_GUIDE.md:179:### AI Toolbar
/Users/davehail/Developer/inkwell/USER_GUIDE.md:181:When you select text in the editor, the **AI Toolbar** appears with options:
/Users/davehail/Developer/inkwell/USER_GUIDE.md:240:- **Writing Statistics Bar**: Real-time metrics display
/Users/davehail/Developer/inkwell/USER_GUIDE.md:273:1. Click **Focus Mode** button in the writing panel toolbar
/Users/davehail/Developer/inkwell/USER_GUIDE.md:276:   - **Minimal Focus**: Hide sidebar, keep statistics visible
/Users/davehail/Developer/inkwell/USER_GUIDE.md:295:1. Click **Timeline** in sidebar
/Users/davehail/Developer/inkwell/USER_GUIDE.md:320:- **EPUB**: E-book format (coming soon)
/Users/davehail/Developer/inkwell/USER_GUIDE.md:578:- **Manual Toggle**: Click the theme toggle in the sidebar or use **‚åòD**
/Users/davehail/Developer/inkwell/PROJECT_CREATION_BUTTONS_FIX.md:25:### 2. Updated Sidebar Component
/Users/davehail/Developer/inkwell/PROJECT_CREATION_BUTTONS_FIX.md:27:**File**: `src/components/Sidebar.tsx`
/Users/davehail/Developer/inkwell/PROJECT_CREATION_BUTTONS_FIX.md:70:3. `src/components/Sidebar.tsx` - Use dialog instead of direct creation
/Users/davehail/Developer/inkwell/PROJECT_CREATION_BUTTONS_FIX.md:79:- [ ] "+ New Project" button in sidebar opens dialog
/Users/davehail/Developer/inkwell/index.html:170:    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
/Users/davehail/Developer/inkwell/REACT_HOOKS_FIX_SUMMARY.md:48:#### 6. **src/components/Writing/EnhancedAIWritingToolbar.tsx**
/Users/davehail/Developer/inkwell/ONBOARDING_CONSOLIDATION_SUMMARY.md:32:   - Progress bar, completion celebration
/Users/davehail/Developer/inkwell/ONBOARDING_CONSOLIDATION_SUMMARY.md:74:   - Progress bar with percentage
/Users/davehail/Developer/inkwell/ONBOARDING_CONSOLIDATION_SUMMARY.md:205:- [ ] Progress bar updates correctly
/Users/davehail/Developer/inkwell/ARCHIVE_ACTIVATION_SUMMARY.md:39:- Added barrel exports for all 8 archive functions
/Users/davehail/Developer/inkwell/ARCHIVE_ACTIVATION_SUMMARY.md:324:- `src/utils/index.ts` - Added barrel exports for archive functions
/Users/davehail/Developer/inkwell/ARCHIVE_ACTIVATION_SUMMARY.md:356:- Added barrel exports for archive functions in src/utils/index.ts
/Users/davehail/Developer/inkwell/TOUR_BOOT_TIMING_FIX.md:164:    '[data-tour-id="topbar"]',
/Users/davehail/Developer/inkwell/TOUR_BOOT_TIMING_FIX.md:166:    '#app-topbar',
/Users/davehail/Developer/inkwell/TOUR_BOOT_TIMING_FIX.md:258:**Result**: Tour callouts always visible above sticky topbar.
/Users/davehail/Developer/inkwell/src/services/featureFlagService.ts:47:      key: 'ai_enhanced_toolbar',
/Users/davehail/Developer/inkwell/src/services/featureFlagService.ts:48:      name: 'Enhanced AI Toolbar',
/Users/davehail/Developer/inkwell/src/services/featureFlagService.ts:171:      description: 'Enable demo-friendly features and mock data',
/Users/davehail/Developer/inkwell/PRODUCTION_POLISH_FIXES.md:46:- ‚úÖ "New Project" button in Sidebar (bottom of nav) - Works correctly, debounced
/Users/davehail/Developer/inkwell/PRODUCTION_POLISH_FIXES.md:77:- [ ] Test "New Project" button in sidebar creates project
/Users/davehail/Developer/inkwell/TOUR_VERIFICATION_COMPLETE.md:107:- Placement: bottom (safe for topbar area)
/Users/davehail/Developer/inkwell/TYPE_CONSOLIDATION_STATUS.md:122:4. **Template/mock data** (1 error)
/Users/davehail/Developer/inkwell/api/export/__tests__/pdf.test.ts:28:  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
/Users/davehail/Developer/inkwell/SPOTLIGHT_TOUR_FINAL_INTEGRATION.md:186:- ‚úÖ Navigation sidebar
/Users/davehail/Developer/inkwell/SPOTLIGHT_TOUR_FINAL_INTEGRATION.md:187:- ‚úÖ Quick actions topbar
/Users/davehail/Developer/inkwell/SPOTLIGHT_TOUR_PHASE2_INTEGRATION_COMPLETE.md:50:   - Barrel export for clean imports
/Users/davehail/Developer/inkwell/SPOTLIGHT_TOUR_PHASE2_INTEGRATION_COMPLETE.md:143:<nav data-tour-id="sidebar">
/Users/davehail/Developer/inkwell/SPOTLIGHT_TOUR_PHASE2_INTEGRATION_COMPLETE.md:144:<header data-tour-id="topbar">
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:162:- **Compact** (footer): Shows status badge, expandable detail panel
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:169:- Quota usage bar
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:177:// Compact variant (footer)
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:236:### MainLayout Footer
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:239:<footer>
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:248:</footer>
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:330:- ‚úÖ Footer shows storage status badge
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:332:- ‚úÖ Quota usage bar with color coding
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:341:   - Footer shows "Persisted ‚úì 10%" (green checkmark)
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:344:   - Footer badge turns yellow: "Persisted ‚ö† 85%"
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:349:   - Footer badge turns red: "Temporary ‚ö† 96%"
/Users/davehail/Developer/inkwell/DATA_PERSISTENCE_IMPLEMENTATION_SUMMARY.md:482:**Symptom**: Footer shows "Temporary" instead of "Persisted"
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:58:**Problem**: Button wasn't wired up, no New Project button in sidebar
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:71:#### B. Sidebar Button (New!)
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:73:- Added "New Project" button at bottom of sidebar
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:74:- Only shows when sidebar is expanded
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:76:- Includes tour anchor: `data-tour-id="sidebar-new-project"`
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:82:- `src/components/Sidebar.tsx` ‚≠ê NEW
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:88:**Problem**: Topbar was using gray/white colors instead of brand blue (#0F2D52) and gold (#CDAA47)
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:90:**Fix**: Complete topbar redesign with brand colors
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:106:**File**: `src/components/Topbar.tsx`
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:154:- [ ] New Project button in sidebar (expanded) works the same way
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:178:3. ‚úÖ `src/components/Topbar.tsx` - Blue/gold branding + styling
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:182:7. ‚úÖ `src/components/Sidebar.tsx` - New Project button added ‚≠ê
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:203:All three buttons (`DashboardPanel`, `Welcome`, `Sidebar`) call the same logic:
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:209:5. (Sidebar only) Switch to Dashboard view
/Users/davehail/Developer/inkwell/BRANDING_UI_FIXES_COMPLETE.md:217:1. **Logo on Sidebar**: Add small Inkwell icon/wordmark to top of sidebar
/Users/davehail/Developer/inkwell/TOUR_DATA_ATTRIBUTES_IMPLEMENTATION.md:48:- **Location:** AI Toolbar Panel container
/Users/davehail/Developer/inkwell/TOUR_DATA_ATTRIBUTES_IMPLEMENTATION.md:50:- **Action:** Main AI assistant panel with Claude toolbar
/Users/davehail/Developer/inkwell/TOUR_DATA_ATTRIBUTES_IMPLEMENTATION.md:122:- [ ] **Core Tour** - Dashboard ‚Üí Sidebar ‚Üí Topbar steps work
/Users/davehail/Developer/inkwell/TOUR_DATA_ATTRIBUTES_IMPLEMENTATION.md:295:# - dashboard, sidebar, topbar (existing)
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:1:# Sidebar Collapse Fix - Implementation Summary
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:6:- **Hamburger disappearing**: The sidebar container lost width/z-index when collapsed, making the hamburger inaccessible
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:7:- **Content misalignment**: The main content wasn't syncing properly with sidebar state changes
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:13:- Added `--sidebar-w` CSS variable to control sidebar width from parent component
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:14:- Ensures both sidebar and main content stay in perfect sync
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:19:  ['--sidebar-w' as any]: sidebarCollapsed ? '4rem' : '16rem',
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:39:- **Margin sync**: Uses `marginLeft: 'var(--sidebar-w)'` instead of fixed classes
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:45:- **will-change: width**: Optimizes browser rendering for sidebar transitions
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:55:‚úÖ **Perfect sync**: Content and sidebar margins always match
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:60:1. `src/components/Layout/MainLayout.tsx` - Main layout component with sidebar logic
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:62:3. `src/App.css` - Added sidebar optimization styles
/Users/davehail/Developer/inkwell/SIDEBAR_FIX_SUMMARY.md:66:- [ ] Sidebar collapses to 64px rail smoothly
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_IMPLEMENTATION.md:122:#### 1. Chapter Sidebar (`src/components/Writing/Chapters/ChapterSidebar.tsx`)
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_IMPLEMENTATION.md:229:- [ ] ChapterSidebar component
/Users/davehail/Developer/inkwell/ROADMAP.md:66:- Autosave status indicator in Topbar
/Users/davehail/Developer/inkwell/tailwind.config.ts:38:          2: 'hsl(var(--surface-2))', // sidebar/header
/Users/davehail/Developer/inkwell/docs/BRAND_ACCESSIBILITY_GUIDE.md:97:- **Sidebar**: Navy background with white text, gold accents
/Users/davehail/Developer/inkwell/docs/TECH_DEBT.md:27:Add quick action in Topbar: ‚ÄúManual Snapshot‚Äù with toast feedback + spinner.
/Users/davehail/Developer/inkwell/docs/TECH_DEBT.md:69:Extract shared UI primitives (Dialog/Toast/Button/etc.) under a single ui/ barrel with strict props.
/Users/davehail/Developer/inkwell/BRAND_DEPLOYMENT_GUIDE.md:140:- [ ] Navigation header/sidebar
/Users/davehail/Developer/inkwell/BRAND_DEPLOYMENT_GUIDE.md:182:// In footer or minimal contexts
/Users/davehail/Developer/inkwell/docs/PLOT_BOARDS_COLLABORATION.md:56:#### 4. Collaboration Toolbar (`components/collaboration/CollaborationToolbar.tsx`)
/Users/davehail/Developer/inkwell/README.md:60:  - Core tour (Dashboard, Sidebar, Topbar navigation)
/Users/davehail/Developer/inkwell/README.md:166:- **AI Writing Toolbar** ‚Äî Context-aware suggestions for continuing scenes and improving flow
/Users/davehail/Developer/inkwell/README.md:219:  - **Completion tracking** with progress bars and step verification
/Users/davehail/Developer/inkwell/docs/BEGINNER_MODE_INTEGRATION.md:416:    await writeText(project.id, 'Lorem ipsum...'.repeat(100)); // 300+ words
/Users/davehail/Developer/inkwell/docs/features/CHAPTER_MANAGEMENT.md:132:1. Click "New Chapter" button in sidebar
/Users/davehail/Developer/inkwell/docs/features/CHAPTER_MANAGEMENT.md:149:1. Click chapter title in sidebar
/Users/davehail/Developer/inkwell/docs/features/CHAPTER_MANAGEMENT.md:165:- Drag chapter in sidebar to new position
/Users/davehail/Developer/inkwell/docs/features/CHAPTER_MANAGEMENT.md:179:2. Click "Split Chapter" in toolbar
/Users/davehail/Developer/inkwell/docs/features/CHAPTER_MANAGEMENT.md:187:2. Click "Link Scene" in sidebar
/Users/davehail/Developer/inkwell/docs/features/export.md:9:Or click the **Export** button in the top navigation bar.
/Users/davehail/Developer/inkwell/docs/features/export.md:23:- Footers with page numbers and project name
/Users/davehail/Developer/inkwell/docs/features/export.md:85:- Header/footer positioning
/Users/davehail/Developer/inkwell/docs/TOUR_A11Y_ANALYTICS_VARIANTS.md:311:<!-- Export button in top bar -->
/Users/davehail/Developer/inkwell/docs/TOUR_A11Y_ANALYTICS_VARIANTS.md:326:- `[data-tour-id="sidebar"]`
/Users/davehail/Developer/inkwell/docs/TOUR_A11Y_ANALYTICS_VARIANTS.md:327:- `[data-tour-id="topbar"]`
/Users/davehail/Developer/inkwell/docs/features/TOUR_SYSTEM.md:111:<div data-tour-id="sidebar">
/Users/davehail/Developer/inkwell/docs/features/TOUR_SYSTEM.md:112:  <!-- Sidebar content -->
/Users/davehail/Developer/inkwell/DOCUMENTATION_AUDIT_2025.md:126:- `FOOTER_BRAND_UPDATE_SUMMARY.md`
/Users/davehail/Developer/inkwell/DOCUMENTATION_AUDIT_2025.md:157:- `SIDEBAR_FIX_SUMMARY.md`
/Users/davehail/Developer/inkwell/DOCUMENTATION_AUDIT_2025.md:331:- `docs/enhanced-ai-toolbar.md` ‚ùå **DELETE** - Use docs/dev/ai-services.md
/Users/davehail/Developer/inkwell/docs/features/tour.md:283:  id: 'open-sidebar',
/Users/davehail/Developer/inkwell/docs/features/tour.md:285:    // Open a collapsed sidebar before highlighting
/Users/davehail/Developer/inkwell/docs/features/tour.md:286:    await openSidebar();
/Users/davehail/Developer/inkwell/docs/features/tour.md:290:    console.log('User viewed sidebar tour step');
/Users/davehail/Developer/inkwell/ESLINT_FINAL_STATUS.md:51:6. `src/components/Writing/EnhancedAIWritingToolbar.tsx` - missing performRealTimeAnalysis
/Users/davehail/Developer/inkwell/docs/PERFORMANCE.md:39:- Added hover preloading for PlotAnalysisPanel on sidebar navigation
/Users/davehail/Developer/inkwell/docs/PLOT_BOARDS.md:35:- **Progress Visualization**: Visual progress bars showing completion percentages
/Users/davehail/Developer/inkwell/docs/PLOT_BOARDS.md:79:‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CollaborationToolbar.tsx    # Sharing and user controls
/Users/davehail/Developer/inkwell/docs/PLOT_BOARDS.md:165:1. **Access**: Navigate to "Plot Boards" in the sidebar (appears when enabled)
/Users/davehail/Developer/inkwell/docs/PLOT_BOARDS.md:211:1. **Share Button**: Click the "Share" button in the collaboration toolbar
/Users/davehail/Developer/inkwell/scripts/delete-redundant-docs.sh:123:git rm -f docs/enhanced-ai-toolbar.md 2>/dev/null || true
/Users/davehail/Developer/inkwell/docs/ONBOARDING.md:101:<nav data-tour-id="sidebar">Navigation</nav>
/Users/davehail/Developer/inkwell/docs/ONBOARDING.md:102:<header data-tour-id="topbar">Top Bar</header>
/Users/davehail/Developer/inkwell/docs/ONBOARDING.md:129:2. **Sidebar** - Navigation overview
/Users/davehail/Developer/inkwell/docs/ONBOARDING.md:130:3. **Topbar** - Quick actions and settings
/Users/davehail/Developer/inkwell/docs/BRAND_UPDATE_SUMMARY.md:14:  - Used in marketing materials, footers, and documentation
/Users/davehail/Developer/inkwell/docs/BRAND_UPDATE_SUMMARY.md:38:- ‚úÖ **Sidebar Branding**: Consistent logo theming
/Users/davehail/Developer/inkwell/docs/BRAND_UPDATE_SUMMARY.md:149:- üß≠ **Sidebar logo and navigation**
/Users/davehail/Developer/inkwell/docs/product/v0.8.0-scope.md:33:- Add autosave status indicator in Topbar: "Saving‚Ä¶ / Saved / Offline"
/Users/davehail/Developer/inkwell/docs/product/v0.8.0-scope.md:46:- `src/components/Topbar/AutosaveIndicator.tsx` (new)
/Users/davehail/Developer/inkwell/docs/product/v0.8.0-scope.md:211:| Phase 1: Editor + Autosave | Week 1 | PR #26‚Äì#28 | Enhanced editor, autosave service, Topbar indicator  |
/Users/davehail/Developer/inkwell/docs/CRITICAL_FIXES_2025-10-10.md:182:- ‚úÖ Layout Footer Tests: 5/5 tests passing
/Users/davehail/Developer/inkwell/docs/BRANDING_GUIDE.md:28:  - Used in marketing materials, footers, feature pages
/Users/davehail/Developer/inkwell/docs/BRANDING_GUIDE.md:56:- **App Sidebar:** 24√ó24 icon followed by wordmark
/Users/davehail/Developer/inkwell/docs/BRANDING_GUIDE.md:280:### App Sidebar
/Users/davehail/Developer/inkwell/docs/BRANDING_GUIDE.md:322:| Sidebar header   | Add wordmark + tagline hover                    | Frontend | ‚òê      |
/Users/davehail/Developer/inkwell/docs/BRANDING_GUIDE.md:334:- Always include Inkwell mark in the top-left or footer.
/Users/davehail/Developer/inkwell/docs/PHASE_3_IMPLEMENTATION_CHECKLIST.md:16:- Add TourReplayButton to a user‚Äëdiscoverable location (Settings or footer).
/Users/davehail/Developer/inkwell/docs/PHASE_3_IMPLEMENTATION_CHECKLIST.md:129:- `tour_replayed` ‚Äî { source: 'settings' | 'footer' | 'cta' }
/Users/davehail/Developer/inkwell/docs/PHASE_3_IMPLEMENTATION_CHECKLIST.md:157:**Placement**: SettingsPanel or persistent footer.
/Users/davehail/Developer/inkwell/docs/PHASE_3_IMPLEMENTATION_CHECKLIST.md:201:- [ ] Progress bar updates correctly
/Users/davehail/Developer/inkwell/docs/product/first-run-experience.md:180:- **Target**: Projects sidebar or grid
/Users/davehail/Developer/inkwell/docs/product/first-run-experience.md:195:- **Content**: "Write and edit your chapters here. Use the toolbar for formatting and structure."
/Users/davehail/Developer/inkwell/docs/product/first-run-experience.md:199:- **Target**: Chapters sidebar
/Users/davehail/Developer/inkwell/scripts/cleanup-docs-phase1.sh:82:archive_file "FOOTER_BRAND_UPDATE_SUMMARY.md" "summaries"
/Users/davehail/Developer/inkwell/scripts/cleanup-docs-phase1.sh:90:archive_file "SIDEBAR_FIX_SUMMARY.md" "summaries"
/Users/davehail/Developer/inkwell/docs/PHASE_1_UX_REFERENCE.md:105:- [ ] Consider placement in chapter header or toolbar
/Users/davehail/Developer/inkwell/docs/TYPESCRIPT_FIXES.md:199:- **Test fix**: `856728f` - "fix: add missing \_focusWritingEditor mock export for Sidebar test"
/Users/davehail/Developer/inkwell/scripts/run-audit.sh:43:rg -n --no-heading -S 'lorem ipsum|foo|bar|baz|mock data|coming soon' \
/Users/davehail/Developer/inkwell/e2e/export-dashboard.spec.ts:284:      // Verify chart has bars
/Users/davehail/Developer/inkwell/e2e/export-dashboard.spec.ts:285:      const chartBars = page
/Users/davehail/Developer/inkwell/e2e/export-dashboard.spec.ts:288:      await expect(chartBars.first()).toBeVisible({ timeout: 2000 });
/Users/davehail/Developer/inkwell/docs/integration/spotlight-tour-integration.md:77:      body: 'This is the editor where you'll write your chapters. Use the toolbar for formatting.',
/Users/davehail/Developer/inkwell/docs/integration/spotlight-tour-integration.md:84:      body: 'Use the sidebar to organize your chapters. Drag and drop to reorder.',
/Users/davehail/Developer/inkwell/docs/integration/spotlight-tour-integration.md:85:      selectors: ['[data-tour-id="chapters-sidebar"]', '.chapters-list'],
/Users/davehail/Developer/inkwell/docs/integration/spotlight-tour-integration.md:198:      <aside data-tour-id="chapters-sidebar" className="chapters-sidebar">
/Users/davehail/Developer/inkwell/docs/TypeCheck-Repair.md:33:- Fixed Sidebar test mocks with proper types
/Users/davehail/Developer/inkwell/docs/TROUBLESHOOTING.md:122:   - Try `/settings` directly in address bar
/Users/davehail/Developer/inkwell/docs/ops/telemetry.md:162:2. **Step Drop-off**: Bar chart showing where users exit
/Users/davehail/Developer/inkwell/eslint-report.json:146:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Analytics/SidebarGoalsWidget.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:179:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Auth/AuthFooter.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:210:    "source": "import React, { useEffect, useState } from 'react';\n\nimport { supabase } from '@/lib/supabaseClient';\nimport { useGo } from '@/utils/navigate';\nimport { normalizeSafeRedirect } from '@/utils/safeRedirect';\n\nexport type AuthFormMode = 'signin' | 'signup';\n\n/**\n * Maps raw Supabase error messages to user-friendly descriptions\n */\nfunction getAuthErrorMessage(\n  rawMessage: string,\n  mode: AuthFormMode,\n  tab: 'password' | 'magic',\n): string {\n  const lower = rawMessage.toLowerCase();\n\n  // Invalid credentials\n  if (lower.includes('invalid') && (lower.includes('credentials') || lower.includes('login'))) {\n    return 'The email or password you entered is incorrect. Please try again.';\n  }\n\n  // User not found\n  if (lower.includes('user') && lower.includes('not found')) {\n    return mode === 'signin'\n      ? \"We couldn't find an account with that email. Please check your email or sign up.\"\n      : 'Unable to create account. Please try again.';\n  }\n\n  // Email already registered\n  if (lower.includes('already') && lower.includes('registered')) {\n    return 'An account with this email already exists. Try signing in instead.';\n  }\n\n  // Invalid email format\n  if (lower.includes('invalid') && lower.includes('email')) {\n    return 'Please enter a valid email address (e.g., you@example.com).';\n  }\n\n  // Password too weak\n  if (lower.includes('password') && (lower.includes('weak') || lower.includes('strength'))) {\n    return 'Please choose a stronger password with at least 8 characters, including letters and numbers.';\n  }\n\n  // Rate limiting\n  if (lower.includes('rate limit') || lower.includes('too many')) {\n    return 'Too many attempts. Please wait a few minutes before trying again.';\n  }\n\n  // Email sending issues\n  if (lower.includes('email') && (lower.includes('send') || lower.includes('deliver'))) {\n    return 'Unable to send email. Please check your email address and try again.';\n  }\n\n  // Network issues\n  if (lower.includes('network') || lower.includes('connection') || lower.includes('timeout')) {\n    return 'Connection issue. Please check your internet connection and try again.';\n  }\n\n  // Magic link specific\n  if (tab === 'magic' && lower.includes('otp')) {\n    return 'Unable to send magic link. Please try again or use email & password sign in.';\n  }\n\n  // Signup specific - email confirmation\n  if (mode === 'signup' && lower.includes('confirm')) {\n    return 'Please check your email to confirm your account before signing in.';\n  }\n\n  // Generic fallback with more helpful context\n  if (rawMessage) {\n    return `Authentication error: ${rawMessage}. Please try again or contact support if the issue persists.`;\n  }\n\n  return 'Something went wrong. Please try again or contact support if the issue persists.';\n}\n\nexport function AuthForm({\n  mode,\n  redirect,\n  primaryCtaLabel,\n}: {\n  mode: AuthFormMode;\n  redirect: string;\n  primaryCtaLabel: string;\n}) {\n  const go = useGo();\n  const [activeTab, setActiveTab] = useState<'password' | 'magic'>('password');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirm, setConfirm] = useState('');\n  const [fullName, setFullName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState<string | null>(null);\n  const [notice, setNotice] = useState<string | null>(null);\n\n  // Default tab is password on every mount and route\n  useEffect(() => {\n    setActiveTab('password');\n  }, [mode]);\n\n  // Prepare the callback URL for auth redirects - ensure we use the consistent naming for params\n  const emailRedirectTo = `${window.location.origin}/auth/callback?next=${encodeURIComponent(redirect)}`;\n\n  // Mode-specific validation and submission logic\n  const handleSignIn = async () => {\n    if (activeTab === 'password') {\n      // Sign in with email/password\n      const { error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      if (error) throw error;\n      go(normalizeSafeRedirect(redirect));\n      return;\n    } else {\n      // Magic Link flow (only available for sign-in)\n      const { error } = await supabase.auth.signInWithOtp({\n        email,\n        options: {\n          emailRedirectTo,\n        },\n      });\n\n      if (error) throw error;\n      setNotice('Magic link sent. Check your email.');\n      // Optional: redirect to a \"check email\" page instead\n      // go('/check-email?mode=signin', { replace: true });\n    }\n  };\n\n  const handleSignUp = async () => {\n    // Sign up requires email/password validation\n    if (!password || password.length < 8) {\n      setErr('Use at least 8 characters.');\n      return false;\n    }\n\n    if (password !== confirm) {\n      setErr('Passwords do not match.');\n      return false;\n    }\n\n    // Create new account with optional full name\n    const { error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo,\n        data: { full_name: fullName || undefined },\n      },\n    });\n\n    if (error) throw error;\n\n    // If using email confirmation (recommended), show a message\n    setNotice('Check your email to confirm your account.');\n    // Optional: redirect to a \"check email\" page instead\n    // go('/check-email?mode=signup', { replace: true });\n\n    return true;\n  };\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setErr(null);\n    setNotice(null);\n    setLoading(true);\n\n    try {\n      if (mode === 'signup') {\n        await handleSignUp();\n      } else {\n        await handleSignIn();\n      }\n    } catch (e: any) {\n      // Map Supabase errors to user-friendly messages\n      const errorMessage = getAuthErrorMessage(e?.message || '', mode, activeTab);\n      setErr(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const showConfirm = mode === 'signup' && activeTab === 'password';\n\n  // Mode-specific UI helpers\n  const tabBtn = (k: 'password' | 'magic', label: string) => (\n    <button\n      type=\"button\"\n      onClick={() => setActiveTab(k)}\n      className={`px-3 py-2 text-sm font-medium ${activeTab === k ? 'text-[#13294B] border-b-2 border-[#D4AF37]' : 'text-slate-500'}`}\n      aria-pressed={activeTab === k}\n    >\n      {label}\n    </button>\n  );\n\n  // Mode-specific labels and hints\n  const emailPlaceholder = mode === 'signin' ? 'Enter your email' : 'Enter your email address';\n  const passwordPlaceholder =\n    mode === 'signin' ? 'Enter your password' : 'Create a strong password';\n  const passwordLabel = mode === 'signin' ? 'Password' : 'Create password';\n\n  return (\n    <form onSubmit={onSubmit} className=\"space-y-5\">\n      {/* Tab selector - only show Magic Link option for sign-in */}\n      <div className=\"flex items-center gap-4 border-b pb-2\">\n        {tabBtn('password', 'Email & Password')}\n        {mode === 'signin' && (\n          <>\n            <span className=\"h-5 w-px bg-slate-200\" />\n            {tabBtn('magic', 'Magic Link')}\n          </>\n        )}\n      </div>\n\n      <div className=\"space-y-4\">\n        {/* Full Name field - only for sign-up */}\n        {mode === 'signup' && (\n          <div>\n            <label htmlFor=\"fullname-input\" className=\"block text-sm font-medium text-slate-700\">\n              Full name\n            </label>\n            <input\n              id=\"fullname-input\"\n              type=\"text\"\n              value={fullName}\n              onChange={(e) => setFullName(e.target.value)}\n              className=\"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-[#D4AF37]\"\n              autoComplete=\"name\"\n              placeholder=\"Enter your full name\"\n            />\n          </div>\n        )}\n\n        {/* Email field - common to both modes */}\n        <div>\n          <label htmlFor=\"email-input\" className=\"block text-sm font-medium text-slate-700\">\n            Email address\n          </label>\n          <input\n            id=\"email-input\"\n            required\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-[#D4AF37]\"\n            autoComplete=\"email\"\n            placeholder={emailPlaceholder}\n          />\n        </div>\n\n        {activeTab === 'password' && (\n          <>\n            <div>\n              <label htmlFor=\"password-input\" className=\"block text-sm font-medium text-slate-700\">\n                {passwordLabel}\n              </label>\n              <input\n                id=\"password-input\"\n                required\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-[#D4AF37]\"\n                autoComplete={mode === 'signup' ? 'new-password' : 'current-password'}\n                placeholder={passwordPlaceholder}\n                minLength={mode === 'signup' ? 8 : undefined}\n              />\n              {mode === 'signin' && (\n                <div className=\"mt-2 text-right\">\n                  <a\n                    href=\"/auth/forgot-password\"\n                    className=\"text-sm text-[#13294B] hover:underline\"\n                  >\n                    Forgot your password?\n                  </a>\n                </div>\n              )}\n            </div>\n\n            {showConfirm && (\n              <div>\n                <label\n                  htmlFor=\"confirm-password-input\"\n                  className=\"block text-sm font-medium text-slate-700\"\n                >\n                  Confirm password\n                </label>\n                <input\n                  id=\"confirm-password-input\"\n                  required\n                  type=\"password\"\n                  value={confirm}\n                  onChange={(e) => setConfirm(e.target.value)}\n                  className=\"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-[#D4AF37]\"\n                  autoComplete=\"new-password\"\n                  placeholder=\"Confirm your password\"\n                />\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Error and notification handling */}\n      {err && <p className=\"text-sm text-red-600\">{err}</p>}\n      {notice && <p className=\"text-sm text-emerald-700\">{notice}</p>}\n\n      {/* Mode-specific submission button */}\n      <button\n        type=\"submit\"\n        disabled={loading}\n        className={`w-full rounded-xl bg-[#13294B] text-white px-4 py-3 font-semibold ring-1 ring-black/5 hover:opacity-90 disabled:opacity-60`}\n        data-testid={`${mode}-button`}\n      >\n        {loading\n          ? 'Please wait‚Ä¶'\n          : mode === 'signup'\n            ? 'Create account'\n            : activeTab === 'password'\n              ? 'Sign in'\n              : 'Send magic link'}\n      </button>\n\n      {/* Mode-specific helper text */}\n      {mode === 'signin' && activeTab === 'password' && (\n        <p className=\"text-center text-xs text-slate-500\">\n          Trouble signing in? Try the Magic Link tab for password-free sign in.\n        </p>\n      )}\n      {mode === 'signin' && activeTab === 'magic' && (\n        <p className=\"text-center text-xs text-slate-500\">\n          We'll email you a secure link for password-free access to your account.\n        </p>\n      )}\n      {mode === 'signup' && (\n        <p className=\"text-center text-xs text-slate-500\">\n          By creating an account, you agree to our Terms of Service and Privacy Policy.\n        </p>\n      )}\n\n      {/* Account switching links removed - now handled by AuthFooter component */}\n    </form>\n  );\n}\n",
/Users/davehail/Developer/inkwell/eslint-report.json:608:    "source": "// src/components/Dashboard/EnhancedDashboard.tsx\nimport { PlusCircle, FileText, BarChart3, Target, Zap, Star, ArrowRight, X } from 'lucide-react';\nimport React, { useState, useEffect } from 'react';\n\nimport { InkwellFeather } from '@/components/icons';\nimport type { InkwellIconName } from '@/components/icons/InkwellFeather';\nimport StatusChip from '@/components/Storage/StatusChip';\nimport { StorageHealthWidget } from '@/components/Storage/StorageHealthWidget';\nimport { useAppContext, View } from '@/context/AppContext';\nimport { useTourStartupFromUrl } from '@/hooks/useTourStartupFromUrl';\nimport { useUI } from '@/hooks/useUI';\nimport { triggerOnProjectCreated } from '@/utils/tourTriggers';\n\nconst EnhancedDashboard: React.FC = () => {\n  const { state, currentProject, addProject, setCurrentProjectId, dispatch } = useAppContext();\n  const { newProjectDialogOpen, openNewProjectDialog, closeNewProjectDialog } = useUI();\n  const [storageModalOpen, setStorageModalOpen] = useState(false);\n\n  // Check for tour=start in URL and trigger tour if found\n  useTourStartupFromUrl();\n\n  // Handle URL parameter and keyboard shortcut for storage modal\n  useEffect(() => {\n    // Check for ?storage=1 in URL\n    if (new URLSearchParams(window.location.search).get('storage') === '1') {\n      setStorageModalOpen(true);\n    }\n\n    // Keyboard shortcut: Cmd/Ctrl + Shift + S\n    const onKey = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key.toLowerCase() === 's') {\n        e.preventDefault();\n        setStorageModalOpen((v) => !v);\n      }\n    };\n    window.addEventListener('keydown', onKey);\n    return () => window.removeEventListener('keydown', onKey);\n  }, []);\n\n  const _createNewProject = async () => {\n    try {\n      const newProject = {\n        id: `project-${Date.now()}`,\n        name: `New Story ${state.projects.length + 1}`,\n        description: 'A new fiction project',\n        content: '',\n        createdAt: Date.now(),\n        updatedAt: Date.now(),\n      };\n\n      addProject({ ...newProject, chapters: [], characters: [], beatSheet: [] });\n      setCurrentProjectId(newProject.id);\n\n      // Fire tour trigger for project creation\n      triggerOnProjectCreated(newProject.id);\n\n      // Auto-navigate to writing after creation\n      setTimeout(() => {\n        dispatch({ type: 'SET_VIEW', payload: View.Writing });\n      }, 500);\n    } catch (error) {\n      console.error('Failed to create project:', error);\n    }\n  };\n\n  const navigateToView = (view: View) => {\n    dispatch({ type: 'SET_VIEW', payload: view });\n  };\n\n  const formatDate = (timestamp: number) => {\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const getProjectWordCount = (project: any) => {\n    if (!project.content) return 0;\n    return project.content.split(' ').filter((word: string) => word.length > 0).length;\n  };\n\n  const getDaysAgo = (timestamp: number) => {\n    const days = Math.floor((Date.now() - timestamp) / (1000 * 60 * 60 * 24));\n    if (days === 0) return 'Today';\n    if (days === 1) return '1 day ago';\n    return `${days} days ago`;\n  };\n\n  const quickActions = [\n    {\n      id: 'new-project',\n      title: 'Create New Project',\n      description: 'Start a fresh writing project with templates and structure',\n      icon: PlusCircle,\n      color: 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400',\n      action: () => openNewProjectDialog(),\n    },\n    {\n      id: 'continue-writing',\n      title: 'Continue Writing',\n      description: 'Pick up where you left off in your current project',\n      icon: FileText,\n      color: 'bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400',\n      action: () => navigateToView(View.Writing),\n      disabled: !currentProject,\n    },\n    {\n      id: 'view-analytics',\n      title: 'View Analytics',\n      description: 'Check your writing progress and statistics',\n      icon: BarChart3,\n      color: 'bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400',\n      action: () => navigateToView(View.Analysis),\n    },\n    {\n      id: 'plan-story',\n      title: 'Plan Your Story',\n      description: 'Organize characters, plots, and story structure',\n      icon: () => <InkwellFeather name={'planning' as InkwellIconName} size=\"sm\" />,\n      color: 'bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400',\n      action: () => navigateToView(View.Planning),\n    },\n  ];\n\n  // If no projects exist, show onboarding\n  if (state.projects.length === 0) {\n    return (\n      <div className=\"enhanced-dashboard fade-in\">\n        <div className=\"max-w-4xl mx-auto text-center py-16\">\n          {/* Welcome Header */}\n          <div className=\"mb-12\">\n            <div className=\"w-20 h-20 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <InkwellFeather name=\"writing\" size=\"2xl\" color=\"primary\" />\n            </div>\n            <h1 className=\"text-4xl font-bold text-slate-900 dark:text-white mb-4\">\n              Welcome to Inkwell\n            </h1>\n            <p className=\"text-lg text-slate-600 dark:text-slate-300 max-w-2xl mx-auto\">\n              Your professional writing companion. Create compelling stories, track your progress,\n              and achieve your writing goals with powerful tools designed for serious writers.\n            </p>\n          </div>\n\n          {/* Getting Started */}\n          <div className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-8 mb-8\">\n            <h2 className=\"text-2xl font-semibold text-slate-900 dark:text-white mb-6\">\n              Let's get you started\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n              <div className=\"text-center p-4\">\n                <div className=\"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mx-auto mb-3\">\n                  <span className=\"text-xl\">üìù</span>\n                </div>\n                <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-2\">\n                  Create\n                </h3>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  Start a new project with our guided setup\n                </p>\n              </div>\n              <div className=\"text-center p-4\">\n                <div className=\"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center mx-auto mb-3\">\n                  <span className=\"text-xl\">‚úçÔ∏è</span>\n                </div>\n                <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-2\">Write</h3>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  Focus on your story with our distraction-free editor\n                </p>\n              </div>\n              <div className=\"text-center p-4\">\n                <div className=\"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mx-auto mb-3\">\n                  <span className=\"text-xl\">üìä</span>\n                </div>\n                <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-2\">Track</h3>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  Monitor progress and celebrate milestones\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={openNewProjectDialog}\n              className=\"btn btn-primary btn-lg\"\n              type=\"button\"\n              data-test=\"create-first-project\"\n              data-tour-id=\"create-project-button\"\n            >\n              <PlusCircle className=\"w-5 h-5\" />\n              Create Your First Project\n            </button>\n          </div>\n\n          {/* Features Preview */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-left\">\n            <div className=\"card p-6\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0\">\n                  <Target className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-2\">\n                    Goal Tracking\n                  </h3>\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                    Set daily word count goals and track your writing streaks\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div className=\"card p-6\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center flex-shrink-0\">\n                  <Zap className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-2\">\n                    Smart Analytics\n                  </h3>\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                    Get insights into your writing patterns and productivity\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"enhanced-dashboard fade-in\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h1 className=\"text-4xl font-bold text-slate-900 dark:text-white\">Dashboard</h1>\n          <div className=\"flex items-center gap-3\">\n            <StatusChip onClick={() => setStorageModalOpen(true)} />\n            <button\n              onClick={openNewProjectDialog}\n              className=\"btn btn-primary\"\n              type=\"button\"\n              data-test=\"new-project\"\n              data-tour-id=\"new-project-button\"\n            >\n              <PlusCircle className=\"w-4 h-4\" />\n              New Project\n            </button>\n          </div>\n        </div>\n        <p className=\"text-base text-slate-600 dark:text-slate-400\">\n          Welcome back! Here's your writing overview and recent activity.\n        </p>\n      </div>\n\n      {/* Storage Health Modal */}\n      {storageModalOpen && (\n        <div\n          role=\"dialog\"\n          aria-modal=\"true\"\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n        >\n          <div\n            className=\"absolute inset-0 bg-black/40 backdrop-blur-sm\"\n            onClick={() => setStorageModalOpen(false)}\n          />\n          <div className=\"relative z-10 w-[680px] max-w-[92vw] rounded-2xl border border-slate-200 bg-white p-6 shadow-2xl dark:border-slate-700 dark:bg-slate-900\">\n            <div className=\"mb-4 flex items-center justify-between\">\n              <h2 className=\"text-2xl font-semibold text-slate-900 dark:text-white\">\n                Storage Health\n              </h2>\n              <button\n                className=\"rounded-lg border border-slate-300 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700\"\n                onClick={() => setStorageModalOpen(false)}\n                aria-label=\"Close storage health modal\"\n              >\n                <X className=\"h-4 w-4\" />\n              </button>\n            </div>\n            <p className=\"mb-6 text-sm text-slate-600 dark:text-slate-400\">\n              Monitor your browser storage status, persistence, and quota usage. Press{' '}\n              <kbd className=\"rounded bg-slate-100 px-1.5 py-0.5 text-xs font-medium dark:bg-slate-800\">\n                Cmd/Ctrl+Shift+S\n              </kbd>{' '}\n              to toggle this panel.\n            </p>\n\n            <StorageHealthWidget />\n          </div>\n        </div>\n      )}\n\n      {/* Current Project Highlight */}\n      {currentProject && (\n        <div className=\"card card-interactive mb-8\" onClick={() => navigateToView(View.Writing)}>\n          <div className=\"card-content\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center flex-shrink-0\">\n                  <InkwellFeather name=\"writing\" size=\"lg\" color=\"primary\" />\n                </div>\n                <div>\n                  <h2 className=\"text-2xl font-semibold text-slate-900 dark:text-white mb-1\">\n                    {currentProject.name}\n                  </h2>\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-2\">\n                    {currentProject.description}\n                  </p>\n                  <div className=\"flex items-center gap-4 text-xs text-slate-500\">\n                    <span>Last updated {getDaysAgo(currentProject.updatedAt)}</span>\n                    <span>‚Ä¢</span>\n                    <span>{getProjectWordCount(currentProject)} words</span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2 text-primary-600 dark:text-primary-400\">\n                <span className=\"text-sm font-medium\">Continue writing</span>\n                <ArrowRight className=\"w-4 h-4\" />\n              </div>\n            </div>\n\n            {/* Project Stats */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-slate-200 dark:border-slate-700\">\n              <div className=\"text-center\">\n                <div className=\"text-xl font-semibold text-slate-900 dark:text-white mb-1\">\n                  {getProjectWordCount(currentProject).toLocaleString()}\n                </div>\n                <div className=\"text-xs text-slate-500\">Total Words</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-xl font-semibold text-slate-900 dark:text-white mb-1\">\n                  {currentProject.chapters?.length || 0}\n                </div>\n                <div className=\"text-xs text-slate-500\">Chapters</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-xl font-semibold text-slate-900 dark:text-white mb-1\">\n                  {currentProject.characters?.length || 0}\n                </div>\n                <div className=\"text-xs text-slate-500\">Characters</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-xl font-semibold text-green-600 dark:text-green-400 mb-1\">\n                  85%\n                </div>\n                <div className=\"text-xs text-slate-500\">Progress</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Quick Actions */}\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-semibold text-slate-900 dark:text-white mb-4\">\n          Quick Actions\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {quickActions.map((action) => {\n            const Icon = action.icon;\n            return (\n              <button\n                key={action.id}\n                onClick={action.action}\n                disabled={action.disabled}\n                className={`card card-interactive text-left p-4 ${\n                  action.disabled ? 'opacity-50 cursor-not-allowed' : ''\n                }`}\n              >\n                <div className=\"flex items-start gap-3 mb-3\">\n                  <div\n                    className={`w-10 h-10 rounded-lg flex items-center justify-center ${action.color}`}\n                  >\n                    <Icon className=\"w-5 h-5\" />\n                  </div>\n                </div>\n                <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-2\">\n                  {action.title}\n                </h3>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">{action.description}</p>\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Recent Projects */}\n      {state.projects.length > 1 && (\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-semibold text-slate-900 dark:text-white\">\n              Recent Projects\n            </h2>\n            <button className=\"btn btn-ghost btn-sm\">View All</button>\n          </div>\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            {state.projects\n              .filter((project) => project.id !== currentProject?.id)\n              .slice(0, 4)\n              .map((project) => (\n                <div\n                  key={project.id}\n                  className=\"card card-interactive\"\n                  onClick={() => setCurrentProjectId(project.id)}\n                >\n                  <div className=\"card-content\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-1 truncate\">\n                          {project.name}\n                        </h3>\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 line-clamp-2\">\n                          {project.description}\n                        </p>\n                      </div>\n                      <div className=\"ml-3 flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center\">\n                          <FileText className=\"w-4 h-4 text-slate-600 dark:text-slate-400\" />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between text-xs text-slate-500\">\n                      <span>{formatDate(project.updatedAt)}</span>\n                      <span>{getProjectWordCount(project)} words</span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n          </div>\n        </div>\n      )}\n\n      {/* Writing Streak & Goals */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"card\">\n          <div className=\"card-content\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center\">\n                <Star className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white\">\n                  Writing Streak\n                </h3>\n                <p className=\"text-xs text-slate-500\">Keep the momentum going!</p>\n              </div>\n            </div>\n            <div className=\"text-center py-4\">\n              <div className=\"text-4xl font-bold text-orange-600 dark:text-orange-400 mb-2\">7</div>\n              <div className=\"text-sm text-slate-600 dark:text-slate-400\">Days in a row</div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-content\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center\">\n                <Target className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white\">\n                  Today's Goal\n                </h3>\n                <p className=\"text-xs text-slate-500\">\n                  {new Date().toLocaleDateString('en-US', {\n                    weekday: 'long',\n                    month: 'short',\n                    day: 'numeric',\n                  })}\n                </p>\n              </div>\n            </div>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-slate-600 dark:text-slate-400\">Progress</span>\n                <span className=\"font-medium text-slate-900 dark:text-white\">\n                  750 / 1,000 words\n                </span>\n              </div>\n              <div className=\"progress\">\n                <div className=\"progress-bar\" style={{ width: '75%' }} />\n              </div>\n              <p className=\"text-xs text-green-600 dark:text-green-400\">250 words to go!</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EnhancedDashboard;\n",
/Users/davehail/Developer/inkwell/eslint-report.json:777:    "filePath": "/Users/davehail/Developer/inkwell/src/components/ExportWizard/ProgressBar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:865:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Layout/Footer.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:876:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Layout/FooterLight.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:887:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:1083:    "source": "/**\n * CompletionChecklist - Progress tracking for onboarding\n *\n * Simplified version that works without TourProvider context.\n * Uses localStorage directly for checklist state.\n */\n\nimport {\n  CheckCircle2,\n  Circle,\n  Trophy,\n  Target,\n  BookOpen,\n  Users,\n  FileText,\n  BarChart3,\n  Sparkles,\n} from 'lucide-react';\nimport React, { useState, useEffect } from 'react';\n\nimport analyticsService from '@/services/analyticsService';\nimport { isTourDone } from '@/tour/persistence';\n\ninterface ChecklistItemConfig {\n  key: string;\n  label: string;\n  description: string;\n  icon: React.ElementType;\n  tourTrigger?: string;\n}\n\nconst CHECKLIST_ITEMS: ChecklistItemConfig[] = [\n  {\n    key: 'createProject',\n    label: 'Create your first project',\n    description: 'Start a new story or choose from our templates',\n    icon: BookOpen,\n    tourTrigger: 'spotlight',\n  },\n  {\n    key: 'addChapter',\n    label: 'Add a chapter',\n    description: 'Structure your story with chapters and scenes',\n    icon: FileText,\n    tourTrigger: 'spotlight',\n  },\n  {\n    key: 'addCharacter',\n    label: 'Create a character',\n    description: 'Develop memorable characters with detailed profiles',\n    icon: Users,\n    tourTrigger: 'spotlight',\n  },\n  {\n    key: 'writeContent',\n    label: 'Write your first 100 words',\n    description: 'Get started with the writing process',\n    icon: Target,\n    tourTrigger: 'spotlight',\n  },\n  {\n    key: 'useTimeline',\n    label: 'Explore the Timeline',\n    description: 'Plan and organize your story structure',\n    icon: BarChart3,\n    tourTrigger: 'spotlight',\n  },\n  {\n    key: 'exportProject',\n    label: 'Export your work',\n    description: 'Share your story in PDF, Word, or other formats',\n    icon: FileText,\n  },\n  {\n    key: 'useAI',\n    label: 'Try the AI assistant',\n    description: 'Get writing suggestions and overcome blocks',\n    icon: Sparkles,\n    tourTrigger: 'spotlight',\n  },\n];\n\ninterface CompletionChecklistProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onStartTour?: (tourType: string) => void;\n}\n\nconst CHECKLIST_KEY = 'inkwell-completion-checklist';\n\nexport const CompletionChecklist: React.FC<CompletionChecklistProps> = ({\n  isOpen,\n  onClose,\n  onStartTour,\n}) => {\n  const [hoveredItem, setHoveredItem] = useState<string | null>(null);\n  const [checklist, setChecklist] = useState<Record<string, boolean>>(() => {\n    try {\n      const saved = localStorage.getItem(CHECKLIST_KEY);\n      return saved ? JSON.parse(saved) : {};\n    } catch {\n      return {};\n    }\n  });\n\n  // Persist checklist to localStorage\n  useEffect(() => {\n    try {\n      localStorage.setItem(CHECKLIST_KEY, JSON.stringify(checklist));\n    } catch (error) {\n      console.warn('Failed to save checklist:', error);\n    }\n  }, [checklist]);\n\n  if (!isOpen) return null;\n\n  const completedCount = Object.values(checklist).filter(Boolean).length;\n  const totalCount = CHECKLIST_ITEMS.length;\n  const progressPercentage = (completedCount / totalCount) * 100;\n\n  const canShowTour = (tourId: string) => {\n    // Can show tour if it hasn't been completed yet\n    return !isTourDone(tourId);\n  };\n\n  const handleItemClick = (item: ChecklistItemConfig) => {\n    if (item.tourTrigger && canShowTour(item.tourTrigger)) {\n      try {\n        analyticsService.trackEvent('checklist_tour_requested', {\n          tourType: item.tourTrigger,\n          item: item.key,\n        });\n      } catch {}\n\n      onStartTour?.(item.tourTrigger);\n      onClose();\n    }\n  };\n\n  const getItemStyle = (item: ChecklistItemConfig) => {\n    const isCompleted = checklist[item.key] || false;\n    const canStartTour = item.tourTrigger && canShowTour(item.tourTrigger);\n\n    return {\n      opacity: isCompleted ? 0.7 : 1,\n      cursor: canStartTour ? 'pointer' : 'default',\n      background:\n        hoveredItem === item.key && canStartTour ? 'rgba(59, 130, 246, 0.05)' : 'transparent',\n    };\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\">\n      <div className=\"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-slate-200 dark:border-slate-700\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\n                <Trophy className=\"w-5 h-5 text-white\" />\n              </div>\n              <div>\n                <h2 className=\"text-xl font-semibold text-slate-900 dark:text-white\">\n                  Getting Started\n                </h2>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  Complete these steps to master Inkwell\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors\"\n              aria-label=\"Close checklist\"\n            >\n              ‚úï\n            </button>\n          </div>\n\n          {/* Progress bar */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-slate-600 dark:text-slate-400\">Progress</span>\n              <span className=\"font-medium text-slate-900 dark:text-white\">\n                {completedCount} of {totalCount}\n              </span>\n            </div>\n            <div className=\"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 overflow-hidden\">\n              <div\n                className=\"h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500 ease-out rounded-full\"\n                style={{ width: `${progressPercentage}%` }}\n              />\n            </div>\n            {completedCount === totalCount && (\n              <div className=\"text-center py-2\">\n                <span className=\"text-sm font-medium text-green-600 dark:text-green-400\">\n                  üéâ Congratulations! You've mastered the basics!\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Checklist items */}\n        <div className=\"p-4 max-h-96 overflow-y-auto\">\n          <div className=\"space-y-2\">\n            {CHECKLIST_ITEMS.map((item) => {\n              const Icon = item.icon;\n              const isCompleted = checklist[item.key] || false;\n              const canStartTour = item.tourTrigger && canShowTour(item.tourTrigger);\n\n              return (\n                <div\n                  key={item.key}\n                  className={`p-3 rounded-lg border transition-all duration-200 ${\n                    isCompleted\n                      ? 'border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20'\n                      : canStartTour\n                        ? 'border-blue-200 dark:border-blue-700 hover:border-blue-300 dark:hover:border-blue-600'\n                        : 'border-slate-200 dark:border-slate-700'\n                  }`}\n                  style={getItemStyle(item)}\n                  onClick={() => handleItemClick(item)}\n                  onMouseEnter={() => setHoveredItem(item.key)}\n                  onMouseLeave={() => setHoveredItem(null)}\n                  role={canStartTour ? 'button' : 'listitem'}\n                  tabIndex={canStartTour ? 0 : undefined}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      handleItemClick(item);\n                    }\n                  }}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {/* Checkbox */}\n                    <div className=\"flex-shrink-0 pt-0.5\">\n                      {isCompleted ? (\n                        <CheckCircle2 className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                      ) : (\n                        <Circle className=\"w-5 h-5 text-slate-400 dark:text-slate-500\" />\n                      )}\n                    </div>\n\n                    {/* Icon */}\n                    <div\n                      className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${\n                        isCompleted\n                          ? 'bg-green-100 dark:bg-green-900/30'\n                          : 'bg-slate-100 dark:bg-slate-700'\n                      }`}\n                    >\n                      <Icon\n                        className={`w-4 h-4 ${\n                          isCompleted\n                            ? 'text-green-600 dark:text-green-400'\n                            : 'text-slate-600 dark:text-slate-400'\n                        }`}\n                      />\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"flex-1 min-w-0\">\n                      <h3\n                        className={`font-medium text-sm ${\n                          isCompleted\n                            ? 'text-green-900 dark:text-green-100 line-through'\n                            : 'text-slate-900 dark:text-white'\n                        }`}\n                      >\n                        {item.label}\n                      </h3>\n                      <p\n                        className={`text-xs mt-1 ${\n                          isCompleted\n                            ? 'text-green-700 dark:text-green-300'\n                            : 'text-slate-600 dark:text-slate-400'\n                        }`}\n                      >\n                        {item.description}\n                      </p>\n\n                      {/* Tour availability hint */}\n                      {!isCompleted && canStartTour && (\n                        <div className=\"mt-2\">\n                          <span className=\"inline-flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded-full\">\n                            <Target className=\"w-3 h-3\" />\n                            Click for quick tour\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-4 border-t border-slate-200 dark:border-slate-700\">\n          <div className=\"text-xs text-slate-500 dark:text-slate-400 text-center\">\n            Click on incomplete items to get guided tours and tips\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport { CompletionChecklist as default, CompletionChecklist as CompletionChecklistComponent };\n",
/Users/davehail/Developer/inkwell/eslint-report.json:1195:    "source": "// src/components/Onboarding/WelcomeModal.tsx\nimport { Clock, X, ArrowRight, CheckCircle, Lightbulb } from 'lucide-react';\nimport React, { useState } from 'react';\n\n// IMPORTANT: import from the barrel so tests that mock \"@/components/icons\" work\nimport { InkwellFeather } from '@/components/icons';\nimport { useOnboardingGate } from '@/hooks/useOnboardingGate';\nimport { featureFlagService } from '@/services/featureFlagService';\nimport { startDefaultTour } from '@/tour/tourEntry';\n\nimport { CORE_TOUR_STEPS } from './tourRegistry';\nimport { useTour } from './useTour';\nimport { startTourSafely, getSafeTourSteps } from './utils/tourSafety';\n\ninterface WelcomeModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onStartTour: (tourType: string) => void;\n  onOpenChecklist: () => void;\n}\n\n// Removed duplicate import\n\nexport const WelcomeModal: React.FC<WelcomeModalProps> = ({\n  isOpen,\n  onClose,\n  onStartTour,\n  onOpenChecklist,\n}) => {\n  const { setNeverShowAgain, setRemindMeLater, logAnalytics, preferences, startTour } = useTour();\n  const { setTourActive, snoozeModal, dismissModal } = useOnboardingGate();\n  const [selectedOption, setSelectedOption] = useState<'tour' | 'checklist' | 'later' | 'never'>(\n    'tour',\n  );\n\n  if (!isOpen || !featureFlagService.isEnabled('tour_simpleTour')) return null;\n\n  const handleStartTour = async () => {\n    logAnalytics('welcome_modal_start_tour');\n\n    // 1. Store hide preference\n    try {\n      localStorage.setItem('hideWelcome', 'true');\n    } catch {\n      // ignore storage errors in tests/SSR\n    }\n\n    // 2. Prevent modal re-opening during tour\n    setTourActive(true);\n\n    // 3. Snooze modal for 7 days (will be set to completed when tour finishes)\n    snoozeModal(7 * 24); // 7 days\n\n    // 4. Close modal first to release focus trap\n    onClose();\n\n    // 5. Start tour safely on next frame so modal is fully unmounted\n    requestAnimationFrame(async () => {\n      try {\n        const safeTourSteps = getSafeTourSteps(CORE_TOUR_STEPS?.length ? CORE_TOUR_STEPS : []);\n        if (safeTourSteps.length > 0) {\n          await startTourSafely(safeTourSteps, startTour);\n        } else {\n          // Fallback to default tour if no steps\n          startDefaultTour();\n        }\n\n        // Watchdog: if no overlay after 400ms, hard-start the default tour\n        setTimeout(() => {\n          const overlay = document.querySelector('[data-spotlight-overlay],[data-tour-overlay]');\n          if (!overlay) {\n            console.warn('Tour watchdog: overlay not detected, starting default tour directly');\n            startDefaultTour();\n          }\n        }, 400);\n      } catch (error) {\n        console.error('Failed to start tour:', error);\n        // Fallback to the original method if safe start fails\n        startDefaultTour();\n      }\n    });\n  };\n\n  const handleOpenChecklist = () => {\n    logAnalytics('welcome_modal_open_checklist');\n    onOpenChecklist();\n    onClose();\n  };\n\n  const handleRemindLater = () => {\n    logAnalytics('welcome_modal_remind_later');\n    setRemindMeLater(true); // Remind later\n    snoozeModal(24); // Also update gate\n    onClose();\n  };\n\n  const handleNeverShow = () => {\n    logAnalytics('welcome_modal_never_show');\n    setNeverShowAgain(true);\n    dismissModal(); // Also update gate\n    onClose();\n  };\n\n  const tourDuration = Math.ceil((CORE_TOUR_STEPS.length * 10) / 60); // ~10s per step\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\">\n      <div className=\"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-300\">\n        {/* Header */}\n        <div className=\"relative p-6 bg-gradient-to-br from-blue-500 to-purple-600 text-white\">\n          <button\n            onClick={onClose}\n            className=\"absolute top-4 right-4 text-white/80 hover:text-white transition-colors\"\n            aria-label=\"Close welcome modal\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n\n          <div className=\"flex items-center gap-4 mb-4\">\n            <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm\">\n              <InkwellFeather name=\"writing\" size=\"lg\" className=\"text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold\">Welcome to Inkwell!</h1>\n              <p className=\"text-white/90 text-sm\">Your professional writing companion</p>\n            </div>\n          </div>\n\n          <p className=\"text-white/90 leading-relaxed\">\n            Ready to start writing your next great story? Let us show you around so you can jump in\n            with confidence and focus on what matters most‚Äîyour words.\n          </p>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-4\">\n          {/* Tour Option */}\n          <div\n            className={`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${\n              selectedOption === 'tour'\n                ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                : 'border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600'\n            }`}\n            onClick={() => setSelectedOption('tour')}\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"flex-shrink-0 mt-1\">\n                <div\n                  className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${\n                    selectedOption === 'tour'\n                      ? 'border-blue-500 bg-blue-500'\n                      : 'border-slate-300 dark:border-slate-600'\n                  }`}\n                >\n                  {selectedOption === 'tour' && <div className=\"w-2 h-2 bg-white rounded-full\" />}\n                </div>\n              </div>\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <h3 className=\"font-semibold text-slate-900 dark:text-white\">\n                    Start the Quick Tour\n                  </h3>\n                  <span className=\"inline-flex items-center gap-1 text-xs text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-full\">\n                    <Clock className=\"w-3 h-3\" />~{tourDuration} min\n                  </span>\n                </div>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  Interactive walkthrough of the essential features. Perfect for getting started\n                  right away.\n                </p>\n                <div className=\"mt-2 flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400\">\n                  <span>‚úì Create your first project</span>\n                  <span>‚úì Learn the interface</span>\n                  <span>‚úì Start writing</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Checklist Option */}\n          <div\n            className={`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${\n              selectedOption === 'checklist'\n                ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                : 'border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600'\n            }`}\n            onClick={() => setSelectedOption('checklist')}\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"flex-shrink-0 mt-1\">\n                <div\n                  className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${\n                    selectedOption === 'checklist'\n                      ? 'border-blue-500 bg-blue-500'\n                      : 'border-slate-300 dark:border-slate-600'\n                  }`}\n                >\n                  {selectedOption === 'checklist' && (\n                    <div className=\"w-2 h-2 bg-white rounded-full\" />\n                  )}\n                </div>\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold text-slate-900 dark:text-white mb-1\">\n                  Explore at Your Own Pace\n                </h3>\n                <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n                  Get a checklist of key features to discover when you're ready. Learn as you go.\n                </p>\n                <div className=\"mt-2 flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400\">\n                  <span>‚úì Self-guided learning</span>\n                  <span>‚úì Mini-tours available</span>\n                  <span>‚úì Track progress</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Later Option */}\n          <div\n            className={`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${\n              selectedOption === 'later'\n                ? 'border-slate-400 bg-slate-50 dark:bg-slate-700/50'\n                : 'border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600'\n            }`}\n            onClick={() => setSelectedOption('later')}\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex-shrink-0\">\n                <div\n                  className={`w-4 h-4 rounded-full border-2 flex items-center justify-center ${\n                    selectedOption === 'later'\n                      ? 'border-slate-400 bg-slate-400'\n                      : 'border-slate-300 dark:border-slate-600'\n                  }`}\n                >\n                  {selectedOption === 'later' && (\n                    <div className=\"w-1.5 h-1.5 bg-white rounded-full\" />\n                  )}\n                </div>\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\n                  Remind me tomorrow\n                </h3>\n              </div>\n            </div>\n          </div>\n\n          {/* Never Option */}\n          <div\n            className={`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${\n              selectedOption === 'never'\n                ? 'border-slate-400 bg-slate-50 dark:bg-slate-700/50'\n                : 'border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600'\n            }`}\n            onClick={() => setSelectedOption('never')}\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex-shrink-0\">\n                <div\n                  className={`w-4 h-4 rounded-full border-2 flex items-center justify-center ${\n                    selectedOption === 'never'\n                      ? 'border-slate-400 bg-slate-400'\n                      : 'border-slate-300 dark:border-slate-600'\n                  }`}\n                >\n                  {selectedOption === 'never' && (\n                    <div className=\"w-1.5 h-1.5 bg-white rounded-full\" />\n                  )}\n                </div>\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\n                  Don't show this again\n                </h3>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-6 pb-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-xs text-slate-500 dark:text-slate-400\">\n              You can always access tours from the Help menu\n            </div>\n            <div className=\"flex items-center gap-3\">\n              {selectedOption === 'tour' && (\n                <button\n                  onClick={handleStartTour}\n                  className=\"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-medium\"\n                >\n                  Start Tour\n                  <ArrowRight className=\"w-4 h-4\" />\n                </button>\n              )}\n\n              {selectedOption === 'checklist' && (\n                <button\n                  onClick={handleOpenChecklist}\n                  className=\"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-medium\"\n                >\n                  View Checklist\n                  <CheckCircle className=\"w-4 h-4\" />\n                </button>\n              )}\n\n              {selectedOption === 'later' && (\n                <button\n                  onClick={handleRemindLater}\n                  className=\"inline-flex items-center gap-2 bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg transition-colors font-medium\"\n                >\n                  Remind Tomorrow\n                  <Clock className=\"w-4 h-4\" />\n                </button>\n              )}\n\n              {selectedOption === 'never' && (\n                <button\n                  onClick={handleNeverShow}\n                  className=\"inline-flex items-center gap-2 bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg transition-colors font-medium\"\n                >\n                  Got It\n                  <X className=\"w-4 h-4\" />\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Prior dismissals note */}\n        {preferences && preferences.tourDismissals > 0 && (\n          <div className=\"px-6 pb-2\">\n            <div className=\"flex items-center gap-2 text-xs text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 px-3 py-2 rounded-lg\">\n              <Lightbulb className=\"w-3 h-3\" />\n              We notice you've skipped the tour before. Taking it now can save you time later!\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default WelcomeModal;\n",
/Users/davehail/Developer/inkwell/eslint-report.json:1780:    "source": "// src/components/Panels/AnalysisPanel.tsx - Upgraded Version\nimport { BarChart3, TrendingUp, Clock, Target, BookOpen, FileText } from 'lucide-react';\nimport React, { useEffect, useState } from 'react';\n\nimport WritingAnalyticsView from '@/components/Analytics/WritingAnalyticsView';\nimport { useAppContext } from '@/context/AppContext';\nimport TourCompletionCard from '@/features/analytics/components/TourCompletionCard';\nimport { useProjectAnalytics } from '@/hooks/useProjectAnalytics';\nimport { triggerAnalyticsVisited } from '@/utils/tourTriggers';\n\ninterface WritingSession {\n  date: string;\n  wordCount: number;\n  duration?: number;\n}\n\nconst AnalyticsPanel: React.FC = () => {\n  const { state, currentProject } = useAppContext();\n  const [viewMode, setViewMode] = useState<'simple' | 'advanced'>('advanced');\n\n  // Get comprehensive analytics with chapter integration\n  const analytics = useProjectAnalytics(currentProject?.id ?? state.currentProjectId ?? '');\n\n  // Fire tour trigger on component mount\n  useEffect(() => {\n    triggerAnalyticsVisited();\n  }, []);\n\n  // If we have a current project with enhanced analytics, use the advanced view\n  const hasEnhancedAnalytics = currentProject && 'sessions' in currentProject;\n\n  // Simple Analytics View (enhanced with chapter integration)\n  const SimpleAnalyticsView = () => {\n    const { totals, chapters, notice } = analytics;\n\n    const sortedSessions = [...analytics.sessions].sort(\n      (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime(),\n    );\n\n    return (\n      <div data-tour=\"analytics-panel-root\" className=\"p-6 space-y-6\">\n        {/* Header with View Toggle */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Writing Analytics</h1>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n              Project: {currentProject?.name ?? state.currentProjectId ?? 'None selected'}\n            </p>\n          </div>\n\n          {hasEnhancedAnalytics && (\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={() => setViewMode('simple')}\n                className={`px-3 py-1 text-sm rounded-md transition-colors ${\n                  viewMode === 'simple'\n                    ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300'\n                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n                }`}\n              >\n                Simple\n              </button>\n              <button\n                onClick={() => setViewMode('advanced')}\n                className={`px-3 py-1 text-sm rounded-md transition-colors ${\n                  viewMode === 'advanced'\n                    ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300'\n                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n                }`}\n              >\n                Advanced\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Notice about data source */}\n        {notice && (\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <BarChart3 className=\"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0\" />\n              <div>\n                <div className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">{notice}</div>\n                <div className=\"text-xs text-blue-700 dark:text-blue-300 mt-1\">\n                  Start typing to record writing sessions automatically.\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Quick Stats */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md border border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg\">\n                <BarChart3 className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n              </div>\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">Total Words</div>\n            </div>\n            <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              {totals.totalWords.toLocaleString()}\n            </div>\n          </div>\n\n          <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md border border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-green-100 dark:bg-green-900 rounded-lg\">\n                <Clock className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n              </div>\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">Writing Days</div>\n            </div>\n            <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              {totals.daysWithWriting}\n            </div>\n          </div>\n\n          <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md border border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg\">\n                <Target className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\n              </div>\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">Daily Average</div>\n            </div>\n            <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              {totals.dailyAvg.toLocaleString()}\n            </div>\n          </div>\n\n          <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md border border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg\">\n                <TrendingUp className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\n              </div>\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">Streak</div>\n            </div>\n            <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              {totals.streak} day{totals.streak !== 1 ? 's' : ''}\n            </div>\n          </div>\n\n          {/* Tour Completion Card */}\n          <TourCompletionCard />\n        </div>\n\n        {/* Chapter Stats Section */}\n        <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Chapter Statistics\n          </h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg\">\n                <BookOpen className=\"w-5 h-5 text-indigo-600 dark:text-indigo-400\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Chapters</div>\n                <div className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  {chapters.chapterCount}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg\">\n                <FileText className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Manuscript Words</div>\n                <div className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  {chapters.chapterWords.toLocaleString()}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-teal-100 dark:bg-teal-900 rounded-lg\">\n                <Target className=\"w-5 h-5 text-teal-600 dark:text-teal-400\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Avg Words/Chapter</div>\n                <div className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  {chapters.avgWordsPerChapter.toLocaleString()}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg\">\n                <TrendingUp className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">Longest Chapter</div>\n                <div className=\"text-sm font-semibold text-gray-900 dark:text-white truncate max-w-[120px]\">\n                  {chapters.longestChapter?.title ?? '‚Äî'}\n                </div>\n                {chapters.longestChapter && (\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    {chapters.longestChapter.wordCount.toLocaleString()} words\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Sessions */}\n        <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Recent Sessions</h2>\n            {hasEnhancedAnalytics && (\n              <button\n                onClick={() => setViewMode('advanced')}\n                className=\"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium\"\n              >\n                View Advanced Analytics ‚Üí\n              </button>\n            )}\n          </div>\n\n          {sortedSessions.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <BarChart3 className=\"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-3\" />\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                No writing sessions recorded yet.\n              </div>\n              <div className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                Start writing to see your analytics!\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {sortedSessions\n                .slice(-10)\n                .reverse()\n                .map((session, index) => (\n                  <div\n                    key={`${session.date}-${index}`}\n                    className=\"flex justify-between items-center px-4 py-3 bg-gray-50 dark:bg-gray-700 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                  >\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {new Date(session.date).toLocaleDateString('en-US', {\n                          weekday: 'short',\n                          month: 'short',\n                          day: 'numeric',\n                        })}\n                      </span>\n                      {session.duration && (\n                        <span className=\"text-xs text-gray-500 dark:text-gray-400 ml-2\">\n                          {session.duration}m\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                        {session.wordCount} words\n                      </span>\n                      {session.wordCount > totals.dailyAvg && totals.dailyAvg > 0 && (\n                        <TrendingUp className=\"w-4 h-4 text-green-500\" />\n                      )}\n                    </div>\n                  </div>\n                ))}\n            </div>\n          )}\n        </div>\n\n        {/* Upgrade Notice */}\n        {!hasEnhancedAnalytics && (\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <TrendingUp className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n              <div>\n                <div className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n                  Enhanced Analytics Available\n                </div>\n                <div className=\"text-xs text-blue-700 dark:text-blue-300 mt-1\">\n                  Create a new project to access advanced analytics with charts, progress tracking,\n                  and detailed insights.\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Render based on mode and available data\n  if (viewMode === 'advanced' && hasEnhancedAnalytics) {\n    return <WritingAnalyticsView />;\n  }\n\n  return <SimpleAnalyticsView />;\n};\n\nexport default AnalyticsPanel;\n",
/Users/davehail/Developer/inkwell/eslint-report.json:2461:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Search/SearchBar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:2605:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:2616:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:2715:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Topbar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:2775:    "filePath": "/Users/davehail/Developer/inkwell/src/components/TopbarBell.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:2852:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Writing/Chapters/ChapterSidebar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:2885:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:2896:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbarTypes.ts",
/Users/davehail/Developer/inkwell/eslint-report.json:2907:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedAIWritingToolbar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:3105:    "filePath": "/Users/davehail/Developer/inkwell/src/components/Writing/WritingToolbar.tsx",
/Users/davehail/Developer/inkwell/eslint-report.json:4115:    "source": "import { PRINT_CSS } from '../styles/printCss';\n\ninterface Scorecard {\n  structure: number;\n  pacing: number;\n  scenePurpose: number;\n  coverage: number;\n  grade: string;\n}\ninterface Insight {\n  finding: string;\n  suggestion: string;\n  affectedChapters: number[];\n}\n\nexport function renderAnalysisSummaryHTML(input: {\n  title: string;\n  author?: string;\n  scorecard?: Scorecard;\n  insights: Insight[];\n  pacingSVG?: string; // data URL (optional)\n  arcsSVG?: string; // data URL (optional)\n}) {\n  const title = escapeHtml(input.title || 'Analysis Summary');\n  const author = input.author ? ` ‚Äî ${escapeHtml(input.author)}` : '';\n\n  const sc = input.scorecard;\n  const scoreRow = sc\n    ? `\n      <tr><th>Structure</th><td>${sc.structure}</td></tr>\n      <tr><th>Pacing</th><td>${sc.pacing}</td></tr>\n      <tr><th>Scene Purpose</th><td>${sc.scenePurpose}</td></tr>\n      <tr><th>Coverage</th><td>${sc.coverage}</td></tr>\n    `\n    : `<tr><td colspan=\"2\">Scorecard unavailable</td></tr>`;\n\n  const gradeBadge = sc\n    ? `<span class=\"badge grade-${gradeClass(sc.grade)}\">Grade ${escapeHtml(sc.grade)}</span>`\n    : '';\n\n  const insights = (input.insights || [])\n    .slice(0, 5)\n    .map(\n      (ins, idx) => `\n    <li class=\"avoid-break\">\n      <strong>${escapeHtml(ins.finding)}</strong>\n      <div>${escapeHtml(ins.suggestion)}</div>\n      ${ins.affectedChapters?.length ? `<div>Chapters: ${ins.affectedChapters.join(', ')}</div>` : ''}\n    </li>\n  `,\n    )\n    .join('');\n\n  const pacingImg = input.pacingSVG\n    ? `<img alt=\"Pacing chart\" src=\"${input.pacingSVG}\" style=\"max-width:100%; height:auto;\" />`\n    : '';\n  const arcsImg = input.arcsSVG\n    ? `<img alt=\"Arc heatmap\" src=\"${input.arcsSVG}\" style=\"max-width:100%; height:auto;\" />`\n    : '';\n\n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\" />\n  <title>${title} ‚Äî Analysis</title>\n  <style>${PRINT_CSS}</style>\n  <style>\n    .cols { display: grid; grid-template-columns: 1fr 1fr; gap: 16pt; }\n    .card { padding: 10pt 0; }\n    .charts { display: grid; grid-template-columns: 1fr 1fr; gap: 12pt; }\n    @media print { .cols { grid-template-columns: 1fr 1fr; } }\n  </style>\n</head>\n<body>\n  <div class=\"header\">${title}${author}</div>\n  <div class=\"footer\">Page <span class=\"pnum\"></span></div>\n\n  <section class=\"avoid-break\">\n    <h1>Analysis Summary</h1>\n    ${gradeBadge}\n  </section>\n\n  <section class=\"cols\">\n    <div class=\"card\">\n      <h2>Scorecard</h2>\n      <table class=\"table\">\n        <tbody>\n          ${scoreRow}\n        </tbody>\n      </table>\n    </div>\n    <div class=\"card\">\n      <h2>Top Insights</h2>\n      <ol style=\"margin:0; padding-left:16pt;\">\n        ${insights || '<li>No insights available</li>'}\n      </ol>\n    </div>\n  </section>\n\n  <section class=\"charts page-break avoid-break\">\n    <div>\n      <h2>Pacing</h2>\n      ${pacingImg || '<div>Chart unavailable</div>'}\n    </div>\n    <div>\n      <h2>Arcs</h2>\n      ${arcsImg || '<div>Chart unavailable</div>'}\n    </div>\n  </section>\n</body>\n</html>\n`;\n}\n\nfunction gradeClass(g: string) {\n  const s = (g || '').toUpperCase();\n  return s === 'A' ? 'A' : s === 'B' ? 'B' : s === 'C' ? 'C' : s === 'D' ? 'D' : 'F';\n}\nfunction escapeHtml(s: string) {\n  return s.replace(\n    /[&<>\"']/g,\n    (m) =>\n      ({\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#039;',\n      })[m]!,\n  );\n}\n",
/Users/davehail/Developer/inkwell/PHASE_3_COMPLETION_SUMMARY.md:119:  source?: string;        // 'settings' | 'footer' | 'cta'
/Users/davehail/Developer/inkwell/TOUR_OVERLAY_CLICK_BLOCKING_FIX.md:153:4. Click "+ New Project" in sidebar ‚Üí Dialog should open
/Users/davehail/Developer/inkwell/TOUR_OVERLAY_CLICK_BLOCKING_FIX.md:187:- Header/Sidebar: 50
/Users/davehail/Developer/inkwell/docs/TOUR_PITFALLS_GUIDE.md:409:  target: '[data-tour-id="sidebar"]',
/Users/davehail/Developer/inkwell/docs/TOUR_PITFALLS_GUIDE.md:430:  target: '[data-tour-id="footer-links"]',
/Users/davehail/Developer/inkwell/docs/TOUR_PITFALLS_GUIDE.md:431:  title: 'Footer Navigation',
/Users/davehail/Developer/inkwell/docs/TOUR_PITFALLS_GUIDE.md:433:    const element = document.querySelector('[data-tour-id="footer-links"]');
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_MVP_SUMMARY.md:38:#### Chapter Sidebar
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_MVP_SUMMARY.md:40:- **`src/components/Writing/Chapters/ChapterSidebar.tsx`**
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_MVP_SUMMARY.md:48:  - Individual chapter item in sidebar
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_MVP_SUMMARY.md:63:  - Integrated writing panel with chapter sidebar
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_MVP_SUMMARY.md:98:- Displayed in sidebar and toolbar
/Users/davehail/Developer/inkwell/CHAPTER_MANAGEMENT_MVP_SUMMARY.md:185:- [ ] Rename title ‚Üí reflects in sidebar + persists
/Users/davehail/Developer/inkwell/CREATE_PROJECT_BUTTON_FIX_SUMMARY.md:41:  sidebarCollapsed: false,
/Users/davehail/Developer/inkwell/CREATE_PROJECT_BUTTON_FIX_SUMMARY.md:42:  toggleSidebar: () => undefined, // ‚ùå No-op
/Users/davehail/Developer/inkwell/scripts/verify-tour-attributes.js:20:    'sidebar': { location: 'Navigation sidebar', tour: 'Core' },
/Users/davehail/Developer/inkwell/scripts/verify-tour-attributes.js:21:    'topbar': { location: 'Top header bar', tour: 'Core' },
/Users/davehail/Developer/inkwell/scripts/verify-tour-attributes.js:24:    'export-open': { location: 'Export button in topbar', tour: 'Export' },
/Users/davehail/Developer/inkwell/docs/WORLD_BUILDING_QUICK_START.md:10:2. Navigate to **Story Planning** (book icon in sidebar)
/Users/davehail/Developer/inkwell/docs/dev/onboarding.md:172:function SidebarWithChecklist() {
/Users/davehail/Developer/inkwell/docs/dev/onboarding.md:174:    <div className="sidebar">
/Users/davehail/Developer/inkwell/docs/dev/onboarding.md:350:        element: '.editor-toolbar',
/Users/davehail/Developer/inkwell/docs/dev/onboarding.md:388:      <WritingToolbar data-tour="toolbar" />
/Users/davehail/Developer/inkwell/src/services/__tests__/offlineStorageManager.test.ts:76:      // Setup mock data
/Users/davehail/Developer/inkwell/docs/TOUR_INDEX.md:122:- `sidebar` - Navigation sidebar
/Users/davehail/Developer/inkwell/docs/TOUR_INDEX.md:123:- `topbar` - Top navigation bar
/Users/davehail/Developer/inkwell/scripts/cleanup-docs-all.sh:85:summaries=( IMPLEMENTATION_COMPLETE.md IMPLEMENTATION_SUMMARY.md AUTH_FIX_SUMMARY.md BRAND_FIX_COMPLETE.md CHAPTER_MVP_COMPLETE.md CHARACTER_ANALYTICS_FIX.md FOOTER_BRAND_UPDATE_SUMMARY.md ICON_REPLACEMENT_SUMMARY.md INDEXEDDB_POLYFILL_COMPLETE.md INDEXEDDB_POLYFILL_SUCCESS.md ONBOARDING_CONSOLIDATION_SUMMARY.md ONBOARDING_GATE_FIX_SUMMARY.md PASSWORD_RESET_COMPLETE.md PROFILE_REMOVAL_COMPLETE.md SIDEBAR_FIX_SUMMARY.md BRANDING_UI_FIXES_COMPLETE.md COMPLETE_TEST_SUMMARY.md FINAL_TEST_SUMMARY.md TEST_COVERAGE_IMPROVEMENT_COMPLETE.md TEST_FIXES_COMPLETE.md TEST_FIX_QUICK_WIN_COMPLETE.md TEST_FIX_SUMMARY.md TEST_SUITE_IMPROVEMENT_SUMMARY.md TOUR_VERIFICATION_COMPLETE.md SPOTLIGHT_TOUR_FINAL_INTEGRATION.md SPOTLIGHT_TOUR_PHASE2_COMPLETE.md SPOTLIGHT_TOUR_PHASE2_INTEGRATION_COMPLETE.md ARCHIVE_ACTIVATION_SUMMARY.md FIX_SUMMARY.md PRODUCTION_POLISH_FIXES.md CHAPTER_MANAGEMENT_IMPLEMENTATION.md CHAPTER_MANAGEMENT_MVP_SUMMARY.md PROJECT_NAMING_IMPLEMENTATION.md QUICK_WINS_IMPLEMENTATION.md TOUR_BOOT_TIMING_FIX.md TOUR_DATA_ATTRIBUTES_IMPLEMENTATION.md TOUR_IMPLEMENTATION_SUMMARY.md WORLD_BUILDING_IMPLEMENTATION.md DOCS_UPDATE_OCT_2025.md COVERAGE_IMPROVEMENT_PLAN.md TEST_IMPLEMENTATION_PROGRESS.md TEST_OPTIMIZATION_COMPLETE.md TEST_PRUNING_ANALYSIS.md TEST_PRUNING_RECOMMENDATIONS.md README_TEST_OPTIMIZATION.md REMAINING_FEATURES.md NEXT_STEPS.md SESSION_SUMMARY_2025-10-27.md BRAND_COLORS_REFERENCE.md BRAND_DEPLOYMENT_GUIDE.md BRAND_INCONSISTENCY_REPORT.md CHANGELOG-AI-PLOT-ANALYSIS.md ARCHITECTURE_IMPLEMENTATION.md INTEGRATION_GUIDE.md TEST_FIX_PHASE2_SUMMARY.md TEST_FIXES_NEEDED.md TEST_SUMMARY.md TOUR_GUARDRAILS_COMPLETE.md QUICK_WINS_REFERENCE.md GO_DECISION.md )
/Users/davehail/Developer/inkwell/docs/dev/ai-services.md:253:  ai_enhanced_toolbar: true,     // Advanced AI tools
/Users/davehail/Developer/inkwell/docs/dev/ai-services.md:326:### AI Writing Toolbar
/Users/davehail/Developer/inkwell/docs/dev/ai-services.md:328:**Location**: `src/components/Writing/EnhancedAIWritingToolbar.tsx`
/Users/davehail/Developer/inkwell/docs/dev/ai-services.md:333:function AIToolbar() {
/Users/davehail/Developer/inkwell/docs/dev/ai-services.md:342:    <div className="ai-toolbar">
/Users/davehail/Developer/inkwell/docs/TOUR_DATA_ATTRIBUTES.md:20:| `sidebar`          | Navigation sidebar          | Navigation explanation   |
/Users/davehail/Developer/inkwell/docs/TOUR_DATA_ATTRIBUTES.md:21:| `topbar`           | Top header bar              | Quick actions overview   |
/Users/davehail/Developer/inkwell/docs/TOUR_DATA_ATTRIBUTES.md:67:| `export-open`     | Export button in topbar | Opens export modal                |
/Users/davehail/Developer/inkwell/docs/TOUR_DATA_ATTRIBUTES.md:74:// Topbar Export Button
/Users/davehail/Developer/inkwell/docs/TOUR_QUICK_REFERENCE.md:84:- `[data-tour-id="sidebar"]` - Navigation
/Users/davehail/Developer/inkwell/docs/TOUR_QUICK_REFERENCE.md:85:- `[data-tour-id="topbar"]` - Top bar
/Users/davehail/Developer/inkwell/src/types/ui.ts:44:  sidebarCollapsed: boolean;
/Users/davehail/Developer/inkwell/src/types/ui.ts:52:  toggleSidebar: () => void;
/Users/davehail/Developer/inkwell/src/test-utils/component-mocks.tsx:83:  sidebarCollapsed: false,
/Users/davehail/Developer/inkwell/src/test-utils/component-mocks.tsx:84:  toggleSidebar: vi.fn(),
/Users/davehail/Developer/inkwell/MUTATION_OBSERVER_FIX.md:205:observer.observe(document.querySelector('#foo'), options); // ‚ùå Risky!
/Users/davehail/Developer/inkwell/ICON_REPLACEMENT_SUMMARY.md:27:2. **Sidebar.tsx**
/Users/davehail/Developer/inkwell/ICON_REPLACEMENT_SUMMARY.md:34:   - Replaced BookOpen in sidebar logo
/Users/davehail/Developer/inkwell/ICON_REPLACEMENT_SUMMARY.md:100:- `src/components/Sidebar.tsx`
/Users/davehail/Developer/inkwell/scripts/prefix-unused-params.ts:9:    // function foo(arg, unused) ‚Üí function foo(arg, _unused)
/Users/davehail/Developer/inkwell/scripts/prefix-unused-params.ts:11:    // const foo = (unused) => ‚Ä¶  OR  (a, unused: T) => ‚Ä¶
/Users/davehail/Developer/inkwell/PERSISTENCE_LAYER_READY.md:81:src/components/Layout/MainLayout.tsx    # Added status indicator to footer
/Users/davehail/Developer/inkwell/PERSISTENCE_LAYER_READY.md:96:- Storage status badge in footer (Persisted ‚úì / Temporary ‚ö†)
/Users/davehail/Developer/inkwell/PERSISTENCE_LAYER_READY.md:145:- StorageStatusIndicator: Footer badge with health details
/Users/davehail/Developer/inkwell/PERSISTENCE_LAYER_READY.md:192:2. ‚úÖ Footer shows storage badge
/Users/davehail/Developer/inkwell/scripts/cleanup-docs.sh:44:mv --backup=numbered FOOTER_BRAND_UPDATE_SUMMARY.md .archive/implementations/ 2>/dev/null || true
/Users/davehail/Developer/inkwell/scripts/cleanup-docs.sh:75:mv --backup=numbered SIDEBAR_FIX_SUMMARY.md .archive/implementations/ 2>/dev/null || true
/Users/davehail/Developer/inkwell/src/App.css:18:  /* Sidebar */
/Users/davehail/Developer/inkwell/src/App.css:19:  --ink-sidebar-bg: #fff;
/Users/davehail/Developer/inkwell/src/App.css:51:/* Topbar Buttons */
/Users/davehail/Developer/inkwell/src/App.css:52:.topbar-btn {
/Users/davehail/Developer/inkwell/src/App.css:56:.topbar-icon {
/Users/davehail/Developer/inkwell/src/App.css:69:/* ======================================== SIDEBAR OPTIMIZATION STYLES ======================================== */
/Users/davehail/Developer/inkwell/src/App.css:71:/* Ensure smooth transitions for sidebar collapse */
/Users/davehail/Developer/inkwell/src/App.css:72:.sidebar {
/Users/davehail/Developer/inkwell/src/App.css:77:.sidebar .wordmark-transition {
/Users/davehail/Developer/inkwell/src/App.css:82:.sidebar-toggle {
/Users/davehail/Developer/inkwell/src/App.css:87:.sidebar-toggle:hover {
/Users/davehail/Developer/inkwell/src/App.css:91:.sidebar-toggle:active {
/Users/davehail/Developer/inkwell/src/App.css:97:/* Command search button in sidebar */
/Users/davehail/Developer/inkwell/src/App.css:142:/* Navigation shortcuts in sidebar */
/Users/davehail/Developer/inkwell/src/App.css:206:/* Sidebar quick actions */
/Users/davehail/Developer/inkwell/src/App.css:207:.sidebar-quick-actions {
/Users/davehail/Developer/inkwell/src/App.css:256:  /* Command search button in sidebar */
/Users/davehail/Developer/inkwell/src/App.css:274:  /* Navigation shortcuts in sidebar */
/Users/davehail/Developer/inkwell/src/index.css:120:  /* Sidebar base */
/Users/davehail/Developer/inkwell/src/index.css:121:  .ink-sidebar {
/Users/davehail/Developer/inkwell/src/index.css:427:.chapter-progress-bar {
/Users/davehail/Developer/inkwell/src/index.css:660:.Topbar {
/Users/davehail/Developer/inkwell/src/index.css:666:/* Remove any pseudo overlays from topbar */
/Users/davehail/Developer/inkwell/src/index.css:667:.Topbar::before,
/Users/davehail/Developer/inkwell/src/index.css:668:.Topbar::after {
/Users/davehail/Developer/inkwell/src/components/Writing/WritingToolbar.tsx:1:// src/components/Writing/WritingToolbar.tsx import { Save, Sparkles, FileText, FileDown, File } from 'lucide-react'; import React from 'react'; import { ExportFormat } from '../../types/writing'; export interface WritingToolbarProps { title: string; onTitleChange: (value: string) => void; onManualSave: () => void; onExport: () => void; exportFormat: ExportFormat; setExportFormat: (format: ExportFormat) => void; onClaudeAssist: () => void; isSaving?: boolean; isExporting?: boolean; lastSaved?: Date | null; } const WritingToolbar: React.FC<WritingToolbarProps> = ({ title, onTitleChange, onManualSave, onExport, exportFormat, setExportFormat, onClaudeAssist, isSaving = false, isExporting = false, lastSaved, }) => { const getExportIcon = () => { switch (exportFormat) { case 'markdown': return <FileText className="w-4 h-4" />; case 'docx': return <FileDown className="w-4 h-4" />; default: return <File className="w-4 h-4" />; } }; return ( <div className="flex flex-col gap-3 p-4 bg-white border-b border-gray-200"> {/* Title and Primary Actions */} <div className="flex items-center gap-3"> <input type="text" value={title} onChange={(e) => onTitleChange(e.target.value)} placeholder="Document title..." className="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-600 bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200" /> <button onClick={onManualSave} disabled={isSaving} className="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200" > <Save className="w-4 h-4" /> {isSaving ? 'Saving...' : 'Save'} </button> <button onClick={onClaudeAssist} className="flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200" > <Sparkles className="w-4 h-4" /> Claude Assist </button> </div> {/* Export Controls and Status */} <div className="flex items-center justify-between"> <div className="flex items-center gap-3"> <select value={exportFormat} onChange={(e) => setExportFormat(e.target.value as ExportFormat)} className="px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-600 bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200" > <option value="markdown">Markdown (.md)</option> <option value="txt">Plain Text (.txt)</option> <option value="docx">Word Document (.docx)</option> </select> <button onClick={onExport} disabled={isExporting} className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200" > {getExportIcon()} {isExporting ? 'Exporting...' : 'Export'} </button> </div> {/* Last Saved Indicator */} {lastSaved && ( <div className="text-xs text-gray-500 text-gray-500"> Last saved: {lastSaved.toLocaleTimeString()} </div> )} </div> </div> ); }; export default WritingToolbar; 
/Users/davehail/Developer/inkwell/src/components/Writing/FallbackEditor.tsx:1:// src/components/Writing/FallbackEditor.tsx import React, { useState, useEffect, useRef } from 'react'; import { cn } from '../../utils/cn'; interface FallbackEditorProps { content: string; onChange: (content: string) => void; onWordCountChange?: (count: number) => void; placeholder?: string; className?: string; wordCountGoal?: number; } export const FallbackEditor: React.FC<FallbackEditorProps> = ({ content, onChange, onWordCountChange, placeholder = 'Start writing your scene...', className, wordCountGoal = 0, }) => { const [isFocusMode, setIsFocusMode] = useState(false); const [showWordCount, setShowWordCount] = useState(true); const textareaRef = useRef<HTMLTextAreaElement>(null); // Convert HTML content to plain text for textarea const htmlToText = (html: string): string => { const div = document.createElement('div'); div.innerHTML = html; return div.textContent || div.innerText || ''; }; // Convert plain text to simple HTML const textToHtml = (text: string): string => { return text .split('\n\n') .map((paragraph) => paragraph.trim()) .filter((paragraph) => paragraph.length > 0) .map((paragraph) => `<p>${paragraph.replace(/\n/g, '<br>')}</p>`) .join(''); }; const [textContent, setTextContent] = useState(htmlToText(content)); const countWords = (text: string): number => { return text .trim() .split(/\s+/) .filter((word) => word.length > 0).length; }; const wordCount = countWords(textContent); const characterCount = textContent.length; const goalProgress = wordCountGoal > 0 ? (wordCount / wordCountGoal) * 100 : 0; useEffect(() => { onWordCountChange?.(wordCount); }, [wordCount, onWordCountChange]); const handleTextChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => { const newText = e.target.value; setTextContent(newText); onChange(textToHtml(newText)); }; // Auto-resize textarea useEffect(() => { if (textareaRef.current) { textareaRef.current.style.height = 'auto'; textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`; } }, [textContent]); // Keyboard shortcuts useEffect(() => { const handleKeyDown = (event: KeyboardEvent) => { if ( event.key === 'F11' || ((event.metaKey || event.ctrlKey) && event.shiftKey && event.key === 'F') ) { event.preventDefault(); setIsFocusMode((prev) => !prev); } if (event.key === 'Escape' && isFocusMode) { setIsFocusMode(false); } }; document.addEventListener('keydown', handleKeyDown); return () => document.removeEventListener('keydown', handleKeyDown); }, [isFocusMode]); // Format text functions const formatText = (type: 'bold' | 'italic' | 'heading') => { if (!textareaRef.current) return; const textarea = textareaRef.current; const start = textarea.selectionStart; const end = textarea.selectionEnd; const selectedText = textContent.substring(start, end); let replacement = ''; switch (type) { case 'bold': replacement = `**${selectedText}**`; break; case 'italic': replacement = `*${selectedText}*`; break; case 'heading': replacement = `## ${selectedText}`; break; } const newText = textContent.substring(0, start) + replacement + textContent.substring(end); setTextContent(newText); onChange(textToHtml(newText)); // Restore focus and cursor position setTimeout(() => { textarea.focus(); textarea.setSelectionRange(start + replacement.length, start + replacement.length); }, 0); }; return ( <div className={cn('relative', className)}> {/* Toolbar */} {!isFocusMode && ( <div className="flex items-center justify-between mb-4 p-3 bg-gray-50 rounded-lg border"> <div className="flex items-center space-x-4"> <div className="flex items-center space-x-2"> <button onClick={() => formatText('bold')} className="px-3 py-1 rounded text-sm font-bold bg-white hover:bg-gray-100 border transition-colors" title="Bold (add **text**)" > B </button> <button onClick={() => formatText('italic')} className="px-3 py-1 rounded text-sm italic bg-white hover:bg-gray-100 border transition-colors" title="Italic (add *text*)" > I </button> <button onClick={() => formatText('heading')} className="px-3 py-1 rounded text-sm font-medium bg-white hover:bg-gray-100 border transition-colors" title="Heading (add ## text)" > H2 </button> </div> <div className="text-xs text-gray-500 hidden lg:block"> Tip: Use **bold**, *italic*, ## heading for formatting </div> </div> <div className="flex items-center space-x-2"> <button onClick={() => setShowWordCount(!showWordCount)} className="px-3 py-1 text-xs bg-white border rounded hover:bg-gray-50 transition-colors" > üìä {showWordCount ? 'Hide' : 'Show'} Stats </button> <button onClick={() => setIsFocusMode(!isFocusMode)} className="px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors" title="Focus mode (F11)" > üéØ Focus Mode </button> </div> </div> )} {/* Focus Mode Exit Button */} {isFocusMode && ( <button onClick={() => setIsFocusMode(false)} className="absolute top-4 right-4 z-10 px-4 py-2 bg-gray-900/90 text-white rounded-lg text-sm hover:bg-gray-900 transition-colors backdrop-blur shadow-lg" title="Exit focus mode (Esc)" > ‚Üê Exit Focus </button> )} {/* Editor Container */} <div className={cn( 'transition-all duration-300', isFocusMode ? 'fixed inset-0 z-50 bg-white p-8 overflow-y-auto' : 'relative', )} > <textarea ref={textareaRef} value={textContent} onChange={handleTextChange} placeholder={placeholder} className={cn( 'w-full min-h-[400px] p-4 border rounded-lg resize-none', 'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent', 'bg-white text-gray-900', 'placeholder-gray-500', 'font-mono text-base leading-relaxed', isFocusMode && 'max-w-4xl mx-auto pt-16 border-none focus:ring-0 bg-transparent', )} style={{ lineHeight: '1.6', fontSize: isFocusMode ? '1.125rem' : '1rem', }} /> </div> {/* Word Count Display */} {showWordCount && !isFocusMode && ( <div className="mt-4 p-3 bg-gray-50 rounded-lg border"> <div className="flex items-center justify-between text-sm text-gray-600"> <div className="flex items-center space-x-4"> <div className="flex items-center space-x-1"> <span>üìù</span> <span className="font-medium">{wordCount} words</span> </div> <div>{characterCount} characters</div> {wordCountGoal > 0 && ( <div className="flex items-center space-x-2"> <span>üéØ Goal: {wordCountGoal}</span> <div className="w-24 h-2 bg-gray-200 rounded-full overflow-hidden"> <div className={cn( 'h-full transition-all duration-300', goalProgress >= 100 ? 'bg-green-500' : 'bg-blue-500', )} style={{ width: `${Math.min(goalProgress, 100)}%` }} /> </div> <span className={cn( 'text-xs font-medium', goalProgress >= 100 ? 'text-green-600' : 'text-blue-600', )} > {Math.round(goalProgress)}%{goalProgress >= 100 && ' ‚úÖ'} </span> </div> )} </div> </div> </div> )} {/* Focus Mode Stats */} {showWordCount && isFocusMode && ( <div className="fixed bottom-6 right-6 z-60 bg-gray-900/90 text-white px-4 py-3 rounded-lg text-sm backdrop-blur shadow-lg"> <div className="flex items-center space-x-3"> <span>üìù {wordCount} words</span> {wordCountGoal > 0 && ( <> <span className="opacity-60">|</span> <span className="opacity-75"> üéØ {Math.round(goalProgress)}% of goal {goalProgress >= 100 && ' ‚úÖ'} </span> </> )} </div> </div> )} {/* Formatting Help */} {!isFocusMode && ( <div className="mt-2 text-xs text-gray-500"> üí° Temporary fallback editor while TipTap is being fixed. Use **bold**, *italic*, ## heading for basic formatting. </div> )} </div> ); }; 
/Users/davehail/Developer/inkwell/src/services/aiPlotAnalysisService.ts:84:  mockMode?: boolean; // Use mock data instead of AI service
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingPanel.tsx:255:      {/* Stats Bar */}
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingPanel.tsx:257:        <div className="stats-bar bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 px-4 py-3">
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:1:// Enhanced version of your existing ClaudeToolbar.tsx
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:28:import { type ClaudeToolbarProps } from './ClaudeToolbarTypes';
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:30:interface _ClaudeToolbarInternalProps extends Omit<ClaudeToolbarProps, 'onInsertText'> {
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:48:const ClaudeToolbar: React.FC<ClaudeToolbarProps> = ({
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:347:  const toolbarClasses =
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:359:      className={toolbarClasses}
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:389:                  title={isPinned ? 'Unpin toolbar' : 'Pin toolbar'}
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbar.tsx:524:export default ClaudeToolbar;
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedAIWritingToolbar.tsx:1:// src/components/Writing/EnhancedAIWritingToolbar.tsx - Advanced AI-powered writing assistance toolbar
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedAIWritingToolbar.tsx:12:  BarChart3,
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedAIWritingToolbar.tsx:24:interface EnhancedAIWritingToolbarProps {
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedAIWritingToolbar.tsx:79:export default function EnhancedAIWritingToolbar({
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedAIWritingToolbar.tsx:88:}: EnhancedAIWritingToolbarProps) {
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedAIWritingToolbar.tsx:142:      icon: BarChart3,
/Users/davehail/Developer/inkwell/src/features/preview/demoData.ts:38:"Sarah!" Maya's footsteps approached. "Are you okay? You've been weird all week."
/Users/davehail/Developer/inkwell/src/features/preview/demoData.ts:40:"Do you remember Marcus?" Sarah asked, her voice barely above a whisper.
/Users/davehail/Developer/inkwell/src/tour/steps.v2.ts:14:    id: 'sidebar',
/Users/davehail/Developer/inkwell/src/tour/steps.v2.ts:16:    selectors: ['[data-tour="sidebar"]', '#main-nav'],
/Users/davehail/Developer/inkwell/src/tour/steps.v2.ts:19:    body: 'Navigate between your Dashboard, Writing, Timeline, and more using the sidebar. Quick access to all your tools.',
/Users/davehail/Developer/inkwell/src/pages/AuthPage.tsx:6:import AuthFooter from '../components/Auth/AuthFooter';
/Users/davehail/Developer/inkwell/src/pages/AuthPage.tsx:157:          <AuthFooter mode={mode === 'signin' ? 'signin' : 'signup'} redirect={desiredRedirect} />
/Users/davehail/Developer/inkwell/src/features/preview/PreviewLandingPage.tsx:121:      {/* CTA Footer */}
/Users/davehail/Developer/inkwell/src/features/preview/PreviewLandingPage.tsx:132:            onClick={() => trackPreviewCTA('signup', 'footer')}
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbarTypes.ts:1:export type ToolbarPosition = 'panel' | 'popup' | 'relative';
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbarTypes.ts:4:export interface ClaudeToolbarProps {
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbarTypes.ts:13:  /** How the toolbar should be positioned */
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbarTypes.ts:14:  position: ToolbarPosition;
/Users/davehail/Developer/inkwell/src/components/Writing/ClaudeToolbarTypes.ts:17:  /** Callback when the toolbar should be closed */
/Users/davehail/Developer/inkwell/src/components/Writing/AdvancedFocusMode.tsx:1:// src/components/Writing/AdvancedFocusMode.tsx // Enhanced focus mode UI that integrates with your existing writing editor import { Focus, Timer, Volume2, VolumeX, Play, Pause, Square, Settings, Target, Coffee, Zap, X, ChevronDown, ChevronUp, } from 'lucide-react'; import React, { useState } from 'react'; import { useAdvancedFocusMode } from '../../hooks/useAdvancedFocusMode'; interface AdvancedFocusModeProps { _isActive: boolean; _onToggle: () => void; currentWordCount: number; children: React.ReactNode; } export function AdvancedFocusMode({ _isActive, _onToggle, currentWordCount, children, }: AdvancedFocusModeProps) { const { isFocusMode, toggleFocusMode, disableFocusMode, settings, updateSettings, sprintSettings, updateSprintSettings, sprint, startSprint, pauseSprint, resumeSprint, stopSprint, updateSprintWordCount, sprintProgress, wordsProgress: _wordsProgress, sessionStats: _sessionStats, isMuted, toggleMute, ambientSounds, formatTime, } = useAdvancedFocusMode(); const [showSettings, setShowSettings] = useState(false); const [showControls, setShowControls] = useState(true); // Sync word count updates React.useEffect(() => { if (sprint.isActive) { updateSprintWordCount(currentWordCount); } }, [currentWordCount, sprint.isActive, updateSprintWordCount]); if (!isFocusMode) { return ( <> {children} {/* Focus Mode Toggle Button - Always visible */} <button onClick={toggleFocusMode} className="fixed bottom-6 right-6 z-50 p-3 bg-purple-600 hover:bg-purple-700 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-105" title="Enter Focus Mode (F11)" > <Focus className="w-6 h-6" /> </button> </> ); } return ( <div className="fixed inset-0 z-50 bg-gray-50 flex flex-col"> {/* Top Controls Bar */} {showControls && !settings.zenMode && ( <div className="flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b border-gray-200"> <div className="flex items-center space-x-4"> {/* Exit Focus Mode */} <button onClick={disableFocusMode} className="flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors" title="Exit Focus Mode (Esc)" > <X className="w-4 h-4" /> <span className="text-sm">Exit Focus</span> </button> {/* Sprint Controls */} <div className="flex items-center space-x-2 pl-4 border-l border-gray-300"> {!sprint.isActive ? ( <button onClick={() => startSprint(currentWordCount)} className="flex items-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm" title="Start Writing Sprint (Ctrl+Shift+S)" > <Zap className="w-4 h-4" /> Start Sprint </button> ) : ( <div className="flex items-center space-x-2"> <button onClick={sprint.isPaused ? resumeSprint : pauseSprint} className="flex items-center gap-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm" > {sprint.isPaused ? <Play className="w-4 h-4" /> : <Pause className="w-4 h-4" />} {sprint.isPaused ? 'Resume' : 'Pause'} </button> <button onClick={stopSprint} className="flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm" title="Stop Sprint (Ctrl+Shift+X)" > <Square className="w-4 h-4" /> Stop </button> </div> )} </div> </div> <div className="flex items-center space-x-4"> {/* Sprint Progress */} {sprint.isActive && ( <div className="flex items-center space-x-3"> <div className="flex items-center space-x-2"> <Timer className="w-4 h-4 text-gray-600" /> <span className="text-sm font-mono font-medium"> {formatTime(sprint.remainingTime)} </span> </div> <div className="w-24 h-2 bg-gray-200 rounded-full overflow-hidden"> <div className="h-full bg-blue-500 transition-all duration-1000" style={{ width: `${sprintProgress}%` }} /> </div> <div className="flex items-center space-x-2"> <Target className="w-4 h-4 text-gray-600" /> <span className="text-sm"> {sprint.currentWords - sprint.wordsAtStart}/{sprint.target} </span> </div> </div> )} {/* Word Count */} {settings.showWordCount && ( <div className="text-sm text-gray-600"> {currentWordCount.toLocaleString()} words </div> )} {/* Audio Controls */} {settings.ambientSound !== 'none' && ( <button onClick={toggleMute} className="p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Toggle Ambient Sound (Ctrl+Shift+M)" > {isMuted ? <VolumeX className="w-4 h-4" /> : <Volume2 className="w-4 h-4" />} </button> )} {/* Settings */} <button onClick={() => setShowSettings(!showSettings)} className="p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Focus Mode Settings" > <Settings className="w-4 h-4" /> </button> {/* Hide Controls */} <button onClick={() => setShowControls(false)} className="p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Hide Controls" > <ChevronUp className="w-4 h-4" /> </button> </div> </div> )} {/* Settings Panel */} {showSettings && ( <div className="absolute top-16 right-4 w-80 bg-white rounded-lg shadow-xl border border-gray-200 p-4 z-60"> <div className="flex items-center justify-between mb-4"> <h3 className="font-semibold text-gray-900">Focus Mode Settings</h3> <button onClick={() => setShowSettings(false)} className="p-1 hover:bg-gray-100 rounded" > <X className="w-4 h-4" /> </button> </div> <div className="space-y-4"> {/* Typewriter Mode */} <label className="flex items-center justify-between"> <span className="text-sm text-gray-700">Typewriter Mode</span> <input type="checkbox" checked={settings.typewriterMode} onChange={(e) => updateSettings({ typewriterMode: e.target.checked })} className="rounded border-gray-300 text-purple-600 focus:ring-purple-500" /> </label> {/* Zen Mode */} <label className="flex items-center justify-between"> <span className="text-sm text-gray-700">Zen Mode</span> <input type="checkbox" checked={settings.zenMode} onChange={(e) => updateSettings({ zenMode: e.target.checked })} className="rounded border-gray-300 text-purple-600 focus:ring-purple-500" /> </label> {/* Show Word Count */} <label className="flex items-center justify-between"> <span className="text-sm text-gray-700">Show Word Count</span> <input type="checkbox" checked={settings.showWordCount} onChange={(e) => updateSettings({ showWordCount: e.target.checked })} className="rounded border-gray-300 text-purple-600 focus:ring-purple-500" /> </label> {/* Ambient Sound */} <div> <label className="block text-sm text-gray-700 mb-2"> Ambient Sound </label> <select value={settings.ambientSound} onChange={(e) => updateSettings({ ambientSound: e.target.value })} className="w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 text-sm" > {ambientSounds.map((sound) => ( <option key={sound.id} value={sound.id}> {sound.name} </option> ))} </select> </div> {/* Volume */} {settings.ambientSound !== 'none' && ( <div> <label className="block text-sm text-gray-700 mb-2"> Volume: {Math.round(settings.ambientVolume * 100)}% </label> <input type="range" min="0" max="1" step="0.1" value={settings.ambientVolume} onChange={(e) => updateSettings({ ambientVolume: parseFloat(e.target.value) })} className="w-full" /> </div> )} {/* Sprint Settings */} <div className="pt-4 border-t border-gray-200"> <h4 className="font-medium text-gray-900 mb-3">Sprint Settings</h4> <div className="space-y-3"> <div> <label className="block text-sm text-gray-700 mb-1"> Duration (minutes) </label> <input type="number" min="5" max="120" value={sprintSettings.duration} onChange={(e) => updateSprintSettings({ duration: parseInt(e.target.value) })} className="w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 text-sm" /> </div> <div> <label className="block text-sm text-gray-700 mb-1"> Word Target </label> <input type="number" min="50" max="5000" step="50" value={sprintSettings.wordTarget} onChange={(e) => updateSprintSettings({ wordTarget: parseInt(e.target.value) })} className="w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 text-sm" /> </div> </div> </div> </div> </div> )} {/* Main Content Area */} <div className="flex-1 overflow-hidden relative"> {/* Hidden Controls Toggle */} {!showControls && ( <button onClick={() => setShowControls(true)} className="absolute top-4 right-4 z-50 p-2 bg-gray-800/50 hover:bg-gray-800/70 text-white rounded-lg backdrop-blur-sm transition-all" title="Show Controls" > <ChevronDown className="w-4 h-4" /> </button> )} {/* Writing Area */} <div className={` h-full ${settings.typewriterMode ? 'typewriter-container' : ''} ${settings.zenMode ? 'zen-mode-container' : ''} `} > {children} </div> {/* Sprint Completion Notification */} {sprint.sprintsCompleted > 0 && !sprint.isActive && ( <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-green-600 text-white p-6 rounded-lg shadow-xl z-60"> <div className="text-center"> <Coffee className="w-8 h-8 mx-auto mb-2" /> <h3 className="font-semibold mb-2">Sprint Complete!</h3> <p className="text-sm mb-4"> You wrote {sprint.currentWords - sprint.wordsAtStart} words </p> <button onClick={() => startSprint(currentWordCount)} className="px-4 py-2 bg-white text-green-600 rounded-lg hover:bg-gray-100 transition-colors" > Start Another Sprint </button> </div> </div> )} </div> {/* Minimal Status Bar (only in zen mode) */} {settings.zenMode && sprint.isActive && ( <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800/70 text-white px-4 py-2 rounded-full backdrop-blur-sm text-sm"> {formatTime(sprint.remainingTime)} ‚Ä¢ {sprint.currentWords - sprint.wordsAtStart}/ {sprint.target} </div> )} </div> ); } 
/Users/davehail/Developer/inkwell/src/components/Writing/types.ts:5:export interface ClaudeToolbarProps {
/Users/davehail/Developer/inkwell/src/services/backupSetup.ts:1:// src/services/backupSetup.ts // Try importing everything as a namespace first import * as BackupService from './backupServices'; // Then destructure what we need const { BackupManager, saveBackup } = BackupService; type Backup = BackupService.Backup; /** * Real backup function that creates and saves a backup. */ async function _performActualBackup(): Promise<void> { // Construct a Backup object with proper type literals const backup: Backup = { id: crypto.randomUUID(), type: 'manual', // Must be one of the literal union: "manual" | "auto" | "emergency" title: `Backup ${new Date().toLocaleString()}`, description: 'Manual backup from user', data: JSON.parse(localStorage.getItem('writing_content') || '{}'), timestamp: Date.now(), size: undefined, // Optional: calculate if you want isCorrupted: false, // Optional flag }; // Save the backup using the consolidated backupService await saveBackup(backup); } /** * Simple notification function ‚Äî replace with your UI toast/snackbar */ function _notifyUser(message: string, type: 'info' | 'success' | 'error' = 'info') { devLog.debug(`[${type.toUpperCase()}] Backup: ${message}`); } // Create and export the singleton BackupManager instance export const backupManager = new BackupManager(performActualBackup, notifyUser); // Manual backup trigger for UI export async function _triggerBackup() { await backupManager.backup(); } // Auto-backup interval ID holder let autoBackupInterval: ReturnType<typeof setInterval> | null = null; /** * Enable auto backup every intervalMs milliseconds (default 1 minute) */ export function _setupAutoBackup(intervalMs = 60000) { if (autoBackupInterval) clearInterval(autoBackupInterval); autoBackupInterval = setInterval(() => { backupManager.backup(); }, intervalMs); notifyUser('Auto-backup enabled', 'success'); } /** * Disable auto backup */ export function _stopAutoBackup() { if (autoBackupInterval) { clearInterval(autoBackupInterval); autoBackupInterval = null; notifyUser('Auto-backup disabled', 'info'); } } // Re-export useful functions from backupService for convenience export const { getBackups, restoreBackup, deleteBackup, exportBackup, importBackup, clearAllBackups, getBackupStatus, createManualBackup, startAutoBackup, stopAutoBackup: stopAutoBackupService, } = BackupService;
/Users/davehail/Developer/inkwell/src/features/preview/PreviewWriter.tsx:104:        {/* Chapter Navigation Sidebar */}
/Users/davehail/Developer/inkwell/src/features/preview/PreviewWriter.tsx:143:                      onClick={() => trackPreviewCTA('signup', 'sidebar_info')}
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:35:import ClaudeToolbar from './ClaudeToolbar';
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:36:import EnhancedAIWritingToolbar from './EnhancedAIWritingToolbar';
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:60:  const [showEnhancedToolbar, setShowEnhancedToolbar] = useState(false);
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:66:  const [toolbarPosition, setToolbarPosition] = useState({ x: 0, y: 0 });
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:67:  const [showPopupToolbar, setShowPopupToolbar] = useState(false);
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:145:        // Get cursor position for popup toolbar
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:148:        setToolbarPosition({
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:153:        // Show popup toolbar after a short delay to avoid flickering
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:154:        setTimeout(() => setShowPopupToolbar(true), 300);
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:157:        setShowPopupToolbar(false);
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:371:  // AI Toolbar handlers
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:382:    setShowPopupToolbar(false);
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:449:        {/* Editor Toolbar */}
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:471:                onClick={() => setShowEnhancedToolbar(!showEnhancedToolbar)}
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:473:                  showEnhancedToolbar ? 'text-blue-600 bg-blue-50' : 'text-gray-600'
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:476:                  showEnhancedToolbar ? 'Hide enhanced AI toolkit' : 'Show enhanced AI toolkit'
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:618:          {/* AI Toolbar Panel */}
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:625:                <ClaudeToolbar
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:638:          {showEnhancedToolbar && !isFocusMode && (
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:640:              <EnhancedAIWritingToolbar
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:682:      {/* Popup AI Toolbar on Selection */}
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:683:      {showPopupToolbar && selectedText && !showAIPanel && !showEnhancedToolbar && (
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:684:        <ClaudeToolbar
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:692:            setShowPopupToolbar(false);
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:698:      {/* Popup Enhanced AI Toolbar on Selection */}
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:699:      {showPopupToolbar && selectedText && !showAIPanel && showEnhancedToolbar && (
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:703:            left: toolbarPosition.x,
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:704:            top: Math.max(10, toolbarPosition.y),
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:710:            <EnhancedAIWritingToolbar
/Users/davehail/Developer/inkwell/src/components/Writing/EnhancedWritingEditor.tsx:718:                setShowPopupToolbar(false);
/Users/davehail/Developer/inkwell/src/export/templates/manuscript.ts:38:  <div class="footer">Page <span class="pnum"></span></div>
/Users/davehail/Developer/inkwell/src/tour/configs/defaultTour.ts:27:    id: 'sidebar',
/Users/davehail/Developer/inkwell/src/tour/configs/defaultTour.ts:29:    body: 'Switch between Dashboard, Writing, and other views using the sidebar.',
/Users/davehail/Developer/inkwell/src/tour/configs/defaultTour.ts:30:    selectors: ['[data-tour-id="sidebar"]', 'nav[aria-label="Main"]'],
/Users/davehail/Developer/inkwell/src/tour/configs/defaultTour.ts:34:    id: 'topbar',
/Users/davehail/Developer/inkwell/src/tour/configs/defaultTour.ts:36:    body: 'Access common actions, settings, and help from the top bar.',
/Users/davehail/Developer/inkwell/src/tour/configs/defaultTour.ts:37:    selectors: ['[data-tour-id="topbar"]', 'header'],
/Users/davehail/Developer/inkwell/src/components/Writing/SceneNavigationPanel.tsx:352:            showToast('Delete functionality coming soon', 'info');
/Users/davehail/Developer/inkwell/src/components/Writing/SceneNavigationPanel.tsx:445:      {/* Footer stats */}
/Users/davehail/Developer/inkwell/src/export/templates/analysisSummary.ts:77:  <div class="footer">Page <span class="pnum"></span></div>
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:4:import { Bar, BarChart, CartesianGrid, ResponsiveContainer, Tooltip, XAxis, YAxis } from 'recharts';
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:9:// Transform chapter tags to stacked bars
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:41:        <BarChart
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:45:          barCategoryGap={4}
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:46:          barGap={0}
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:87:          {/* Each bar is stacked to appear as adjacent cells */}
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:88:          <Bar
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:95:          <Bar
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:102:          <Bar
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:109:          <Bar
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/ArcHeatmap.tsx:116:        </BarChart>
/Users/davehail/Developer/inkwell/src/export/styles/printCss.ts:11:.header, .footer { position: fixed; left: 0; right: 0; color: #666; font-size: 10pt; }
/Users/davehail/Developer/inkwell/src/export/styles/printCss.ts:13:.footer { bottom: 0.4in; text-align: center; }
/Users/davehail/Developer/inkwell/src/export/styles/printCss.ts:14:.footer .pnum:after { content: counter(page); }
/Users/davehail/Developer/inkwell/src/services/plotAnalysis/components/InsightList.tsx:65:      {/* Filter bar */}
/Users/davehail/Developer/inkwell/src/components/Writing/Chapters/index.ts:20:export { default as ChapterSidebar } from './ChapterSidebar';
/Users/davehail/Developer/inkwell/src/tour/__tests__/anchors.test.ts:35:    it('should verify sidebar-nav anchor exists', () => {
/Users/davehail/Developer/inkwell/src/tour/__tests__/anchors.test.ts:36:      const html = mockComponentHTML('sidebar-nav');
/Users/davehail/Developer/inkwell/src/tour/__tests__/anchors.test.ts:37:      expect(containsTourAnchor(html, 'sidebar-nav')).toBe(true);
/Users/davehail/Developer/inkwell/src/tour/__tests__/anchors.test.ts:52:    it('should verify ai-toolbar anchor exists', () => {
/Users/davehail/Developer/inkwell/src/tour/__tests__/anchors.test.ts:53:      const html = mockComponentHTML('ai-toolbar');
/Users/davehail/Developer/inkwell/src/tour/__tests__/anchors.test.ts:54:      expect(containsTourAnchor(html, 'ai-toolbar')).toBe(true);
/Users/davehail/Developer/inkwell/src/tour/__tests__/anchors.test.ts:96:    const validIds = ['editor-canvas', 'sidebar-nav', 'export-button', 'ai-toolbar'];
/Users/davehail/Developer/inkwell/src/components/Writing/Chapters/ChapterSidebar.tsx:24:export default function ChapterSidebar({ projectId }: { projectId: string }) {
/Users/davehail/Developer/inkwell/src/components/Writing/Chapters/ChapterListView.tsx:253:      {/* Footer Stats */}
/Users/davehail/Developer/inkwell/src/components/Writing/FocusModeEditor.tsx:1:// src/components/Writing/FocusModeEditor.tsx import { Editor } from '@tiptap/react'; import { Play, Pause, Square, Clock, FileText, VolumeX, Volume2 } from 'lucide-react'; import React, { useEffect, useRef, useState } from 'react'; import { useAdvancedFocusMode } from '../../hooks/useAdvancedFocusMode'; interface FocusModeEditorProps { editor: Editor | null; _content: string; _onContentChange: (content: string) => void; wordCount: number; } export const FocusModeEditor: React.FC<FocusModeEditorProps> = ({ editor, _content, _onContentChange, wordCount, }) => { const { isFocusMode, settings, sprint, sprintProgress, wordsProgress, formatTime, enableFocusMode: _enableFocusMode, disableFocusMode, startSprint, pauseSprint, resumeSprint, stopSprint, updateSprintWordCount, isMuted, toggleMute, } = useAdvancedFocusMode(); const editorRef = useRef<HTMLDivElement>(null); const [showControls, setShowControls] = useState(true); const [lastUserActivity, setLastUserActivity] = useState(Date.now()); // Auto-hide controls in zen mode useEffect(() => { if (!settings.zenMode) return; const handleActivity = () => { setLastUserActivity(Date.now()); setShowControls(true); }; const handleInactivity = () => { const timeSinceActivity = Date.now() - lastUserActivity; if (timeSinceActivity > 3000 && settings.zenMode) { setShowControls(false); } }; document.addEventListener('mousemove', handleActivity); document.addEventListener('keydown', handleActivity); const inactivityTimer = setInterval(handleInactivity, 1000); return () => { document.removeEventListener('mousemove', handleActivity); document.removeEventListener('keydown', handleActivity); clearInterval(inactivityTimer); }; }, [settings.zenMode, lastUserActivity]); // Update sprint word count useEffect(() => { if (sprint.isActive) { updateSprintWordCount(wordCount); } }, [wordCount, sprint.isActive, updateSprintWordCount]); // Typewriter mode scroll management useEffect(() => { if (!editor || !settings.typewriterMode) return; const handleUpdate = () => { if (!editorRef.current) return; const editorElement = editorRef.current.querySelector('.ProseMirror'); if (!editorElement) return; const selection = editor.state.selection; const currentPos = selection.$anchor.pos; const resolvedPos = editor.state.doc.resolve(currentPos); const _currentNode = resolvedPos.parent; // Find the current paragraph element const paragraphElements = editorElement.querySelectorAll('p'); let currentParagraphIndex = 0; // Calculate which paragraph the cursor is in editor.state.doc.descendants((node, pos) => { if (node.type.name === 'paragraph') { if (pos <= currentPos && currentPos <= pos + node.nodeSize) { return false; // Found the current paragraph } currentParagraphIndex++; } return true; }); const currentParagraph = paragraphElements[currentParagraphIndex]; if (currentParagraph) { // Remove previous highlights paragraphElements.forEach((p) => p.classList.remove('is-editor-focused')); // Highlight current paragraph currentParagraph.classList.add('is-editor-focused'); // Scroll to center the current line const _editorRect = editorElement.getBoundingClientRect(); const paragraphRect = currentParagraph.getBoundingClientRect(); const viewportCenter = window.innerHeight / 2; const paragraphCenter = paragraphRect.top + paragraphRect.height / 2; const scrollOffset = paragraphCenter - viewportCenter; editorElement.scrollBy({ top: scrollOffset, behavior: 'smooth', }); } }; editor.on('selectionUpdate', handleUpdate); editor.on('update', handleUpdate); return () => { editor.off('selectionUpdate', handleUpdate); editor.off('update', handleUpdate); }; }, [editor, settings.typewriterMode]); // Keyboard shortcuts for focus mode useEffect(() => { if (!isFocusMode) return; const handleKeyDown = (event: KeyboardEvent) => { // Exit focus mode with Escape if (event.key === 'Escape') { event.preventDefault(); disableFocusMode(); return; } // Sprint controls if ((event.metaKey || event.ctrlKey) && event.shiftKey) { switch (event.key) { case 'S': event.preventDefault(); if (!sprint.isActive) { startSprint(wordCount); } else if (sprint.isPaused) { resumeSprint(); } else { pauseSprint(); } break; case 'X': event.preventDefault(); stopSprint(); break; case 'M': event.preventDefault(); toggleMute(); break; } } }; document.addEventListener('keydown', handleKeyDown); return () => document.removeEventListener('keydown', handleKeyDown); }, [ isFocusMode, sprint, wordCount, disableFocusMode, startSprint, pauseSprint, resumeSprint, stopSprint, toggleMute, ]); if (!isFocusMode) { return null; } const wordsWritten = sprint.isActive ? wordCount - sprint.wordsAtStart : 0; const isSprintUrgent = sprint.isActive && sprint.remainingTime <= 300; // Last 5 minutes return ( <div className="fixed inset-0 z-50 bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900"> {/* Ambient Sound Visualizer */} {!isMuted && settings.ambientSound !== 'none' && <div className="ambient-visualizer" />} {/* Top Controls Bar */} <div className={`absolute top-0 left-0 right-0 bg-black bg-opacity-50 backdrop-blur-sm transition-all duration-500 z-10 ${ showControls || !settings.zenMode ? 'translate-y-0 opacity-100' : '-translate-y-full opacity-0' }`} > <div className="flex items-center justify-between p-4"> {/* Sprint Controls */} <div className="flex items-center gap-3"> <button onClick={() => { if (!sprint.isActive) { startSprint(wordCount); } else if (sprint.isPaused) { resumeSprint(); } else { pauseSprint(); } }} className="flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all duration-200 focus-button" > {!sprint.isActive ? ( <> <Play className="w-4 h-4" /> Start Sprint </> ) : sprint.isPaused ? ( <> <Play className="w-4 h-4" /> Resume </> ) : ( <> <Pause className="w-4 h-4" /> Pause </> )} </button> {sprint.isActive && ( <button onClick={stopSprint} className="flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200" > <Square className="w-4 h-4" /> Stop </button> )} {/* Audio Toggle */} <button onClick={toggleMute} className="p-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors" title={isMuted ? 'Unmute' : 'Mute'} > {isMuted ? <VolumeX className="w-4 h-4" /> : <Volume2 className="w-4 h-4" />} </button> </div> {/* Status Display */} <div className="flex items-center gap-6 text-white"> {sprint.isActive && ( <div className={`flex items-center gap-2 ${isSprintUrgent ? 'sprint-timer urgent' : ''}`} > <Clock className="w-4 h-4" /> <span className="font-mono text-lg">{formatTime(sprint.remainingTime)}</span> </div> )} {settings.showWordCount && ( <div className="flex items-center gap-2"> <FileText className="w-4 h-4" /> <span className="font-mono"> {sprint.isActive ? `+${wordsWritten}` : wordCount} {sprint.isActive && ` / ${sprint.target}`} </span> </div> )} </div> {/* Right Controls */} <div className="flex items-center gap-2"> <button onClick={disableFocusMode} className="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors" > Exit Focus </button> </div> </div> {/* Sprint Progress */} {sprint.isActive && ( <div className="px-4 pb-4"> <div className="bg-black bg-opacity-30 rounded-lg p-4"> <div className="flex items-center justify-between mb-3 text-white"> <span className="font-medium"> Sprint Progress {sprint.isPaused && <span className="ml-2 text-yellow-400">(Paused)</span>} </span> <span className="text-sm opacity-75"> {wordsWritten} / {sprint.target} words ({Math.round(wordsProgress)}%) </span> </div> {/* Time Progress Bar */} <div className="mb-2"> <div className="bg-gray-600 rounded-full h-2"> <div className={`h-2 rounded-full transition-all duration-300 ${ isSprintUrgent ? 'bg-red-500 sprint-progress-bar' : 'bg-purple-500' }`} style={{ width: `${sprintProgress}%` }} /> </div> </div> {/* Words Progress Bar */} <div> <div className="bg-gray-600 rounded-full h-2"> <div className="bg-green-500 h-2 rounded-full transition-all duration-300" style={{ width: `${Math.min(wordsProgress, 100)}%` }} /> </div> </div> </div> </div> )} </div> {/* Main Editor Area */} <div className="flex-1 flex items-center justify-center p-8 pt-32"> <div ref={editorRef} className={`w-full max-w-4xl mx-auto transition-all duration-300 ${ settings.typewriterMode ? 'typewriter-mode' : '' }`} > <div className="min-h-[600px] bg-white rounded-lg shadow-2xl overflow-hidden"> {/* Editor will be rendered here by your existing TipTap setup */} <div className="h-full focus-mode-editor"> {editor && ( <div className="prose prose-lg max-w-none p-8 h-full overflow-y-auto"> {/* Your TipTap editor renders here */} <div className="ProseMirror-focused-editor" /> </div> )} </div> </div> </div> </div> {/* Bottom Status Bar */} {!settings.zenMode && ( <div className={`absolute bottom-0 left-0 right-0 bg-black bg-opacity-30 backdrop-blur-sm p-3 transition-all duration-500 ${ showControls ? 'translate-y-0 opacity-100' : 'translate-y-full opacity-0' }`} > <div className="flex items-center justify-center gap-8 text-white text-sm"> <span>Focus Mode Active</span> {sprint.isActive && <span>Sprint: {formatTime(sprint.remainingTime)} remaining</span>} <span className="opacity-75">Press Esc to exit</span> </div> </div> )} {/* Sprint Completion Celebration */} {sprint.isActive && sprint.remainingTime === 0 && ( <SprintCompletionModal wordsWritten={wordsWritten} target={sprint.target} onClose={stopSprint} onNewSprint={() => startSprint(wordCount)} /> )} </div> ); }; // Sprint Completion Modal interface SprintCompletionModalProps { wordsWritten: number; target: number; onClose: () => void; onNewSprint: () => void; } const SprintCompletionModal: React.FC<SprintCompletionModalProps> = ({ wordsWritten, target, onClose, onNewSprint, }) => { const completionPercentage = Math.round((wordsWritten / target) * 100); const exceeded = wordsWritten > target; return ( <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50"> <div className="bg-white rounded-lg shadow-xl p-8 max-w-md w-full mx-4 sprint-complete"> <div className="text-center"> <div className="text-6xl mb-4"> {exceeded ? 'üéâ' : completionPercentage >= 80 ? 'üëè' : 'üí™'} </div> <h2 className="text-2xl font-bold text-gray-900 mb-2"> Sprint Complete! </h2> <div className="text-lg text-gray-600 mb-6"> <div> You wrote <strong>{wordsWritten}</strong> words </div> <div> Target was <strong>{target}</strong> words </div> <div className={`mt-2 ${exceeded ? 'text-green-600' : completionPercentage >= 80 ? 'text-blue-600' : 'text-yellow-600'}`} > {exceeded ? `${completionPercentage}% - Exceeded target!` : completionPercentage >= 80 ? `${completionPercentage}% - Great job!` : `${completionPercentage}% - Good effort!`} </div> </div> <div className="flex gap-3 justify-center"> <button onClick={onNewSprint} className="px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors" > New Sprint </button> <button onClick={onClose} className="px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors" > Continue Writing </button> </div> </div> </div> </div> ); }; 
/Users/davehail/Developer/inkwell/src/components/Writing/ExportDialog.tsx:193:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:11:import AutosaveIndicator from '@/components/Topbar/AutosaveIndicator';
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:39:  const [showSidebar, setShowSidebar] = useState(true);
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:179:      {/* Chapter Sidebar */}
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:180:      {showSidebar && (
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:185:              onClick={() => setShowSidebar(false)}
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:187:              aria-label="Hide sidebar"
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:217:        {/* Toolbar */}
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:221:              {!showSidebar && (
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:223:                  onClick={() => setShowSidebar(true)}
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:225:                  aria-label="Show sidebar"
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:335:                  Click "New Chapter" in the sidebar to create your first chapter.
/Users/davehail/Developer/inkwell/src/components/Writing/ChapterWritingPanel.tsx:341:              <p>Select a chapter from the sidebar to start writing</p>
/Users/davehail/Developer/inkwell/src/features/plotboards/VIRTUALIZATION.md:19:- **Memory Management**: Reduced memory footprint for large datasets
/Users/davehail/Developer/inkwell/src/features/plotboards/VIRTUALIZATION.md:74:- **Footer Info**: Shows "‚ö° Performance mode: X cards virtualized"
/Users/davehail/Developer/inkwell/src/constants/README.md:7:All constants are re-exported through the barrel file (`index.ts`). Always import constants through the barrel file rather than directly from individual files:
/Users/davehail/Developer/inkwell/src/constants/README.md:10:// ‚úÖ Good: Import from the barrel file
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:3:/** UI Context with sidebar state */
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:6:  sidebarCollapsed: boolean;
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:7:  toggleSidebar: () => void;
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:14:  sidebarCollapsed: false,
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:15:  toggleSidebar: () => undefined,
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:35:  const [sidebarCollapsed, setSidebarCollapsed] = useState(initialCollapsed);
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:40:      sidebarCollapsed,
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:41:      toggleSidebar: () => setSidebarCollapsed((c) => !c),
/Users/davehail/Developer/inkwell/src/hooks/useUI.tsx:46:    [sidebarCollapsed, newProjectDialogOpen],
/Users/davehail/Developer/inkwell/src/components/Analytics/SidebarGoalsWidget.tsx:1:// Compact sidebar widget for your main writing interface // File: src/components/Analytics/SidebarGoalsWidget.tsx (moved to Analytics folder) import { Target, Flame, Timer, TrendingUp, Play, Pause } from 'lucide-react'; import React from 'react'; import { useWritingGoals } from '@/hooks/useWritingGoals'; interface SidebarGoalsWidgetProps { className?: string; } const SidebarGoalsWidget: React.FC<SidebarGoalsWidgetProps> = ({ className = '' }) => { const { goals, currentStreak, getTodayProgress, getCurrentSessionTime, isSessionActive, startWritingSession, pauseWritingSession, } = useWritingGoals(); const formatTime = (seconds: number) => { const mins = Math.floor(seconds / 60); const secs = seconds % 60; return `${mins}:${secs.toString().padStart(2, '0')}`; }; const progressPercentage = getTodayProgress(); const mainGoals = goals .filter((goal) => goal.type === 'daily_words' || goal.type === 'daily_time') .slice(0, 2); return ( <div className={`bg-white rounded-lg border border-gray-200 p-4 ${className}`} > {/* Header with overall progress */} <div className="flex items-center justify-between mb-3"> <div className="flex items-center gap-2"> <Target size={16} className="text-blue-600" /> <h3 className="font-medium text-gray-900 text-sm">Daily Goals</h3> </div> <div className="flex items-center gap-1"> <div className={`w-2 h-2 rounded-full ${progressPercentage >= 100 ? 'bg-green-500' : 'bg-blue-500'}`} /> <span className="text-xs font-medium text-gray-600"> {progressPercentage}% </span> </div> </div> {/* Main Goals Progress */} <div className="space-y-2 mb-4"> {mainGoals.map((goal) => { const percentage = Math.min((goal.current / goal.target) * 100, 100); return ( <div key={goal.id} className="space-y-1"> <div className="flex items-center justify-between text-xs"> <span className="flex items-center gap-1 text-gray-600"> <span>{goal.emoji}</span> {goal.label} </span> <span className={`font-medium ${goal.color}`}> {goal.current.toLocaleString()}/{goal.target.toLocaleString()} </span> </div> <div className="w-full bg-gray-200 rounded-full h-1.5"> <div className={`h-1.5 rounded-full transition-all duration-500 ${ percentage >= 100 ? 'bg-green-500' : 'bg-blue-500' }`} style={{ width: `${percentage}%` }} /> </div> </div> ); })} </div> {/* Session Timer */} <div className="bg-gray-50 rounded-lg p-3 mb-3"> <div className="flex items-center justify-between"> <div className="flex items-center gap-2"> <Timer size={14} className="text-green-500" /> <span className="text-xs text-gray-600">Session</span> </div> <span className="text-sm font-mono font-medium text-gray-900"> {formatTime(getCurrentSessionTime())} </span> </div> <button onClick={isSessionActive ? pauseWritingSession : startWritingSession} className={`w-full mt-2 px-3 py-1.5 text-xs rounded-lg font-medium transition-colors flex items-center justify-center gap-1 ${ isSessionActive ? 'bg-orange-100 text-orange-700 hover:bg-orange-200' : 'bg-green-100 text-green-700 hover:bg-green-200' }`} > {isSessionActive ? ( <> <Pause size={12} /> Pause Session </> ) : ( <> <Play size={12} /> Start Writing </> )} </button> </div> {/* Streak & Quick Stats */} <div className="grid grid-cols-2 gap-2"> <div className="text-center p-2 bg-orange-50 rounded-lg"> <div className="flex items-center justify-center gap-1 mb-1"> <Flame size={12} className="text-orange-500" /> <span className="text-xs text-gray-600">Streak</span> </div> <div className="text-sm font-bold text-orange-600">{currentStreak}</div> </div> <div className="text-center p-2 bg-blue-50 rounded-lg"> <div className="flex items-center justify-center gap-1 mb-1"> <TrendingUp size={12} className="text-blue-500" /> <span className="text-xs text-gray-600">Today</span> </div> <div className="text-sm font-bold text-blue-600">{progressPercentage}%</div> </div> </div> {/* Motivational Message */} {progressPercentage >= 100 ? ( <div className="mt-3 text-center"> <div className="text-xs text-green-600 font-medium"> üéâ All goals completed! </div> </div> ) : ( <div className="mt-3 text-center"> <div className="text-xs text-gray-500"> {progressPercentage >= 75 ? 'Almost there! üí™' : progressPercentage >= 50 ? 'Great progress! üöÄ' : progressPercentage >= 25 ? 'Keep going! ‚úçÔ∏è' : "Let's start writing! üìù"} </div> </div> )} </div> ); }; export default SidebarGoalsWidget; 
/Users/davehail/Developer/inkwell/src/features/plotboards/components/views/SavedViewsSelector.tsx:1:// Saved views selector component for Plot Boards // Allows users to switch between, create, and manage saved views import React, { useState, useRef, useEffect } from 'react'; import { SavedViewData, SavedViewManager } from '../../views/savedViews'; interface SavedViewsSelectorProps { viewManager: SavedViewManager; currentView: SavedViewData | null; onViewChange: (_viewId: string) => void; onCreateView: (_name: string) => Promise<void>; onUpdateView: (_viewId: string, _name: string) => Promise<void>; onDeleteView: (_viewId: string) => Promise<void>; onDuplicateView: (_viewId: string) => Promise<void>; className?: string; } export const SavedViewsSelector: React.FC<SavedViewsSelectorProps> = ({ viewManager, _currentView, _onViewChange, _onCreateView, _onUpdateView, _onDeleteView, _onDuplicateView, _className = '',  }) => { const [isOpen, setIsOpen] = useState(false); const [editingViewId, setEditingViewId] = useState<string | null>(null); const [editingName, setEditingName] = useState(''); const [isCreating, setIsCreating] = useState(false); const [newViewName, setNewViewName] = useState(''); const [showManagement, setShowManagement] = useState(false); const dropdownRef = useRef<HTMLDivElement>(null); const editInputRef = useRef<HTMLInputElement>(null); // Get all views const allViews = viewManager.getAllViews(); const defaultViews = allViews.filter((v) => v.view.isDefault); const customViews = allViews.filter((v) => !v.view.isDefault); // Close dropdown when clicking outside useEffect(() => { const handleClickOutside = (_event: MouseEvent) => { if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) { setIsOpen(false); setIsCreating(false); setEditingViewId(null); setShowManagement(false); } }; document.addEventListener('mousedown', handleClickOutside); return () => document.removeEventListener('mousedown', handleClickOutside); }, []); // Focus edit input when editing starts useEffect(() => { if (editingViewId && editInputRef.current) { editInputRef.current.focus(); editInputRef.current.select(); } }, [editingViewId]); const handleViewSelect = (_viewId: string) => { onViewChange(viewId); setIsOpen(false); setShowManagement(false); }; const handleStartEditing = (_viewId: string, _currentName: string) => { setEditingViewId(viewId); setEditingName(currentName); }; const handleSaveEdit = async () => { if (editingViewId && editingName.trim()) { try { await onUpdateView(editingViewId, editingName.trim()); setEditingViewId(null); setEditingName(''); } catch (error) { console.error('Failed to update view:', error); // Could show toast notification here } } }; const handleCancelEdit = () => { setEditingViewId(null); setEditingName(''); }; const handleCreateView = async () => { if (newViewName.trim()) { try { await onCreateView(newViewName.trim()); setIsCreating(false); setNewViewName(''); setShowManagement(false); } catch (error) { console.error('Failed to create view:', error); // Could show toast notification here } } }; const handleDeleteView = async (_viewId: string) => { if (window.confirm('Are you sure you want to delete this view?')) { try { await onDeleteView(viewId); } catch (error) { console.error('Failed to delete view:', error); } } }; const handleDuplicateView = async (_viewId: string) => { try { await onDuplicateView(viewId); setShowManagement(false); } catch (error) { console.error('Failed to duplicate view:', error); } }; const handleExportView = (_viewId: string) => { const exportData = viewManager.exportView(viewId); if (exportData) { const blob = new Blob([exportData], { type: 'application/json' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = `plot-view-${viewId}.json`; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); } }; return ( <div className={`relative ${className}`} ref={dropdownRef}> {/* View Selector Button */} <button onClick={() => setIsOpen(!isOpen)} className="flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" > <svg className="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" > <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /> <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /> </svg> <span>{currentView?.view.name || 'Select View'}</span> <svg className={`w-4 h-4 text-gray-400 transition-transform ${isOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24" > <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /> </svg> </button> {/* Dropdown Menu */} {isOpen && ( <div className="absolute right-0 mt-1 w-80 bg-white border border-gray-200 rounded-md shadow-lg z-50"> {/* Header */} <div className="px-4 py-3 border-b border-gray-100"> <div className="flex items-center justify-between"> <h3 className="text-sm font-medium text-gray-900">Saved Views</h3> <div className="flex items-center space-x-2"> <button onClick={() => setShowManagement(!showManagement)} className={`text-xs px-2 py-1 rounded transition-colors ${ showManagement ? 'bg-blue-100 text-blue-700' : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100' }`} > Manage </button> <button onClick={() => setIsCreating(true)} className="text-xs text-blue-600 hover:text-blue-800" > + New </button> </div> </div> </div> {/* Views List */} <div className="max-h-80 overflow-y-auto"> {/* Default Views */} {defaultViews.length > 0 && ( <div className="py-2"> <div className="px-4 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide"> Default Views </div> {defaultViews.map((viewData) => ( <ViewItem key={viewData.view.id} viewData={viewData} isActive={currentView?.view.id === viewData.view.id} isEditing={editingViewId === viewData.view.id} editingName={editingName} showManagement={showManagement} onSelect={handleViewSelect} onStartEditing={handleStartEditing} onSaveEdit={handleSaveEdit} onCancelEdit={handleCancelEdit} onDelete={handleDeleteView} onDuplicate={handleDuplicateView} onExport={handleExportView} onEditNameChange={setEditingName} editInputRef={editInputRef} /> ))} </div> )} {/* Custom Views */} {customViews.length > 0 && ( <div className="py-2 border-t border-gray-100"> <div className="px-4 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide"> Custom Views ({customViews.length}) </div> {customViews.map((viewData) => ( <ViewItem key={viewData.view.id} viewData={viewData} isActive={currentView?.view.id === viewData.view.id} isEditing={editingViewId === viewData.view.id} editingName={editingName} showManagement={showManagement} onSelect={handleViewSelect} onStartEditing={handleStartEditing} onSaveEdit={handleSaveEdit} onCancelEdit={handleCancelEdit} onDelete={handleDeleteView} onDuplicate={handleDuplicateView} onExport={handleExportView} onEditNameChange={setEditingName} editInputRef={editInputRef} /> ))} </div> )} {/* Create New View Form */} {isCreating && ( <div className="p-4 border-t border-gray-100 bg-gray-50"> <div className="space-y-3"> <div> <label className="block text-xs font-medium text-gray-700 mb-1"> View Name </label> <input type="text" value={newViewName} onChange={(e) => setNewViewName(e.target.value)} placeholder="Enter view name..." className="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" autoFocus onKeyDown={(_e) => { if (e.key === 'Enter') { handleCreateView(); } else if (e.key === 'Escape') { setIsCreating(false); setNewViewName(''); } }} /> <p className="mt-1 text-xs text-gray-500"> This will save the current filters and settings </p> </div> <div className="flex justify-end space-x-2"> <button onClick={() => { setIsCreating(false); setNewViewName(''); }} className="px-3 py-1 text-xs text-gray-600 hover:text-gray-800" > Cancel </button> <button onClick={handleCreateView} disabled={!newViewName.trim()} className="px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed" > Create </button> </div> </div> </div> )} {/* Empty State */} {customViews.length === 0 && !isCreating && ( <div className="px-4 py-6 text-center text-sm text-gray-500"> <p>No custom views yet</p> <button onClick={() => setIsCreating(true)} className="mt-2 text-blue-600 hover:text-blue-800" > Create your first view </button> </div> )} </div> {/* Footer */} <div className="px-4 py-2 border-t border-gray-100 bg-gray-50 text-xs text-gray-500"> Views save your current filters, search, and layout settings </div> </div> )} </div> ); }; // View Item Component interface ViewItemProps { viewData: SavedViewData; isActive: boolean; isEditing: boolean; editingName: string; showManagement: boolean; onSelect: (_viewId: string) => void; onStartEditing: (_viewId: string, _name: string) => void; onSaveEdit: () => void; onCancelEdit: () => void; onDelete: (_viewId: string) => void; onDuplicate: (_viewId: string) => void; onExport: (_viewId: string) => void; onEditNameChange: (_name: string) => void; editInputRef: React.RefObject<HTMLInputElement | null>; } const ViewItem: React.FC<ViewItemProps> = ({ viewData, _isActive, _isEditing, _editingName, _showManagement, _onSelect, _onStartEditing, _onSaveEdit, _onCancelEdit, _onDelete, _onDuplicate, _onExport, _onEditNameChange, _editInputRef,  }) => { // Count active filters const activeFilters = Object.values(viewData.view.filters).reduce((count, _filter) => { if (Array.isArray(filter)) return count + filter.length; if (filter) return count + 1; return count; }, 0) + (viewData.filterContext.searchTerm ? 1 : 0); return ( <div className={`group px-4 py-2 hover:bg-gray-50 ${ isActive ? 'bg-blue-50 border-r-2 border-blue-500' : '' }`} > <div className="flex items-center justify-between"> <div className="flex-1 min-w-0"> {isEditing ? ( <div className="flex items-center space-x-2"> <input ref={editInputRef} type="text" value={editingName} onChange={(e) => onEditNameChange(e.target.value)} className="flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" onKeyDown={(_e) => { if (e.key === 'Enter') { onSaveEdit(); } else if (e.key === 'Escape') { onCancelEdit(); } }} /> <button onClick={onSaveEdit} className="text-green-600 hover:text-green-800 text-xs"> ‚úì </button> <button onClick={onCancelEdit} className="text-red-600 hover:text-red-800 text-xs"> ‚úï </button> </div> ) : ( <button onClick={() => onSelect(viewData.view.id)} className="text-left w-full"> <div className="text-sm font-medium text-gray-900 truncate"> {viewData.view.name} {isActive && <span className="ml-2 text-xs text-blue-600">‚úì</span>} </div> <div className="flex items-center space-x-2 text-xs text-gray-500"> {activeFilters > 0 && ( <span> {activeFilters} filter{activeFilters !== 1 ? 's' : ''} </span> )} {viewData.view.sorting && <span>Sort: {viewData.view.sorting.field}</span>} {viewData.view.grouping.enabled && ( <span>Group: {viewData.view.grouping.field}</span> )} {viewData.view.isDefault && ( <span className="px-1 bg-gray-200 rounded text-gray-600">Default</span> )} </div> </button> )} </div> {/* Management Actions */} {showManagement && !isEditing && ( <div className="flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity"> {!viewData.view.isDefault && ( <button onClick={() => onStartEditing(viewData.view.id, viewData.view.name)} className="text-gray-400 hover:text-gray-600 text-xs p-1" title="Rename" > ‚úèÔ∏è </button> )} <button onClick={() => onDuplicate(viewData.view.id)} className="text-gray-400 hover:text-gray-600 text-xs p-1" title="Duplicate" > üìã </button> <button onClick={() => onExport(viewData.view.id)} className="text-gray-400 hover:text-gray-600 text-xs p-1" title="Export" > üì§ </button> {!viewData.view.isDefault && ( <button onClick={() => onDelete(viewData.view.id)} className="text-gray-400 hover:text-red-600 text-xs p-1" title="Delete" > üóëÔ∏è </button> )} </div> )} </div> </div> ); };
/Users/davehail/Developer/inkwell/src/features/plotboards/components/VirtualizedColumn.tsx:325:                className="scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent"
/Users/davehail/Developer/inkwell/src/features/plotboards/components/VirtualizedColumn.tsx:421:      {/* Column Footer */}
/Users/davehail/Developer/inkwell/src/features/plotboards/components/PlotCard.tsx:140:        if (e.key === ' ' || e.key === 'Spacebar') {
/Users/davehail/Developer/inkwell/src/components/Analytics/WritingGoalsWidget.tsx:1:// Writing Goals Widget - Add to your existing analytics system // File: src/components/Analytics/WritingGoalsWidget.tsx import { Target, Flame, Timer, Trophy, CheckCircle, Settings, Star } from 'lucide-react'; import React, { useState, useEffect } from 'react'; import { useToast } from '@/context/toast'; import { useProjectStats } from '@/hooks/useProjectStats'; interface WritingGoal { id: string; type: 'daily_words' | 'daily_time' | 'weekly_words' | 'streak'; target: number; current: number; unit: 'words' | 'minutes' | 'days'; label: string; color: string; emoji: string; } interface WritingSession { date: string; wordCount: number; timeMinutes: number; completed: boolean; } interface WritingGoalsWidgetProps { className?: string; compact?: boolean; // For sidebar vs full dashboard view } const WritingGoalsWidget: React.FC<WritingGoalsWidgetProps> = ({ className = '', compact = false, }) => { const projectStatsData = useProjectStats(); // Changed from { projectStats } const { showToast } = useToast(); const [goals, setGoals] = useState<WritingGoal[]>([]); const [currentStreak, setCurrentStreak] = useState(0); const [longestStreak, setLongestStreak] = useState(0); const [todaySession, setTodaySession] = useState<WritingSession | null>(null); const [showSettings, setShowSettings] = useState(false); const [sessionTimer, setSessionTimer] = useState(0); const [isTimerRunning, setIsTimerRunning] = useState(false); // Initialize default goals useEffect(() => { updateGoalsProgress(); const defaultGoals: WritingGoal[] = [ { id: 'daily_words', type: 'daily_words', target: 500, current: 0, unit: 'words', label: 'Daily Words', color: 'text-blue-600', emoji: 'üìù', }, { id: 'daily_time', type: 'daily_time', target: 30, current: 0, unit: 'minutes', label: 'Daily Writing Time', color: 'text-green-600', emoji: '‚è∞', }, { id: 'streak', type: 'streak', target: 7, current: 0, unit: 'days', label: 'Writing Streak', color: 'text-orange-600', emoji: 'üî•', }, ]; // Load from localStorage or use defaults const savedGoals = localStorage.getItem('inkwell_writing_goals'); if (savedGoals) { setGoals(JSON.parse(savedGoals)); } else { setGoals(defaultGoals); } loadTodaySession(); loadStreakData(); }, []); // Timer effect useEffect(() => { let interval: number; // Changed from NodeJS.Timeout if (isTimerRunning) { interval = window.setInterval(() => { setSessionTimer((prev) => prev + 1); }, 1000); } return () => window.clearInterval(interval); }, [isTimerRunning]); // Update goals based on project stats useEffect(() => { if (projectStatsData) { updateGoalsProgress(); } }, [projectStatsData, todaySession, sessionTimer, currentStreak]); // Added missing dependencies const loadTodaySession = () => { const today = new Date().toISOString().split('T')[0]!; // Add ! to assert non-null const savedSession = localStorage.getItem(`inkwell_session_${today}`); if (savedSession) { setTodaySession(JSON.parse(savedSession)); } else { const newSession: WritingSession = { date: today, wordCount: 0, timeMinutes: 0, completed: false, }; setTodaySession(newSession); localStorage.setItem(`inkwell_session_${today}`, JSON.stringify(newSession)); } }; const loadStreakData = () => { const savedStreak = localStorage.getItem('inkwell_writing_streak'); const savedLongest = localStorage.getItem('inkwell_longest_streak'); if (savedStreak) setCurrentStreak(parseInt(savedStreak)); if (savedLongest) setLongestStreak(parseInt(savedLongest)); }; const updateGoalsProgress = () => { if (!projectStatsData || !todaySession) return; // Adapt to your actual projectStats interface const todayWords = projectStatsData.wordCount || 0; // Use wordCount directly const todayMinutes = Math.floor(sessionTimer / 60) + todaySession.timeMinutes; setGoals((prevGoals) => prevGoals.map((goal) => { switch (goal.type) { case 'daily_words': return { ...goal, current: todayWords }; case 'daily_time': return { ...goal, current: todayMinutes }; case 'streak': return { ...goal, current: currentStreak }; default: return goal; } }), ); }; const startWritingSession = () => { setIsTimerRunning(true); showToast('Writing session started! üöÄ', 'success'); }; const pauseWritingSession = () => { setIsTimerRunning(false); saveTodaySession(); showToast('Session paused ‚è∏Ô∏è', 'info'); }; const completeWritingSession = () => { setIsTimerRunning(false); saveTodaySession(); checkGoalCompletion(); updateStreak(); showToast('Great writing session! üéâ', 'success'); }; const saveTodaySession = () => { if (!todaySession) return; const updatedSession = { ...todaySession, timeMinutes: Math.floor(sessionTimer / 60) + todaySession.timeMinutes, wordCount: projectStatsData?.wordCount || 0, // Fixed: use projectStatsData }; setTodaySession(updatedSession); localStorage.setItem(`inkwell_session_${updatedSession.date}`, JSON.stringify(updatedSession)); }; const checkGoalCompletion = () => { goals.forEach((goal) => { if (goal.current >= goal.target && !todaySession?.completed) { showToast(`üéâ ${goal.emoji} ${goal.label} completed!`, 'success'); // Trigger celebration animation celebrateGoalCompletion(goal); } }); }; const celebrateGoalCompletion = (goal: WritingGoal) => { // Add confetti or celebration animation here console.log(`Goal completed: ${goal.label}`); }; const updateStreak = () => { const allGoalsCompleted = goals.every((goal) => goal.current >= goal.target); if (allGoalsCompleted && !todaySession?.completed) { const newStreak = currentStreak + 1; setCurrentStreak(newStreak); if (newStreak > longestStreak) { setLongestStreak(newStreak); localStorage.setItem('inkwell_longest_streak', newStreak.toString()); showToast(`üèÜ New longest streak: ${newStreak} days!`, 'success'); } localStorage.setItem('inkwell_writing_streak', newStreak.toString()); if (todaySession) { const completedSession = { ...todaySession, completed: true }; setTodaySession(completedSession); localStorage.setItem( `inkwell_session_${completedSession.date}`, JSON.stringify(completedSession), ); } } }; const updateGoalTarget = (goalId: string, newTarget: number) => { setGoals((prev) => prev.map((goal) => (goal.id === goalId ? { ...goal, target: newTarget } : goal)), ); localStorage.setItem('inkwell_writing_goals', JSON.stringify(goals)); }; const formatTime = (seconds: number) => { const mins = Math.floor(seconds / 60); const secs = seconds % 60; return `${mins}:${secs.toString().padStart(2, '0')}`; }; const getProgressPercentage = (current: number, target: number) => { return Math.min((current / target) * 100, 100); }; if (compact) { // Compact sidebar version return ( <div className={`bg-white rounded-lg border border-gray-200 p-4 ${className}`} > <div className="flex items-center justify-between mb-3"> <h3 className="font-medium text-gray-900 flex items-center gap-2"> <Target size={16} /> Today's Goals </h3> <button onClick={() => setShowSettings(!showSettings)} className="p-1 hover:bg-gray-100 rounded" > <Settings size={14} /> </button> </div> <div className="space-y-3"> {goals.slice(0, 2).map((goal) => { const percentage = getProgressPercentage(goal.current, goal.target); return ( <div key={goal.id} className="space-y-1"> <div className="flex items-center justify-between text-sm"> <span className="flex items-center gap-1"> <span>{goal.emoji}</span> <span className="text-gray-600">{goal.label}</span> </span> <span className={`font-medium ${goal.color}`}> {goal.current}/{goal.target} </span> </div> <div className="w-full bg-gray-200 rounded-full h-2"> <div className={`h-2 rounded-full transition-all duration-500 ${ percentage >= 100 ? 'bg-green-500' : 'bg-blue-500' }`} style={{ width: `${percentage}%` }} /> </div> </div> ); })} {/* Streak indicator */} <div className="flex items-center justify-between pt-2 border-t border-gray-200"> <div className="flex items-center gap-2"> <Flame size={16} className="text-orange-500" /> <span className="text-sm text-gray-600">Streak</span> </div> <span className="font-bold text-orange-600">{currentStreak} days</span> </div> {/* Quick session timer */} <div className="flex items-center gap-2 pt-2"> <Timer size={14} className="text-green-500" /> <span className="text-sm font-mono">{formatTime(sessionTimer)}</span> <button onClick={isTimerRunning ? pauseWritingSession : startWritingSession} className={`ml-auto px-2 py-1 text-xs rounded ${ isTimerRunning ? 'bg-orange-100 text-orange-700 hover:bg-orange-200' : 'bg-green-100 text-green-700 hover:bg-green-200' }`} > {isTimerRunning ? 'Pause' : 'Start'} </button> </div> </div> </div> ); } // Full dashboard version return ( <div className={`bg-white rounded-lg border border-gray-200 p-6 ${className}`} > {/* Header */} <div className="flex items-center justify-between mb-6"> <h2 className="text-xl font-semibold text-gray-900 flex items-center gap-2"> <Target className="text-blue-600" /> Writing Goals </h2> <div className="flex items-center gap-2"> <div className="flex items-center gap-1 px-3 py-1 bg-orange-100 rounded-full"> <Flame size={16} className="text-orange-500" /> <span className="text-sm font-medium text-orange-700"> {currentStreak} day streak </span> </div> <button onClick={() => setShowSettings(!showSettings)} className="p-2 hover:bg-gray-100 rounded-lg" > <Settings size={16} /> </button> </div> </div> {/* Goals Grid */} <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"> {goals.map((goal) => { const percentage = getProgressPercentage(goal.current, goal.target); const isCompleted = percentage >= 100; return ( <div key={goal.id} className={`p-4 rounded-lg border-2 transition-all ${ isCompleted ? 'border-green-300 bg-green-50' : 'border-gray-200 bg-gray-50' }`} > <div className="flex items-center justify-between mb-2"> <span className="text-2xl">{goal.emoji}</span> {isCompleted && <CheckCircle className="text-green-600" size={20} />} </div> <h3 className="font-medium text-gray-900 mb-1">{goal.label}</h3> <div className="flex items-end gap-1 mb-3"> <span className={`text-2xl font-bold ${goal.color}`}>{goal.current}</span> <span className="text-gray-500"> / {goal.target} {goal.unit} </span> </div> <div className="w-full bg-gray-200 rounded-full h-2 mb-2"> <div className={`h-2 rounded-full transition-all duration-700 ${ isCompleted ? 'bg-green-500' : 'bg-blue-500' }`} style={{ width: `${percentage}%` }} /> </div> <div className="text-sm text-gray-600"> {percentage.toFixed(0)}% complete </div> </div> ); })} </div> {/* Session Timer */} <div className="bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-4 mb-6"> <div className="flex items-center justify-between"> <div> <h3 className="font-medium text-gray-900 flex items-center gap-2"> <Timer className="text-blue-600" /> Writing Session </h3> <p className="text-sm text-gray-600"> Track your focused writing time </p> </div> <div className="text-right"> <div className="text-3xl font-mono font-bold text-gray-900"> {formatTime(sessionTimer)} </div> <div className="flex gap-2 mt-2"> <button onClick={isTimerRunning ? pauseWritingSession : startWritingSession} className={`px-4 py-2 rounded-lg font-medium transition-colors ${ isTimerRunning ? 'bg-orange-500 hover:bg-orange-600 text-white' : 'bg-green-500 hover:bg-green-600 text-white' }`} > {isTimerRunning ? 'Pause' : 'Start Writing'} </button> {sessionTimer > 0 && ( <button onClick={completeWritingSession} className="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium" > Complete </button> )} </div> </div> </div> </div> {/* Achievements */} <div className="grid grid-cols-1 md:grid-cols-2 gap-4"> <div className="p-4 bg-yellow-50 rounded-lg"> <h4 className="font-medium text-gray-900 flex items-center gap-2 mb-2"> <Trophy className="text-yellow-600" size={16} /> Best Streak </h4> <div className="text-2xl font-bold text-yellow-600">{longestStreak} days</div> </div> <div className="p-4 bg-purple-50 rounded-lg"> <h4 className="font-medium text-gray-900 flex items-center gap-2 mb-2"> <Star className="text-purple-600" size={16} /> Today's Progress </h4> <div className="text-2xl font-bold text-purple-600"> {Math.round( goals.reduce( (acc, goal) => acc + getProgressPercentage(goal.current, goal.target), 0, ) / goals.length, )} % </div> </div> </div> {/* Goal Settings Modal */} {showSettings && ( <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50"> <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4"> <h3 className="text-lg font-semibold mb-4">Goal Settings</h3> <div className="space-y-4"> {goals.map((goal) => ( <div key={goal.id} className="flex items-center justify-between"> <span className="flex items-center gap-2"> <span>{goal.emoji}</span> <span>{goal.label}</span> </span> <input type="number" value={goal.target} onChange={(e) => updateGoalTarget(goal.id, parseInt(e.target.value) || 0)} className="w-20 px-2 py-1 border rounded text-center" min="1" /> </div> ))} </div> <div className="flex gap-2 mt-6"> <button onClick={() => setShowSettings(false)} className="flex-1 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg" > Cancel </button> <button onClick={() => { localStorage.setItem('inkwell_writing_goals', JSON.stringify(goals)); setShowSettings(false); showToast('Goals updated! üéØ', 'success'); }} className="flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg" > Save Goals </button> </div> </div> </div> )} </div> ); }; export default WritingGoalsWidget; 
/Users/davehail/Developer/inkwell/src/features/plotboards/components/PlotColumn.tsx:239:      {/* Progress Bar */}
/Users/davehail/Developer/inkwell/src/features/plotboards/components/PlotColumn.tsx:351:      {/* Column Footer */}
/Users/davehail/Developer/inkwell/src/features/plotboards/hooks/useKeyboardNavigation.ts:172:        case 'Spacebar':
/Users/davehail/Developer/inkwell/src/features/plotboards/components/Insights/PlotAnalysisPanel.tsx:135:          {/* Issues List */} <IssuesList issues={analysis.issues} /> {/* Footer Info */}{' '}
/Users/davehail/Developer/inkwell/src/components/Onboarding/tour-core/spotlightSteps.ts:19:    id: 'sidebar-navigation',
/Users/davehail/Developer/inkwell/src/components/Onboarding/tour-core/spotlightSteps.ts:25:    id: 'editor-toolbar',
/Users/davehail/Developer/inkwell/src/components/Onboarding/tour-core/spotlightSteps.ts:26:    target: '[data-tour="editor-tools"], .editor-toolbar',
/Users/davehail/Developer/inkwell/src/features/plotboards/components/filters/FilterPanel.tsx:1:// Filter panel component for Plot Boards // Provides intuitive interface for filtering and searching cards import React, { useState, useCallback, useMemo } from 'react'; import { PlotCardFilterEngine, FilterContext, PRESET_FILTERS } from '../../filters/filtering'; import { PlotBoardFilters, PlotCardStatus, PlotCardPriority } from '../../types'; interface FilterPanelProps { filters: PlotBoardFilters; filterContext: FilterContext; filterStats: { availableStatuses: { value: PlotCardStatus; count: number; label: string }[]; availablePriorities: { value: PlotCardPriority; count: number; label: string }[]; availableTags: { value: string; count: number }[]; availableChapters: { value: string; count: number; title: string }[]; dateRange: { earliest: Date; latest: Date } | null; }; onFiltersChange: (_filters: PlotBoardFilters) => void; onContextChange: (_context: FilterContext) => void; onClearAll: () => void; isExpanded: boolean; onToggleExpanded: () => void; resultCount?: number; totalCount?: number; } export const FilterPanel: React.FC<FilterPanelProps> = ({ filters, _filterContext, _filterStats, _onFiltersChange, _onContextChange, _onClearAll, _isExpanded, _onToggleExpanded, _resultCount = 0, _totalCount = 0,  }) => { const [activeTab, setActiveTab] = useState<'filters' | 'search' | 'presets'>('filters'); // Calculate active filter count const activeFilterCount = useMemo(() => { const engine = new PlotCardFilterEngine(filters, filterContext); return engine.getActiveFilterCount(); }, [filters, filterContext]); // Handle status filter changes const handleStatusChange = useCallback( (status: PlotCardStatus, _checked: boolean) => { const currentStatuses = filters.statuses || []; const newStatuses = checked ? [...currentStatuses, status] : currentStatuses.filter((s) => s !== status); onFiltersChange({ ...filters, statuses: newStatuses }); }, [filters, onFiltersChange], ); // Handle priority filter changes const handlePriorityChange = useCallback( (priority: PlotCardPriority, _checked: boolean) => { const currentPriorities = filters.priorities || []; const newPriorities = checked ? [...currentPriorities, priority] : currentPriorities.filter((p) => p !== priority); onFiltersChange({ ...filters, priorities: newPriorities }); }, [filters, onFiltersChange], ); // Handle tag filter changes const handleTagChange = useCallback( (tag: string, _checked: boolean) => { const currentTags = filters.tags || []; const newTags = checked ? [...currentTags, tag] : currentTags.filter((t) => t !== tag); onFiltersChange({ ...filters, tags: newTags }); }, [filters, onFiltersChange], ); // Handle chapter filter changes const _handleChapterChange = useCallback( (chapterId: string, _checked: boolean) => { const currentChapters = filters.chapters || []; const newChapters = checked ? [...currentChapters, chapterId] : currentChapters.filter((c) => c !== chapterId); onFiltersChange({ ...filters, chapters: newChapters }); }, [filters, onFiltersChange], ); // Handle date range changes const handleDateRangeChange = useCallback( (from: string, _to: string) => { const dateRange = from && to ? { from: new Date(from), to: new Date(to), } : undefined; onFiltersChange({ ...filters, dateRange }); }, [filters, onFiltersChange], ); // Handle search term change const handleSearchChange = useCallback( (searchTerm: string) => { onContextChange({ ...filterContext, searchTerm }); }, [filterContext, onContextChange], ); // Handle preset filter application const handlePresetApply = useCallback( (presetKey: keyof typeof PRESET_FILTERS) => { const presetEngine = PRESET_FILTERS[presetKey](); const presetConfig = presetEngine.exportConfig(); onFiltersChange(presetConfig.filters); onContextChange(presetConfig.context); }, [onFiltersChange, onContextChange], ); // Handle clear specific filter const handleClearFilter = useCallback( (filterType: keyof PlotBoardFilters | 'search') => { if (filterType === 'search') { onContextChange({ ...filterContext, searchTerm: undefined }); } else if (filterType === 'dateRange') { onFiltersChange({ ...filters, dateRange: undefined }); } else if (Array.isArray(filters[filterType])) { onFiltersChange({ ...filters, [filterType]: [] }); } }, [filters, filterContext, onFiltersChange, onContextChange], ); return ( <div className="bg-white border-b border-gray-200"> {/* Filter Bar */} <div className="px-4 py-3 flex items-center justify-between"> <div className="flex items-center space-x-4"> <button onClick={onToggleExpanded} className="flex items-center space-x-2 text-sm font-medium text-gray-700 hover:text-gray-900" > <svg className={`w-4 h-4 transition-transform ${isExpanded ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24" > <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /> </svg> <span>Filters</span> {activeFilterCount > 0 && ( <span className="bg-blue-600 text-white text-xs rounded-full px-2 py-1"> {activeFilterCount} </span> )} </button> {/* Quick Search */} <div className="relative"> <input type="text" placeholder="Search cards..." value={filterContext.searchTerm || ''} onChange={(_e) => handleSearchChange(e.target.value)} className="w-64 pl-8 pr-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" /> <svg className="absolute left-2.5 top-2.5 h-3 w-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" > <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /> </svg> </div> </div> <div className="flex items-center space-x-4"> {/* Result Count */} <span className="text-sm text-gray-600"> {resultCount === totalCount ? `${totalCount} cards` : `${resultCount} of ${totalCount} cards`} </span> {/* Clear All */} {activeFilterCount > 0 && ( <button onClick={onClearAll} className="text-sm text-red-600 hover:text-red-800"> Clear all </button> )} </div> </div> {/* Expanded Filter Panel */} {isExpanded && ( <div className="px-4 pb-4 border-t border-gray-100"> {/* Tab Navigation */} <div className="flex space-x-1 mb-4 mt-4"> {[ { key: 'filters' as const, _label: 'Filters', _icon: 'üîç' },  { key: 'search' as const, _label: 'Search', _icon: 'üìù' },  { key: 'presets' as const, _label: 'Presets', _icon: '‚≠ê' },  ].map((tab) => ( <button key={tab.key} onClick={() => setActiveTab(tab.key)} className={`px-3 py-2 text-sm font-medium rounded-md transition-colors ${ activeTab === tab.key ? 'bg-blue-100 text-blue-700' : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50' }`} > <span className="mr-1">{tab.icon}</span> {tab.label} </button> ))} </div> {/* Filter Content */} <div className="space-y-6"> {activeTab === 'filters' && ( <div className="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6"> {/* Status Filters */} {filterStats.availableStatuses.length > 0 && ( <div> <div className="flex items-center justify-between mb-3"> <label className="text-sm font-medium text-gray-900">Status</label> {(filters.statuses || []).length > 0 && ( <button onClick={() => handleClearFilter('statuses')} className="text-xs text-gray-500 hover:text-gray-700" > Clear </button> )} </div> <div className="space-y-2"> {filterStats.availableStatuses.map((status) => ( <label key={status.value} className="flex items-center"> <input type="checkbox" checked={(filters.statuses || []).includes(status.value)} onChange={(_e) => handleStatusChange(status.value, e.target.checked)} className="rounded border-gray-300 text-blue-600 focus:ring-blue-500" /> <span className="ml-2 text-sm text-gray-700"> {status.label} ({status.count}) </span> </label> ))} </div> </div> )} {/* Priority Filters */} {filterStats.availablePriorities.length > 0 && ( <div> <div className="flex items-center justify-between mb-3"> <label className="text-sm font-medium text-gray-900">Priority</label> {(filters.priorities || []).length > 0 && ( <button onClick={() => handleClearFilter('priorities')} className="text-xs text-gray-500 hover:text-gray-700" > Clear </button> )} </div> <div className="space-y-2"> {filterStats.availablePriorities.map((priority) => ( <label key={priority.value} className="flex items-center"> <input type="checkbox" checked={(filters.priorities || []).includes(priority.value)} onChange={(_e) => handlePriorityChange(priority.value, e.target.checked)} className="rounded border-gray-300 text-blue-600 focus:ring-blue-500" /> <span className="ml-2 text-sm text-gray-700 flex items-center"> <PriorityIndicator priority={priority.value} /> {priority.label} ({priority.count}) </span> </label> ))} </div> </div> )} {/* Tag Filters */} {filterStats.availableTags.length > 0 && ( <div> <div className="flex items-center justify-between mb-3"> <label className="text-sm font-medium text-gray-900">Tags</label> {(filters.tags || []).length > 0 && ( <button onClick={() => handleClearFilter('tags')} className="text-xs text-gray-500 hover:text-gray-700" > Clear </button> )} </div> <div className="max-h-32 overflow-y-auto space-y-2"> {filterStats.availableTags.slice(0, 10).map((tag) => ( <label key={tag.value} className="flex items-center"> <input type="checkbox" checked={(filters.tags || []).includes(tag.value)} onChange={(_e) => handleTagChange(tag.value, e.target.checked)} className="rounded border-gray-300 text-blue-600 focus:ring-blue-500" /> <span className="ml-2 text-sm text-gray-700"> #{tag.value} ({tag.count}) </span> </label> ))} {filterStats.availableTags.length > 10 && ( <p className="text-xs text-gray-500 mt-2"> +{filterStats.availableTags.length - 10} more tags </p> )} </div> </div> )} {/* Date Range Filter */} {filterStats.dateRange && ( <div> <div className="flex items-center justify-between mb-3"> <label className="text-sm font-medium text-gray-900">Updated Date</label> {filters.dateRange && ( <button onClick={() => handleClearFilter('dateRange')} className="text-xs text-gray-500 hover:text-gray-700" > Clear </button> )} </div> <div className="space-y-2"> <input type="date" value={filters.dateRange?.from.toISOString().split('T')[0] || ''} min={filterStats.dateRange.earliest.toISOString().split('T')[0]} max={filterStats.dateRange.latest.toISOString().split('T')[0]} onChange={(_e) => handleDateRangeChange( e.target.value, filters.dateRange?.to.toISOString().split('T')[0] || e.target.value, ) } className="w-full px-3 py-1 text-sm border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" placeholder="From" /> <input type="date" value={filters.dateRange?.to.toISOString().split('T')[0] || ''} min={ filters.dateRange?.from.toISOString().split('T')[0] || filterStats.dateRange.earliest.toISOString().split('T')[0] } max={filterStats.dateRange.latest.toISOString().split('T')[0]} onChange={(_e) => handleDateRangeChange( filters.dateRange?.from.toISOString().split('T')[0] || e.target.value, e.target.value, ) } className="w-full px-3 py-1 text-sm border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" placeholder="To" /> </div> </div> )} </div> )} {activeTab === 'search' && ( <div className="max-w-lg space-y-4"> <div> <label className="block text-sm font-medium text-gray-900 mb-2"> Search Term </label> <input type="text" value={filterContext.searchTerm || ''} onChange={(e) => handleSearchChange(e.target.value)} className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Enter search term..." /> <p className="mt-1 text-xs text-gray-500"> Search in card titles, descriptions, tags, and notes </p> </div> <div className="space-y-3"> <label className="flex items-center"> <input type="checkbox" checked={!filterContext.caseSensitive} onChange={(_e) => onContextChange({ ...filterContext, caseSensitive: !e.target.checked, }) } className="rounded border-gray-300 text-blue-600 focus:ring-blue-500" /> <span className="ml-2 text-sm text-gray-700">Case insensitive</span> </label> <label className="flex items-center"> <input type="checkbox" checked={filterContext.includeDescriptions !== false} onChange={(_e) => onContextChange({ ...filterContext, includeDescriptions: e.target.checked, }) } className="rounded border-gray-300 text-blue-600 focus:ring-blue-500" /> <span className="ml-2 text-sm text-gray-700">Search descriptions</span> </label> <label className="flex items-center"> <input type="checkbox" checked={filterContext.includeNotes !== false} onChange={(_e) => onContextChange({ ...filterContext, includeNotes: e.target.checked, }) } className="rounded border-gray-300 text-blue-600 focus:ring-blue-500" /> <span className="ml-2 text-sm text-gray-700">Search notes</span> </label> </div> </div> )} {activeTab === 'presets' && ( <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"> {Object.entries(PRESET_FILTERS).map(([key,  presetFn]) => { const presetEngine = presetFn(); const _presetConfig = presetEngine.exportConfig(); return ( <button key={key} onClick={() => handlePresetApply(key as keyof typeof PRESET_FILTERS)} className="p-4 text-left border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors" > <div className="font-medium text-sm text-gray-900 mb-1 capitalize"> {key.replace(/([A-Z])/g, ' $1').trim()} </div> <div className="text-xs text-gray-600"> {presetEngine.getActiveFilterCount()} filters active </div> </button> ); })} </div> )} </div> </div> )} {/* Active Filters Summary */} {activeFilterCount > 0 && !isExpanded && ( <div className="px-4 py-2 bg-blue-50 border-t border-blue-100"> <div className="flex flex-wrap gap-2"> {(filters.statuses || []).map((status) => ( <FilterChip key={`status-${status}`} label={`Status: ${status.replace('_', ' ')}`} onRemove={() => handleStatusChange(status, false)} /> ))} {(filters.priorities || []).map((priority) => ( <FilterChip key={`priority-${priority}`} label={`Priority: ${priority}`} onRemove={() => handlePriorityChange(priority, false)} /> ))} {(filters.tags || []).slice(0, 3).map((tag) => ( <FilterChip key={`tag-${tag}`} label={`Tag: ${tag}`} onRemove={() => handleTagChange(tag, false)} /> ))} {(filters.tags || []).length > 3 && ( <span className="text-xs text-gray-600 px-2 py-1"> +{(filters.tags || []).length - 3} more tags </span> )} {filterContext.searchTerm && ( <FilterChip label={`Search: "${filterContext.searchTerm}"`} onRemove={() => handleSearchChange('')} /> )} </div> </div> )} </div> ); }; // Helper Components const PriorityIndicator: React.FC<{ priority: PlotCardPriority }> = ({ priority }) => { const colors = { low: 'text-gray-400', medium: 'text-blue-400', high: 'text-orange-400', critical: 'text-red-500', }; return <span className={`mr-1 ${colors[priority]}`}>‚óè</span>; }; const FilterChip: React.FC<{ label: string; onRemove: () => void; }> = ({ label,  onRemove }) => ( <span className="inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800"> {label} <button onClick={onRemove} className="ml-1 text-blue-600 hover:text-blue-800"> √ó </button> </span> );
/Users/davehail/Developer/inkwell/src/utils/safeRedirect.ts:9:  // Allow only root-relative paths like "/foo" (with optional ?query and #hash)
/Users/davehail/Developer/inkwell/src/tour/variants/exportTour.ts:13:    content: 'Click the Export button in the top bar to access export options.',
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:1:// File: src/components/Sidebar.test.tsx
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:8:import { Sidebar } from './Sidebar';
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:50:describe('Sidebar Component', () => {
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:61:      sidebarCollapsed: Boolean(opts?.uiCollapsed),
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:62:      toggleSidebar: opts?.toggle ?? vi.fn(),
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:66:        <Sidebar />
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:78:    // Label text should match actual button labels in Sidebar
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:98:    // Match the actual active classes used in Sidebar (updated to brand colors)
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:105:    const toggleSidebar = vi.fn();
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:106:    renderWithProviders({ uiCollapsed: false, toggle: toggleSidebar });
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:108:    const toggleButton = screen.getByRole('button', { name: /collapse sidebar/i });
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:110:    expect(toggleSidebar).toHaveBeenCalled();
/Users/davehail/Developer/inkwell/src/components/Sidebar.test.tsx:130:      // Scope to nav to avoid matching the footer "Current: dashboard"
/Users/davehail/Developer/inkwell/src/components/Modals/ShortcutsModal.tsx:100:          {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/ExportDialog.tsx:273:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/tour/getSpotlightSteps.ts:39:      target: target(['[data-tour-id="topbar"]', 'header[role="banner"]', '#app-topbar', 'header']),
/Users/davehail/Developer/inkwell/src/tour/getSpotlightSteps.ts:47:      target: target(['[data-tour-id="sidebar"]', 'aside[role="navigation"]', 'nav.sidebar']),
/Users/davehail/Developer/inkwell/src/tour/getSpotlightSteps.ts:50:        'Use the sidebar to navigate between different parts of your project: Dashboard, Writing, Planning, Timeline, Plot Analysis, Analytics, and Settings.',
/Users/davehail/Developer/inkwell/src/tour/getSpotlightSteps.ts:131:      target: target(['[data-tour-id="topbar"]', 'header[role="banner"]', '#app-topbar', 'header']),
/Users/davehail/Developer/inkwell/src/__tests__/smoke/brand-ui.test.tsx:112:      const TestSidebar = () => {
/Users/davehail/Developer/inkwell/src/__tests__/smoke/brand-ui.test.tsx:130:      render(<TestSidebar />);
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:15:export type TopbarProps = {
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:45:export default function Topbar({
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:55:}: TopbarProps) {
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:112:      data-tour-id="topbar"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:113:      className="Topbar sticky top-0 z-30 flex items-center justify-between h-14 px-4 border-b border-[#1C3A63] bg-[#0F2D52]/95 backdrop-blur text-white"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:114:      data-spotlight-id="topbar.container"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:132:          className="topbar-btn text-white hover:bg-white/10 px-3 py-1 rounded-md transition-colors"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:141:          className="topbar-icon text-white hover:bg-white/10 p-2 rounded-md transition-colors"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:145:          data-spotlight-id="topbar.commandPalette"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:153:          className="topbar-icon text-white hover:bg-white/10 p-2 rounded-md transition-colors"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:156:          data-spotlight-id="topbar.commandPalette"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:164:          className="topbar-icon text-white hover:bg-white/10 p-2 rounded-md transition-colors"
/Users/davehail/Developer/inkwell/src/components/Topbar.tsx:167:          data-spotlight-id="topbar.notifications"
/Users/davehail/Developer/inkwell/src/components/ProjectBrowser/EnhancedProjectBrowser.tsx:1:// src/components/ProjectBrowser/EnhancedProjectBrowser.tsx import { useVirtualizer } from '@tanstack/react-virtual'; import { Search, Filter, Star, StarOff, Heart, Clock, FileText, MoreVertical, Copy, Edit3, Trash2, Download, Tag, Plus, X, Calendar, BarChart3, BookOpen, Zap, } from 'lucide-react'; import React, { useState, useRef, useEffect } from 'react'; import { useAppContext, View } from '@/context/AppContext'; import { useDebouncedSearch } from '@/hooks/useDebounced'; import { useVirtualListPerformance } from '@/hooks/usePerformanceMonitor'; import { useProjectMetadata, formatTimeSpent, getRelativeTimeString, getProjectColorClass, } from '@/hooks/useProjectMetadata'; import { useProjectSearch } from '@/hooks/useProjectSearch'; import { Project } from '../../domain/types'; interface EnhancedProjectBrowserProps { onProjectSelect?: (project: Project) => void; compact?: boolean; } const EnhancedProjectBrowser: React.FC<EnhancedProjectBrowserProps> = ({ onProjectSelect, compact = false, }) => { const { state, currentProject, setCurrentProjectId, updateProject, deleteProject, dispatch } = useAppContext(); const { getProjectMetadata, toggleFavorite, addTag, removeTag, getAllTags: _getAllTags, recordProjectOpen, } = useProjectMetadata(); // Debounced search for better performance const { query, debouncedQuery, isSearching, setQuery } = useDebouncedSearch('', 300); const { results, filters, filterOptions, setQuery: setSearchQuery, toggleTag: toggleFilterTag, toggleGenre, toggleFavorites, clearFilters, setSorting, applyQuickFilter, searchStats, } = useProjectSearch(state.projects as any); const [showFilters, setShowFilters] = useState(false); const [contextMenu, setContextMenu] = useState<{ project: Project; x: number; y: number; } | null>(null); const [tagInput, setTagInput] = useState(''); const [editingTags, setEditingTags] = useState<string | null>(null); const contextMenuRef = useRef<HTMLDivElement>(null); const tagInputRef = useRef<HTMLInputElement>(null); const parentRef = useRef<HTMLDivElement>(null); // Calculate columns and rows for virtualization const columnsCount = compact ? 1 : 3; // For grid layout const rowCount = Math.ceil(results.length / columnsCount); const estimatedRowHeight = compact ? 200 : 300; // Estimated height per row // Performance monitoring const { startRenderMeasure, endRenderMeasure, measureVirtualScroll, getVirtualListSummary: _getVirtualListSummary, } = useVirtualListPerformance(results.length, rowCount, { enabled: process.env.NODE_ENV === 'development', logToConsole: false, sampleRate: 0.2, }); // Virtualizer for project grid const rowVirtualizer = useVirtualizer({ count: rowCount, getScrollElement: () => parentRef.current, estimateSize: () => estimatedRowHeight, overscan: 2, }); // Sync debounced query with search service useEffect(() => { setSearchQuery(debouncedQuery); }, [debouncedQuery, setSearchQuery]); // Setup scroll performance monitoring useEffect(() => { const cleanup = measureVirtualScroll(parentRef.current); return cleanup; }, [measureVirtualScroll]); // Close context menu when clicking outside useEffect(() => { const handleClickOutside = (event: MouseEvent) => { if (contextMenuRef.current && !contextMenuRef.current.contains(event.target as Node)) { setContextMenu(null); } }; if (contextMenu) { document.addEventListener('mousedown', handleClickOutside); } return () => { document.removeEventListener('mousedown', handleClickOutside); }; }, [contextMenu]); // Focus tag input when editing starts useEffect(() => { if (editingTags && tagInputRef.current) { tagInputRef.current.focus(); } }, [editingTags]); const handleProjectClick = (project: Project) => { recordProjectOpen(project.id); setCurrentProjectId(project.id); onProjectSelect?.(project); dispatch({ type: 'SET_VIEW', payload: View.Writing }); }; const handleContextMenu = (e: React.MouseEvent, project: Project) => { e.preventDefault(); e.stopPropagation(); setContextMenu({ project, x: e.clientX, y: e.clientY, }); }; const handleProjectAction = (action: string, project: Project) => { setContextMenu(null); switch (action) { case 'favorite': toggleFavorite(project.id); break; case 'duplicate': // TODO: Implement duplicate functionality console.log('Duplicate project:', project.name); break; case 'rename': const newName = prompt('Enter new project name:', project.name); if (newName && newName.trim() && newName !== project.name) { updateProject({ ...project, name: newName.trim(), updatedAt: new Date(), } as any); } break; case 'delete': const confirmed = confirm( `Are you sure you want to delete "${project.name}"? This cannot be undone.`, ); if (confirmed) { deleteProject(project.id); } break; case 'export': // TODO: Implement export functionality console.log('Export project:', project.name); break; case 'edit-tags': setEditingTags(project.id); break; } }; const handleAddTag = (projectId: string, tag: string) => { if (tag.trim()) { addTag(projectId, tag.trim()); } setTagInput(''); setEditingTags(null); }; const handleTagKeyPress = (e: React.KeyboardEvent, projectId: string) => { if (e.key === 'Enter') { handleAddTag(projectId, tagInput); } else if (e.key === 'Escape') { setTagInput(''); setEditingTags(null); } }; const getProjectWordCount = (project: Project): number => { return project.metadata?.totalWordCount || 0; }; const getGenreIcon = (genre: string) => { const genreIcons: Record<string, React.ElementType> = { Mystery: Zap, Romance: Heart, 'Science Fiction': BookOpen, Fantasy: Star, Thriller: FileText, }; return genreIcons[genre] || FileText; }; const renderProjectCard = (result: { project: Project; relevanceScore: number; matchedFields: string[]; }) => { startRenderMeasure(); const { project, matchedFields } = result; const metadata = getProjectMetadata(project.id); const wordCount = getProjectWordCount(project); const genre = project.metadata?.genre; const GenreIcon = genre ? getGenreIcon(genre) : FileText; const cardElement = ( <div key={project.id} className={`group card card-interactive p-4 ${ currentProject?.id === project.id ? 'ring-2 ring-primary-500' : '' }`} onClick={() => handleProjectClick(project)} onContextMenu={(e) => handleContextMenu(e, project)} > {/* Header */} <div className="flex items-start justify-between mb-3"> <div className="flex items-start gap-3 flex-1 min-w-0"> {/* Project Icon/Color */} <div className={`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${getProjectColorClass(metadata.customColor)}`} > <GenreIcon className="w-5 h-5 text-slate-600" /> </div> {/* Project Info */} <div className="flex-1 min-w-0"> <div className="flex items-center gap-2 mb-1"> <h3 className="font-semibold text-slate-900 truncate"> {project.name} </h3> {metadata.isFavorite && ( <Star className="w-4 h-4 text-yellow-500 fill-current flex-shrink-0" /> )} </div> {project.description && ( <p className="text-sm text-slate-600 line-clamp-2 mb-2"> {project.description} </p> )} {/* Tags */} {metadata.tags.length > 0 && ( <div className="flex flex-wrap gap-1 mb-2"> {metadata.tags.slice(0, 3).map((tag) => ( <span key={tag} className="inline-flex items-center px-2 py-1 rounded-full text-xs bg-primary-100 text-primary-700" > {tag} </span> ))} {metadata.tags.length > 3 && ( <span className="text-xs text-slate-500">+{metadata.tags.length - 3}</span> )} </div> )} </div> </div> {/* Actions */} <div className="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity"> <button onClick={(e) => { e.stopPropagation(); toggleFavorite(project.id); }} className="p-1 text-slate-400 hover:text-yellow-500 transition-colors" title={metadata.isFavorite ? 'Remove from favorites' : 'Add to favorites'} > {metadata.isFavorite ? ( <Star className="w-4 h-4 fill-current" /> ) : ( <StarOff className="w-4 h-4" /> )} </button> <button onClick={(e) => handleContextMenu(e, project)} className="p-1 text-slate-400 hover:text-slate-600 transition-colors" > <MoreVertical className="w-4 h-4" /> </button> </div> </div> {/* Stats */} <div className="grid grid-cols-2 gap-4 text-xs text-slate-500 mb-3"> <div className="flex items-center gap-2"> <FileText className="w-3 h-3" /> <span>{wordCount.toLocaleString()} words</span> </div> <div className="flex items-center gap-2"> <Clock className="w-3 h-3" /> <span>{getRelativeTimeString(project.updatedAt.getTime())}</span> </div> {metadata.totalTimeSpent > 0 && ( <> <div className="flex items-center gap-2"> <BarChart3 className="w-3 h-3" /> <span>{formatTimeSpent(metadata.totalTimeSpent)} writing</span> </div> <div className="flex items-center gap-2"> <Calendar className="w-3 h-3" /> <span>{metadata.openCount} sessions</span> </div> </> )} </div> {/* Match highlights */} {matchedFields.length > 0 && ( <div className="text-xs text-primary-600 border-t border-slate-200 pt-2"> Matched: {matchedFields.join(', ')} </div> )} {/* Tag editing */} {editingTags === project.id && ( <div className="border-t border-slate-200 pt-3 mt-3"> <div className="flex items-center gap-2"> <input ref={tagInputRef} type="text" value={tagInput} onChange={(e) => setTagInput(e.target.value)} onKeyDown={(e) => handleTagKeyPress(e, project.id)} placeholder="Add a tag..." className="flex-1 text-sm px-2 py-1 border border-slate-300 rounded bg-white text-slate-900" /> <button onClick={() => handleAddTag(project.id, tagInput)} className="p-1 text-primary-600 hover:text-primary-700" disabled={!tagInput.trim()} > <Plus className="w-4 h-4" /> </button> <button onClick={() => { setTagInput(''); setEditingTags(null); }} className="p-1 text-slate-400 hover:text-slate-600" > <X className="w-4 h-4" /> </button> </div> {metadata.tags.length > 0 && ( <div className="flex flex-wrap gap-1 mt-2"> {metadata.tags.map((tag) => ( <span key={tag} className="inline-flex items-center px-2 py-1 rounded-full text-xs bg-slate-100 text-slate-700 group/tag" > {tag} <button onClick={() => removeTag(project.id, tag)} className="ml-1 text-slate-400 hover:text-red-500 opacity-0 group-hover/tag:opacity-100 transition-opacity" > <X className="w-3 h-3" /> </button> </span> ))} </div> )} </div> )} </div> ); endRenderMeasure(); return cardElement; }; return ( <div className="enhanced-project-browser"> {/* Search and Filters Header */} <div className="mb-6"> {/* Search Bar */} <div className="relative mb-4"> <Search className={`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 transition-colors ${ isSearching ? 'text-blue-500 animate-pulse' : 'text-slate-400' }`} /> <input type="text" placeholder="Search projects by name, content, tags..." value={query} onChange={(e) => setQuery(e.target.value)} className="w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg bg-white text-slate-900 placeholder-slate-500" /> {isSearching && ( <div className="absolute right-3 top-1/2 -translate-y-1/2"> <div className="w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin" /> </div> )} </div> {/* Filter Controls */} <div className="flex items-center gap-3 flex-wrap"> <button onClick={() => setShowFilters(!showFilters)} className={`btn btn-sm ${showFilters ? 'btn-primary' : 'btn-secondary'}`} > <Filter className="w-4 h-4" /> Filters {searchStats.hasActiveFilters && ( <span className="ml-1 px-1.5 py-0.5 bg-primary-500 text-white text-xs rounded-full"> {[filters.tags.length, filters.genres.length, filters.favorites ? 1 : 0].reduce( (sum, count) => sum + count, 0, )} </span> )} </button> <div className="flex items-center gap-2"> <label className="text-sm text-slate-600">Sort:</label> <select value={`${filters.sortBy}-${filters.sortOrder}`} onChange={(e) => { const [sortBy, sortOrder] = e.target.value.split('-') as [ typeof filters.sortBy, typeof filters.sortOrder, ]; setSorting(sortBy, sortOrder); }} className="text-sm border border-slate-300 rounded px-2 py-1 bg-white text-slate-900" > <option value="updated-desc">Recently Updated</option> <option value="name-asc">Name A-Z</option> <option value="name-desc">Name Z-A</option> <option value="created-desc">Newest First</option> <option value="created-asc">Oldest First</option> <option value="wordCount-desc">Most Words</option> <option value="wordCount-asc">Least Words</option> <option value="lastOpened-desc">Recently Opened</option> <option value="timeSpent-desc">Most Time Spent</option> </select> </div> {/* Quick Filters */} <div className="flex items-center gap-2"> <button onClick={() => applyQuickFilter('recent')} className="btn btn-ghost btn-sm"> <Clock className="w-4 h-4" /> Recent </button> <button onClick={() => applyQuickFilter('favorites')} className="btn btn-ghost btn-sm"> <Star className="w-4 h-4" /> Favorites </button> <button onClick={() => applyQuickFilter('mostWorked')} className="btn btn-ghost btn-sm"> <BarChart3 className="w-4 h-4" /> Most Worked </button> </div> {searchStats.hasActiveFilters && ( <button onClick={clearFilters} className="btn btn-ghost btn-sm text-red-600 hover:text-red-700" > Clear All </button> )} </div> {/* Expanded Filters */} {showFilters && ( <div className="mt-4 p-4 bg-slate-50 rounded-lg space-y-4"> {/* Tags Filter */} {filterOptions.tags.length > 0 && ( <div> <label className="block text-sm font-medium text-slate-700 mb-2"> Tags </label> <div className="flex flex-wrap gap-2"> {filterOptions.tags.map((tag) => ( <button key={tag} onClick={() => toggleFilterTag(tag)} className={`px-3 py-1 text-sm rounded-full transition-colors ${ filters.tags.includes(tag) ? 'bg-primary-500 text-white' : 'bg-slate-200 text-slate-700 hover:bg-slate-300' }`} > {tag} </button> ))} </div> </div> )} {/* Genres Filter */} {filterOptions.genres.length > 0 && ( <div> <label className="block text-sm font-medium text-slate-700 mb-2"> Genres </label> <div className="flex flex-wrap gap-2"> {filterOptions.genres.map((genre) => ( <button key={genre} onClick={() => toggleGenre(genre)} className={`px-3 py-1 text-sm rounded-full transition-colors ${ filters.genres.includes(genre) ? 'bg-primary-500 text-white' : 'bg-slate-200 text-slate-700 hover:bg-slate-300' }`} > {genre} </button> ))} </div> </div> )} {/* Favorites Toggle */} <div> <label className="flex items-center gap-2"> <input type="checkbox" checked={filters.favorites} onChange={toggleFavorites} className="rounded border-slate-300" /> <span className="text-sm text-slate-700"> Show only favorites </span> </label> </div> </div> )} {/* Search Stats */} <div className="mt-4 text-sm text-slate-600"> Showing {searchStats.totalResults} of {searchStats.totalProjects} projects {searchStats.filteredOut > 0 && <span> ({searchStats.filteredOut} filtered out)</span>} </div> </div> {/* Project Grid - Virtualized */} <div ref={parentRef} className="h-[600px] overflow-auto" style={{ contain: 'strict', }} > <div style={{ height: `${rowVirtualizer.getTotalSize()}px`, width: '100%', position: 'relative', }} > {rowVirtualizer.getVirtualItems().map((virtualRow) => { const startIndex = virtualRow.index * columnsCount; const endIndex = Math.min(startIndex + columnsCount, results.length); const rowItems = results.slice(startIndex, endIndex); return ( <div key={virtualRow.key} style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: `${virtualRow.size}px`, transform: `translateY(${virtualRow.start}px)`, }} > <div className={`grid gap-4 h-full ${compact ? 'grid-cols-1' : 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3'}`} > {rowItems.map(renderProjectCard)} </div> </div> ); })} </div> </div> {/* Empty State */} {results.length === 0 && ( <div className="text-center py-12"> <FileText className="w-16 h-16 mx-auto mb-4 text-slate-400" /> <h3 className="text-lg font-medium text-slate-600 mb-2"> {searchStats.hasActiveFilters ? 'No projects found' : 'No projects yet'} </h3> <p className="text-slate-500"> {searchStats.hasActiveFilters ? 'Try adjusting your search terms or filters' : 'Create your first project to get started'} </p> </div> )} {/* Context Menu */} {contextMenu && ( <div ref={contextMenuRef} className="fixed z-50 bg-white rounded-lg shadow-lg border border-slate-200 py-1 min-w-[160px]" style={{ left: contextMenu.x, top: contextMenu.y, }} > <button onClick={() => handleProjectAction('favorite', contextMenu.project)} className="w-full px-3 py-2 text-left text-sm hover:bg-slate-100 flex items-center gap-2" > {getProjectMetadata(contextMenu.project.id).isFavorite ? ( <> <StarOff className="w-4 h-4" /> Remove from Favorites </> ) : ( <> <Star className="w-4 h-4" /> Add to Favorites </> )} </button> <button onClick={() => handleProjectAction('edit-tags', contextMenu.project)} className="w-full px-3 py-2 text-left text-sm hover:bg-slate-100 flex items-center gap-2" > <Tag className="w-4 h-4" /> Edit Tags </button> <div className="h-px bg-slate-200 my-1" /> <button onClick={() => handleProjectAction('duplicate', contextMenu.project)} className="w-full px-3 py-2 text-left text-sm hover:bg-slate-100 flex items-center gap-2" > <Copy className="w-4 h-4" /> Duplicate </button> <button onClick={() => handleProjectAction('rename', contextMenu.project)} className="w-full px-3 py-2 text-left text-sm hover:bg-slate-100 flex items-center gap-2" > <Edit3 className="w-4 h-4" /> Rename </button> <button onClick={() => handleProjectAction('export', contextMenu.project)} className="w-full px-3 py-2 text-left text-sm hover:bg-slate-100 flex items-center gap-2" > <Download className="w-4 h-4" /> Export </button> <div className="h-px bg-slate-200 my-1" /> <button onClick={() => handleProjectAction('delete', contextMenu.project)} className="w-full px-3 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center gap-2" > <Trash2 className="w-4 h-4" /> Delete </button> </div> )} </div> ); }; export default EnhancedProjectBrowser; 
/Users/davehail/Developer/inkwell/src/components/ErrorBoundary/PanelErrorFallbacks.tsx:5:  BarChart3,
/Users/davehail/Developer/inkwell/src/components/ErrorBoundary/PanelErrorFallbacks.tsx:112:          <BarChart3 className="w-12 h-12 text-green-400 mx-auto mb-2" />
/Users/davehail/Developer/inkwell/src/tour/ui/portal.tsx:22:      zIndex: '10000', // Higher than modals (50) and topbar (30)
/Users/davehail/Developer/inkwell/src/components/Settings/SnapshotHistoryDialog.tsx:82:                      No snapshots yet. Create one from the top bar or enable auto-snapshots in
/Users/davehail/Developer/inkwell/src/components/Navigation/PowerToolsMenu.tsx:1:import { Wrench, BarChart, HelpCircle } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Navigation/PowerToolsMenu.tsx:34:    icon: BarChart,
/Users/davehail/Developer/inkwell/src/components/Settings/UIModeToggle.tsx:1:// src/components/Settings/UIModeToggle.tsx import { BookOpen, Eye, EyeOff, Info, Settings, Wrench, Sparkles } from 'lucide-react'; import React, { useState } from 'react'; import { useDispatch } from 'react-redux'; import { useProfile } from '../../context/ProfileContext'; import { analyticsService } from '../../services/analyticsService'; import { featureFlagService } from '../../services/featureFlagService'; import { getPresetForMode, presetToFlags, UIMode } from '../../services/featureFlagService.presets'; import { updateGlobalSettings, exitFirstDraftPath } from '../../state/onboarding/onboardingSlice'; import { Alert, AlertDescription } from '../ui/alert'; import { Badge } from '../ui/badge'; import { Button } from '../ui/Button'; import { Card, CardContent, CardHeader, CardTitle } from '../ui/Card'; import { Label } from '../ui/label'; import { Switch } from '../ui/switch'; interface UIModeToggleProps { projectId?: string; currentMode: UIMode; onModeChange: (mode: UIMode) => void; showDescription?: boolean; } export function UIModeToggle({ projectId, currentMode, onModeChange, showDescription = true, }: UIModeToggleProps) { const [isChanging, setIsChanging] = useState(false); const { activeProfileId } = useProfile(); const dispatch = useDispatch(); const handleModeChange = async (newMode: UIMode) => { if (newMode === currentMode || isChanging) return; setIsChanging(true); try { // Track the mode change analyticsService.track('ui_mode_changed', { profileId: activeProfileId || 'anonymous', oldMode: currentMode, newMode: newMode, reason: 'settings_toggle', }); // Apply feature flags for the new mode const preset = getPresetForMode(newMode); const flags = presetToFlags(preset); // Update feature flags Object.entries(flags).forEach(([flagKey, enabled]) => { featureFlagService.setEnabled(flagKey, enabled); }); // If switching to Pro mode, exit First Draft Path if (newMode === 'pro' && projectId) { dispatch( exitFirstDraftPath({ profileId: activeProfileId || 'anonymous', projectId, reason: 'ui_mode_change', }), ); } // Update global preference dispatch( updateGlobalSettings({ profileId: activeProfileId || 'anonymous', preferredUIMode: newMode, }), ); // Store per-project preference if projectId is provided if (projectId) { const projectPreferences = JSON.parse(localStorage.getItem('project_ui_modes') || '{}'); projectPreferences[projectId] = newMode; localStorage.setItem('project_ui_modes', JSON.stringify(projectPreferences)); } onModeChange(newMode); } catch (error) { console.error('Failed to change UI mode:', error); analyticsService.track('ui_mode_change_failed', { profileId: activeProfileId || 'anonymous', attemptedMode: newMode, error: error instanceof Error ? error.message : 'Unknown error', }); } finally { setIsChanging(false); } }; return ( <Card> <CardHeader> <CardTitle className="flex items-center space-x-2 text-lg"> <Eye className="w-5 h-5" /> <span>Interface Mode</span> </CardTitle> </CardHeader> <CardContent className="space-y-4"> {/* Toggle Control */} <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg"> <div className="flex items-center space-x-3"> <div className="flex items-center space-x-2"> {currentMode === 'beginner' ? ( <BookOpen className="w-5 h-5 text-blue-600" /> ) : ( <Settings className="w-5 h-5 text-purple-600" /> )} <div> <div className="font-medium"> {currentMode === 'beginner' ? 'Beginner Mode' : 'Pro Mode'} </div> <div className="text-sm text-gray-600"> {currentMode === 'beginner' ? 'Simplified interface for focused writing' : 'Full interface with advanced features'} </div> </div> </div> </div> <div className="flex items-center space-x-3"> <Label htmlFor="ui-mode-toggle" className={`text-sm ${currentMode === 'beginner' ? 'text-blue-600 font-medium' : 'text-gray-500'}`} > Beginner </Label> <Switch id="ui-mode-toggle" checked={currentMode === 'pro'} onCheckedChange={(checked) => { handleModeChange(checked ? 'pro' : 'beginner'); }} disabled={isChanging} /> <Label htmlFor="ui-mode-toggle" className={`text-sm ${currentMode === 'pro' ? 'text-purple-600 font-medium' : 'text-gray-500'}`} > Pro </Label> </div> </div> {showDescription && ( <div className="space-y-3"> {/* Beginner Mode Features */} <div className={`p-3 rounded-lg border-2 transition-all ${ currentMode === 'beginner' ? 'border-blue-200 bg-blue-50' : 'border-gray-200 bg-gray-50 opacity-60' }`} > <div className="flex items-center space-x-2 mb-2"> <BookOpen className="w-4 h-4 text-blue-600" /> <span className="font-medium text-blue-900">Beginner Mode</span> {currentMode === 'beginner' && ( <Badge variant="default" className="text-xs"> Current </Badge> )} </div> <div className="text-sm space-y-1"> <div className="flex items-center text-green-700"> <span className="w-2 h-2 bg-green-500 rounded-full mr-2" /> Projects, Chapters, Scenes, Basic Notes, Export </div> <div className="flex items-center text-green-700"> <span className="w-2 h-2 bg-green-500 rounded-full mr-2" /> Focus mode enabled by default </div> <div className="flex items-center text-green-700"> <span className="w-2 h-2 bg-green-500 rounded-full mr-2" /> Simple AI assistance ("Tighten this paragraph") </div> <div className="flex items-center text-gray-500"> <EyeOff className="w-3 h-3 mr-2" /> Plot Boards, Timeline, Advanced AI hidden </div> </div> </div> {/* Pro Mode Features */} <div className={`p-3 rounded-lg border-2 transition-all ${ currentMode === 'pro' ? 'border-purple-200 bg-purple-50' : 'border-gray-200 bg-gray-50 opacity-60' }`} > <div className="flex items-center space-x-2 mb-2"> <Settings className="w-4 h-4 text-purple-600" /> <span className="font-medium text-purple-900">Pro Mode</span> {currentMode === 'pro' && ( <Badge variant="default" className="text-xs"> Current </Badge> )} </div> <div className="text-sm space-y-1"> <div className="flex items-center text-green-700"> <span className="w-2 h-2 bg-green-500 rounded-full mr-2" /> All beginner features plus advanced tools </div> <div className="flex items-center text-purple-700"> <Wrench className="w-3 h-3 mr-2" /> Power Tools menu with Plot Boards, Timeline </div> <div className="flex items-center text-purple-700"> <Sparkles className="w-3 h-3 mr-2" /> Advanced AI features and model selection </div> <div className="flex items-center text-purple-700"> <span className="w-2 h-2 bg-purple-500 rounded-full mr-2" /> Character development, Templates, Bulk import </div> </div> </div> </div> )} {/* Warning when changing modes */} {currentMode === 'pro' && ( <Alert> <Info className="h-4 w-4" /> <AlertDescription> Switching to Beginner mode will hide advanced features but won't delete any of your work. You can switch back anytime. </AlertDescription> </Alert> )} {/* Change confirmation */} {isChanging && ( <Alert> <Info className="h-4 w-4" /> <AlertDescription>Updating interface mode...</AlertDescription> </Alert> )} </CardContent> </Card> ); } // Compact toggle for navigation bar export function UIModeQuickToggle({ projectId: _projectId, currentMode, onModeChange, }: UIModeToggleProps) { return ( <Button variant="ghost" size="sm" onClick={() => onModeChange(currentMode === 'beginner' ? 'pro' : 'beginner')} className="h-8 px-2 text-xs" title={`Switch to ${currentMode === 'beginner' ? 'Pro' : 'Beginner'} mode`} > {currentMode === 'beginner' ? ( <BookOpen className="w-3 h-3 mr-1" /> ) : ( <Settings className="w-3 h-3 mr-1" /> )} {currentMode === 'beginner' ? 'Beginner' : 'Pro'} </Button> ); } // Hook to get the current UI mode for a project export function useUIMode(projectId?: string): [UIMode, (mode: UIMode) => void] { const [currentMode, setCurrentMode] = useState<UIMode>('beginner'); React.useEffect(() => { let mode: UIMode = 'beginner'; if (projectId) { // Check project-specific preference first const projectPreferences = JSON.parse(localStorage.getItem('project_ui_modes') || '{}'); if (projectPreferences[projectId]) { mode = projectPreferences[projectId]; } } // Fall back to global preference if (mode === 'beginner') { const globalPreference = localStorage.getItem('preferred_ui_mode'); if (globalPreference === 'pro') { mode = 'pro'; } } setCurrentMode(mode); }, [projectId]); const updateMode = (newMode: UIMode) => { setCurrentMode(newMode); // Store global preference localStorage.setItem('preferred_ui_mode', newMode); }; return [currentMode, updateMode]; } // Settings panel integration export function GeneralSettings({ projectId }: { projectId?: string }) { const [currentMode, updateMode] = useUIMode(projectId); return ( <div className="space-y-6"> <UIModeToggle projectId={projectId} currentMode={currentMode} onModeChange={updateMode} showDescription={true} /> {/* Other general settings would go here */} </div> ); } 
/Users/davehail/Developer/inkwell/src/components/ui/index.ts:2:export { Card, CardHeader, CardContent, CardFooter } from './Card';
/Users/davehail/Developer/inkwell/src/components/Planning/StoryStructureVisualizer.tsx:4:import { BarChart3, CheckCircle, BookOpen, Users, Zap, Target, Award } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Planning/StoryStructureVisualizer.tsx:236:          <BarChart3 className="w-12 h-12 mx-auto text-gray-400 mb-4" />
/Users/davehail/Developer/inkwell/src/components/Planning/StoryStructureVisualizer.tsx:249:    // Compact version for sidebar/smaller spaces
/Users/davehail/Developer/inkwell/src/components/Planning/StoryStructureVisualizer.tsx:256:            <BarChart3 size={16} />
/Users/davehail/Developer/inkwell/src/components/Planning/StoryStructureVisualizer.tsx:264:        {/* Chapter Progress Mini-bars */}
/Users/davehail/Developer/inkwell/src/components/Planning/StoryStructureVisualizer.tsx:320:          <BarChart3 className="text-purple-600" />
/Users/davehail/Developer/inkwell/src/components/Planning/StoryStructureVisualizer.tsx:435:                {/* Progress Bar */}
/Users/davehail/Developer/inkwell/src/components/Layout/index.ts:1:// src/components/Layout/index.ts export { default as MainLayout } from './MainLayout'; export { Footer } from './Footer'; 
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:1:// src/components/Layout/MainLayout.footer.test.tsx
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:37:describe('MainLayout Footer', () => {
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:38:  it('renders footer with copyright and version info', () => {
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:46:    // Check for footer elements
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:47:    const footer = screen.getByRole('contentinfo');
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:48:    expect(footer).toBeInTheDocument();
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:50:    // Check for the footer content that is actually there
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:51:    expect(footer.textContent).toContain('Inkwell');
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:53:    // This footer appears to have a slogan instead of a copyright
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:54:    expect(footer.textContent).toContain('Because great stories deserve great tools');
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:58:    // expect(footer.textContent).toContain(currentYear);
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:61:  it('shows the correct footer links', () => {
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:68:    const footer = screen.getByRole('contentinfo');
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:70:    // This footer doesn't appear to have links, so we'll check for other footer elements
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:71:    expect(footer).toBeInTheDocument();
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:73:    // Check for the footer text that is actually there
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:74:    expect(footer.textContent).toContain('Nexus Partners');
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.footer.test.tsx:77:    const links = footer.querySelectorAll('a');
/Users/davehail/Developer/inkwell/src/tour/ui/SpotlightTooltip.tsx:92:    // Account for fixed/sticky headers or footers
/Users/davehail/Developer/inkwell/src/tour/ui/SpotlightTooltip.tsx:94:    const reservedBottom = 0; // No footer typically
/Users/davehail/Developer/inkwell/src/components/Settings/PersistenceAdvancedSettings.tsx:264:          <span className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">Coming Soon</span>
/Users/davehail/Developer/inkwell/src/components/Layout/Footer.tsx:1:// src/components/Layout/Footer.tsx
/Users/davehail/Developer/inkwell/src/components/Layout/Footer.tsx:7:export function _Footer() {
/Users/davehail/Developer/inkwell/src/components/Layout/Footer.tsx:9:    <footer
/Users/davehail/Developer/inkwell/src/components/Layout/Footer.tsx:48:    </footer>
/Users/davehail/Developer/inkwell/src/components/ui/EmptyStates.tsx:1:// src/components/ui/EmptyStates.tsx import { Edit3, Calendar, BarChart3, Users, FileText, Lightbulb, Target, Sparkles, ArrowRight, Play, } from 'lucide-react'; import React from 'react'; import Logo from '@/components/Logo'; import { KeyboardShortcut } from './KeyboardHints'; // ========================================== // BASE EMPTY STATE COMPONENT // ========================================== interface EmptyStateProps { icon: React.ComponentType<{ className?: string }>; title: string; description: string; primaryAction?: { label: string; onClick: () => void; shortcut?: string[]; }; secondaryAction?: { label: string; onClick: () => void; shortcut?: string[]; }; suggestions?: Array<{ icon: React.ComponentType<{ className?: string }>; title: string; description: string; onClick?: () => void; }>; className?: string; } export const EmptyState: React.FC<EmptyStateProps> = ({ icon: Icon, _title, _description, _primaryAction, _secondaryAction, _suggestions, _className = '',  }) => { return ( <div className={`flex flex-col items-center justify-center py-16 px-6 text-center ${className}`} > {/* Icon */} <div className="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-6"> <Icon className="w-8 h-8 text-blue-600" /> </div> {/* Content */} <div className="max-w-md"> <h3 className="text-xl font-semibold text-slate-900 mb-2">{title}</h3> <p className="text-slate-600 mb-8">{description}</p> {/* Actions */} <div className="flex flex-col sm:flex-row gap-3 justify-center mb-8"> {primaryAction && ( <button onClick={primaryAction.onClick} className="inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" > <span>{primaryAction.label}</span> {primaryAction.shortcut && ( <KeyboardShortcut keys={primaryAction.shortcut} size="sm" variant="subtle" /> )} </button> )} {secondaryAction && ( <button onClick={secondaryAction.onClick} className="inline-flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors" > <span>{secondaryAction.label}</span> {secondaryAction.shortcut && ( <KeyboardShortcut keys={secondaryAction.shortcut} size="sm" variant="subtle" /> )} </button> )} </div> {/* Suggestions */} {suggestions && suggestions.length > 0 && ( <div className="space-y-3"> <h4 className="text-sm font-medium text-slate-700 mb-3"> Get started with: </h4> <div className="space-y-2"> {suggestions.map((suggestion, _index) => { const SuggestionIcon = suggestion.icon; return ( <button key={index} onClick={suggestion.onClick} className="w-full flex items-center gap-3 p-3 text-left bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors group" > <SuggestionIcon className="w-5 h-5 text-slate-400" /> <div className="flex-1"> <div className="text-sm font-medium text-slate-900"> {suggestion.title} </div> <div className="text-xs text-slate-600"> {suggestion.description} </div> </div> <ArrowRight className="w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity" /> </button> ); })} </div> </div> )} </div> </div> ); }; // ========================================== // SPECIFIC EMPTY STATES // ========================================== // No Projects Empty State - Custom branded version export const NoProjectsEmptyState: React.FC<{ onCreateProject: () => void; onOpenHelp: () => void; }> = ({ onCreateProject,  onOpenHelp }) => ( <div className="flex flex-col items-center justify-center py-16 px-6 text-center"> {/* Branded Logo Circle */} <div className="mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-inkwell-navy-50 to-inkwell-gold-50 border border-inkwell-navy-200"> <Logo variant="mark-light" size={48} className="opacity-90" /> </div> {/* Content */} <div className="max-w-md"> <h3 className="text-xl font-semibold text-slate-900 mb-2"> Welcome to Inkwell </h3> <p className="text-slate-600 mb-8 leading-relaxed"> Start your writing journey by creating your first project. Inkwell helps you organize chapters,  track progress,  and bring your stories to life. </p> {/* Actions */} <div className="flex flex-col sm:flex-row gap-3 justify-center mb-8"> <button onClick={onCreateProject} className="inline-flex items-center justify-center gap-2 px-4 py-2 bg-inkwell-navy text-white rounded-lg hover:bg-inkwell-navy-700 transition-colors shadow-sm hover:shadow-md" > <span>Create Your First Project</span> <KeyboardShortcut keys={['‚åò',  'N']} size="sm" variant="subtle" /> </button> <button onClick={onOpenHelp} className="inline-flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors" > <span>View Tutorial</span> <KeyboardShortcut keys={['?']} size="sm" variant="subtle" /> </button> </div> {/* Suggestions */} <div className="space-y-3"> <h4 className="text-sm font-medium text-slate-700 mb-3"> Get started with: </h4> <div className="space-y-2"> {[ { icon: Sparkles, _title: 'Start with a template', _description: 'Choose from novel, _screenplay,  or blog templates', _onClick: onCreateProject,  },  { icon: Target, _title: 'Set writing goals', _description: 'Track daily word counts and deadlines', _onClick: onCreateProject,  },  { icon: BarChart3, _title: 'Monitor progress', _description: 'View analytics and writing streaks', _onClick: onCreateProject,  },  ].map((suggestion, _index) => { const SuggestionIcon = suggestion.icon; return ( <button key={index} onClick={suggestion.onClick} className="w-full flex items-center gap-3 p-3 text-left bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors group" > <SuggestionIcon className="w-5 h-5 text-slate-400" /> <div className="flex-1"> <div className="text-sm font-medium text-slate-900"> {suggestion.title} </div> <div className="text-xs text-slate-600"> {suggestion.description} </div> </div> <ArrowRight className="w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity" /> </button> ); })} </div> </div> </div> </div> ); // No Chapters Empty State export const NoChaptersEmptyState: React.FC<{ onCreateChapter: () => void; onOpenPlanning: () => void; }> = ({ onCreateChapter,  onOpenPlanning }) => ( <EmptyState icon={Edit3} title="Ready to Write?" description="Your story begins with the first chapter. Create one now and start bringing your ideas to life." primaryAction={{ label: 'Write First Chapter', onClick: onCreateChapter, shortcut: ['‚åò', 'N'], }} secondaryAction={{ label: 'Plan Your Story', onClick: onOpenPlanning, shortcut: ['‚åò', '3'], }} suggestions={[ { icon: Lightbulb, title: 'Start with an outline', description: 'Plan your story structure and key plot points', onClick: onOpenPlanning, }, { icon: Users, title: 'Create characters', description: 'Develop compelling characters and relationships', onClick: onOpenPlanning, }, { icon: Play, title: 'Just start writing', description: 'Dive in with a simple first chapter', onClick: onCreateChapter, }, ]} /> ); // No Characters Empty State export const NoCharactersEmptyState: React.FC<{ onCreateCharacter: () => void }> = ({ onCreateCharacter,  }) => ( <EmptyState icon={Users} title="Bring Characters to Life" description="Great stories start with compelling characters. Create your first character and define their personality, goals, and relationships." primaryAction={{ label: 'Create Character', onClick: onCreateCharacter, }} suggestions={[ { icon: Users, title: 'Protagonist', description: 'Your main character driving the story forward', onClick: onCreateCharacter, }, { icon: Users, title: 'Antagonist', description: 'The opposing force creating conflict', onClick: onCreateCharacter, }, { icon: Users, title: 'Supporting Character', description: 'Characters who help develop your story', onClick: onCreateCharacter, }, ]} /> ); // No Analytics Data Empty State export const NoAnalyticsEmptyState: React.FC<{ onStartWriting: () => void }> = ({ onStartWriting,  }) => ( <EmptyState icon={BarChart3} title="Track Your Writing Journey" description="Your analytics will appear here once you start writing. Track word counts, writing streaks, and productivity insights." primaryAction={{ label: 'Start Writing', onClick: onStartWriting, shortcut: ['‚åò', '2'], }} suggestions={[ { icon: Target, title: 'Set daily goals', description: 'Establish word count targets and deadlines', onClick: onStartWriting, }, { icon: Calendar, title: 'Build a streak', description: 'Write consistently to track your progress', onClick: onStartWriting, }, { icon: BarChart3, title: 'Monitor trends', description: 'See patterns in your writing productivity', onClick: onStartWriting, }, ]} /> ); // Search Results Empty State export const SearchEmptyState: React.FC<{ query: string; onClearSearch: () => void }> = ({ query, _onClearSearch,  }) => ( <EmptyState icon={FileText} title={`No results for "${query}"`} description="Try adjusting your search terms or browse your content using the navigation menu." secondaryAction={{ label: 'Clear Search', onClick: onClearSearch, }} suggestions={[ { icon: Edit3, title: 'Browse chapters', description: 'View all your written content', onClick: onClearSearch, }, { icon: Users, title: 'Check characters', description: 'Look through your character profiles', onClick: onClearSearch, }, { icon: Lightbulb, title: 'Review planning', description: 'Browse your story outlines and notes', onClick: onClearSearch, }, ]} /> ); // ========================================== // LOADING EMPTY STATE // ========================================== export const LoadingEmptyState: React.FC<{ message?: string }> = ({ message = 'Loading your content...',  }) => ( <div className="flex flex-col items-center justify-center py-16 px-6 text-center"> <div className="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-6"> <div className="w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin" /> </div> <div className="max-w-md"> <h3 className="text-xl font-semibold text-slate-900 mb-2">{message}</h3> <p className="text-slate-600">This won't take long...</p> </div> </div> ); // ========================================== // ERROR EMPTY STATE // ========================================== export const ErrorEmptyState: React.FC<{ title?: string; description?: string; onRetry?: () => void; }> = ({ title = 'Something went wrong', _description = "We couldn't load your content. Please try again.", _onRetry,  }) => ( <EmptyState icon={FileText} title={title} description={description} primaryAction={ onRetry ? { label: 'Try Again', onClick: onRetry, } : undefined } className="text-red-600" /> );
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:7:  BarChart3,
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:36:// Define auth routes that should not show the header/topbar
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:86:    icon: BarChart3,
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:114:  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:160:    const savedCollapsed = localStorage.getItem('inkwell-sidebar-collapsed');
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:169:        setSidebarCollapsed((prev) => (isMobileSize ? true : prev));
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:177:      setSidebarCollapsed(JSON.parse(savedCollapsed));
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:302:  const toggleSidebar = () => {
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:303:    const newCollapsed = !sidebarCollapsed;
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:304:    setSidebarCollapsed(newCollapsed);
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:305:    localStorage.setItem('inkwell-sidebar-collapsed', JSON.stringify(newCollapsed));
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:339:      {/* Mobile sidebar overlay */}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:340:      {isMobile && !sidebarCollapsed && (
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:343:          onClick={() => setSidebarCollapsed(true)}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:348:      {/* Sidebar - only show on non-auth routes */}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:352:            'sidebar ink-sidebar',
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:357:            !isMobile && (sidebarCollapsed ? 'w-16' : 'w-64'),
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:359:            isMobile && (sidebarCollapsed ? '-translate-x-full w-64' : 'translate-x-0 w-64'),
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:361:          aria-hidden={isMobile && sidebarCollapsed}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:363:          {/* Sidebar Header */}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:366:              'sidebar-header p-4 border-b border-slate-200 dark:border-slate-700',
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:368:              sidebarCollapsed ? 'flex-col gap-2 justify-center' : 'flex-row justify-between',
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:375:                sidebarCollapsed ? 'flex-col gap-0' : 'flex-row gap-3',
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:385:              {!sidebarCollapsed && (
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:399:              onClick={toggleSidebar}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:403:                  toggleSidebar();
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:415:              aria-label={sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:416:              aria-expanded={!sidebarCollapsed}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:422:                  sidebarCollapsed && 'rotate-180',
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:429:          {!sidebarCollapsed && (
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:467:                      sidebarCollapsed && 'justify-center',
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:469:                    title={sidebarCollapsed ? `${item.label} (${item.shortcut})` : undefined}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:474:                        sidebarCollapsed ? 'mx-auto' : 'flex-shrink-0',
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:477:                    {!sidebarCollapsed && (
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:492:          {!sidebarCollapsed && (
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:522:          {sidebarCollapsed && (
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:554:          !isMobile && (sidebarCollapsed ? 'ml-16' : 'ml-64'),
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:555:          // Mobile - no margin (sidebar overlays)
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:559:        {/* Top Bar - only show on non-auth routes */}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:561:          <header className="Topbar bg-white border-b border-ink-500 sticky top-0 z-30 backdrop-blur-sm">
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:568:                      onClick={toggleSidebar}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:706:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:707:        <footer className="mt-auto border-t border-slate-200 dark:border-slate-700 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm">
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:729:        </footer>
/Users/davehail/Developer/inkwell/src/components/Layout/MainLayout.tsx:858:                  explore the sidebar for all features.
/Users/davehail/Developer/inkwell/src/components/Planning/RelationshipMapper.tsx:1:// src/components/Planning/RelationshipMapper.tsx - Interactive relationship network visualization import { RotateCcw, ZoomIn, ZoomOut, Filter } from 'lucide-react'; import React, { useState, useMemo, useRef, useEffect } from 'react'; import type { GeneratedCharacter, CharacterRelationship, } from '../../services/storyArchitectService'; interface RelationshipNode { id: string; name: string; role: string; x: number; y: number; connections: number; isDragging: boolean; color: string; } interface RelationshipEdge { id: string; source: string; target: string; type: string; strength: number; color: string; arcInfluence: string; chapter?: number; } interface RelationshipMapperProps { characters: GeneratedCharacter[]; totalChapters?: number; onRelationshipUpdate?: ( sourceChar: string, targetChar: string, relationship: CharacterRelationship, ) => void; className?: string; } export default function RelationshipMapper({ characters = [], totalChapters: _totalChapters = 20, onRelationshipUpdate: _onRelationshipUpdate, className = '', }: RelationshipMapperProps) { const canvasRef = useRef<HTMLCanvasElement>(null); const containerRef = useRef<HTMLDivElement>(null); const [zoom, setZoom] = useState(1); const [panX, setPanX] = useState(0); const [panY, setPanY] = useState(0); const [isDragging, setIsDragging] = useState(false); const [dragStart, setDragStart] = useState({ x: 0, y: 0 }); const [selectedNode, setSelectedNode] = useState<string | null>(null); const [selectedEdge, setSelectedEdge] = useState<string | null>(null); const [relationshipFilter, setRelationshipFilter] = useState<string>('all'); const [showLabels, setShowLabels] = useState(true); const [layoutMode, setLayoutMode] = useState<'force' | 'circular' | 'hierarchical'>('force'); // Generate nodes and edges from character data const { nodes, edges } = useMemo(() => { const nodeMap = new Map<string, RelationshipNode>(); const edgeList: RelationshipEdge[] = []; const canvasWidth = 800; const canvasHeight = 600; // Create nodes characters.forEach((character, index) => { let nodeColor = '#3B82F6'; // blue if (character.role === 'protagonist') nodeColor = '#10B981'; // green else if (character.role === 'antagonist') nodeColor = '#EF4444'; // red else if (character.role === 'supporting') nodeColor = '#F59E0B'; // amber // Position based on layout mode let x, y; if (layoutMode === 'circular') { const angle = (index / characters.length) * Math.PI * 2; const radius = Math.min(canvasWidth, canvasHeight) / 3; x = canvasWidth / 2 + Math.cos(angle) * radius; y = canvasHeight / 2 + Math.sin(angle) * radius; } else if (layoutMode === 'hierarchical') { const levelMap = { protagonist: 0, antagonist: 0, supporting: 1, minor: 2 }; const level = levelMap[character.role as keyof typeof levelMap] || 2; x = (index % 3) * (canvasWidth / 3) + canvasWidth / 6; y = level * (canvasHeight / 4) + canvasHeight / 8; } else { // Force-directed layout (simple random positioning) x = Math.random() * (canvasWidth - 100) + 50; y = Math.random() * (canvasHeight - 100) + 50; } const connectionCount = character.relationships?.length || 0; nodeMap.set(character.name, { id: character.name, name: character.name, role: character.role, x, y, connections: connectionCount, isDragging: false, color: nodeColor, }); }); // Create edges characters.forEach((character) => { character.relationships?.forEach((rel, relIndex) => { if (nodeMap.has(rel.withCharacter)) { let edgeColor = '#6B7280'; // gray if (rel.type === 'ally') edgeColor = '#10B981'; // green else if (rel.type === 'enemy') edgeColor = '#EF4444'; // red else if (rel.type === 'love_interest') edgeColor = '#EC4899'; // pink else if (rel.type === 'mentor') edgeColor = '#8B5CF6'; // purple const strength = rel.arcInfluence === 'major' ? 3 : rel.arcInfluence === 'moderate' ? 2 : 1; edgeList.push({ id: `${character.name}-${rel.withCharacter}-${relIndex}`, source: character.name, target: rel.withCharacter, type: rel.type, strength, color: edgeColor, arcInfluence: rel.arcInfluence, }); } }); }); return { nodes: Array.from(nodeMap.values()), edges: edgeList }; }, [characters, layoutMode]); // Filter edges based on selected filter const filteredEdges = useMemo(() => { if (relationshipFilter === 'all') return edges; return edges.filter((edge) => edge.type === relationshipFilter); }, [edges, relationshipFilter]); // Canvas drawing function const drawCanvas = (ctx: CanvasRenderingContext2D) => { const canvas = ctx.canvas; ctx.clearRect(0, 0, canvas.width, canvas.height); ctx.save(); ctx.translate(panX, panY); ctx.scale(zoom, zoom); // Draw edges filteredEdges.forEach((edge) => { const sourceNode = nodes.find((n) => n.id === edge.source); const targetNode = nodes.find((n) => n.id === edge.target); if (sourceNode && targetNode) { ctx.beginPath(); ctx.strokeStyle = edge.color; ctx.lineWidth = edge.strength; ctx.globalAlpha = selectedEdge === edge.id ? 1 : 0.7; // Draw curved line for better visualization const midX = (sourceNode.x + targetNode.x) / 2; const midY = (sourceNode.y + targetNode.y) / 2; const offset = 20; ctx.moveTo(sourceNode.x, sourceNode.y); ctx.quadraticCurveTo(midX + offset, midY - offset, targetNode.x, targetNode.y); ctx.stroke(); // Draw arrow const angle = Math.atan2(targetNode.y - midY, targetNode.x - midX); const arrowLength = 10; ctx.beginPath(); ctx.moveTo( targetNode.x - arrowLength * Math.cos(angle - Math.PI / 6), targetNode.y - arrowLength * Math.sin(angle - Math.PI / 6), ); ctx.lineTo(targetNode.x, targetNode.y); ctx.lineTo( targetNode.x - arrowLength * Math.cos(angle + Math.PI / 6), targetNode.y - arrowLength * Math.sin(angle + Math.PI / 6), ); ctx.stroke(); // Draw relationship label if (showLabels) { ctx.fillStyle = edge.color; ctx.font = '10px Arial'; ctx.textAlign = 'center'; ctx.fillText(edge.type.replace('_', ' '), midX, midY - 5); } } }); // Draw nodes nodes.forEach((node) => { ctx.beginPath(); const radius = Math.max(15, node.connections * 3); ctx.arc(node.x, node.y, radius, 0, Math.PI * 2); ctx.fillStyle = node.color; ctx.globalAlpha = selectedNode === node.id ? 1 : 0.8; ctx.fill(); // Node border ctx.strokeStyle = selectedNode === node.id ? '#1F2937' : '#FFFFFF'; ctx.lineWidth = 2; ctx.stroke(); // Node label if (showLabels) { ctx.fillStyle = '#1F2937'; ctx.font = 'bold 12px Arial'; ctx.textAlign = 'center'; ctx.globalAlpha = 1; ctx.fillText(node.name, node.x, node.y + radius + 15); // Role label ctx.font = '10px Arial'; ctx.fillStyle = '#6B7280'; ctx.fillText(node.role, node.x, node.y + radius + 28); } }); ctx.restore(); }; // Handle canvas interactions const handleCanvasMouseDown = (e: React.MouseEvent<HTMLCanvasElement>) => { const canvas = canvasRef.current; if (!canvas) return; const rect = canvas.getBoundingClientRect(); const x = (e.clientX - rect.left - panX) / zoom; const y = (e.clientY - rect.top - panY) / zoom; // Check if clicking on a node const clickedNode = nodes.find((node) => { const radius = Math.max(15, node.connections * 3); const distance = Math.sqrt((x - node.x) ** 2 + (y - node.y) ** 2); return distance <= radius; }); if (clickedNode) { setSelectedNode(clickedNode.id); setSelectedEdge(null); } else { setSelectedNode(null); setSelectedEdge(null); setIsDragging(true); setDragStart({ x: e.clientX - panX, y: e.clientY - panY }); } }; const handleCanvasMouseMove = (e: React.MouseEvent<HTMLCanvasElement>) => { if (isDragging) { setPanX(e.clientX - dragStart.x); setPanY(e.clientY - dragStart.y); } }; const handleCanvasMouseUp = () => { setIsDragging(false); }; const handleZoomIn = () => setZoom((prev) => Math.min(prev * 1.2, 3)); const handleZoomOut = () => setZoom((prev) => Math.max(prev / 1.2, 0.3)); const resetView = () => { setZoom(1); setPanX(0); setPanY(0); setSelectedNode(null); setSelectedEdge(null); }; // Redraw canvas when data changes useEffect(() => { const canvas = canvasRef.current; if (!canvas) return; const ctx = canvas.getContext('2d'); if (!ctx) return; drawCanvas(ctx); }, [nodes, filteredEdges, zoom, panX, panY, selectedNode, selectedEdge, showLabels]); const relationshipTypes = [ { id: 'all', name: 'All Relationships', color: '#6B7280' }, { id: 'ally', name: 'Allies', color: '#10B981' }, { id: 'enemy', name: 'Enemies', color: '#EF4444' }, { id: 'love_interest', name: 'Love Interests', color: '#EC4899' }, { id: 'mentor', name: 'Mentors', color: '#8B5CF6' }, { id: 'family', name: 'Family', color: '#F59E0B' }, ]; const selectedCharacter = selectedNode ? characters.find((char) => char.name === selectedNode) : null; return ( <div className={`bg-white rounded-lg shadow-sm border border-gray-200 ${className}`} > {/* Header */} <div className="p-4 border-b border-gray-200"> <div className="flex items-center justify-between"> <div> <h2 className="text-lg font-semibold text-gray-900"> Relationship Mapper </h2> <p className="text-sm text-gray-600"> Interactive visualization of character relationships and connections </p> </div> <div className="flex items-center gap-2"> <button onClick={handleZoomIn} className="p-2 text-gray-500 hover:text-gray-700" title="Zoom In" > <ZoomIn className="w-4 h-4" /> </button> <button onClick={handleZoomOut} className="p-2 text-gray-500 hover:text-gray-700" title="Zoom Out" > <ZoomOut className="w-4 h-4" /> </button> <button onClick={resetView} className="p-2 text-gray-500 hover:text-gray-700" title="Reset View" > <RotateCcw className="w-4 h-4" /> </button> </div> </div> </div> {/* Controls */} <div className="p-4 border-b border-gray-200 bg-gray-50"> <div className="flex flex-wrap gap-4 items-center"> <div className="flex items-center gap-2"> <Filter className="w-4 h-4 text-gray-500" /> <select value={relationshipFilter} onChange={(e) => setRelationshipFilter(e.target.value)} className="bg-white border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" > {relationshipTypes.map((type) => ( <option key={type.id} value={type.id}> {type.name} </option> ))} </select> </div> <div className="flex items-center gap-2"> <label className="text-sm font-medium text-gray-700">Layout:</label> <select value={layoutMode} onChange={(e) => setLayoutMode(e.target.value as any)} className="bg-white border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" > <option value="force">Force-Directed</option> <option value="circular">Circular</option> <option value="hierarchical">Hierarchical</option> </select> </div> <label className="flex items-center gap-2 text-sm"> <input type="checkbox" checked={showLabels} onChange={(e) => setShowLabels(e.target.checked)} className="rounded border-gray-300" /> <span className="text-gray-700">Show Labels</span> </label> </div> </div> {/* Main Content */} <div className="flex"> {/* Canvas */} <div className="flex-1 p-4"> <div ref={containerRef} className="relative border border-gray-200 rounded" > <canvas ref={canvasRef} width={800} height={600} className="cursor-grab active:cursor-grabbing" onMouseDown={handleCanvasMouseDown} onMouseMove={handleCanvasMouseMove} onMouseUp={handleCanvasMouseUp} onMouseLeave={() => setIsDragging(false)} /> </div> </div> {/* Sidebar */} <div className="w-80 border-l border-gray-200"> {/* Legend */} <div className="p-4 border-b border-gray-200"> <h3 className="font-medium text-gray-900 mb-3">Legend</h3> <div className="space-y-2"> {relationshipTypes.slice(1).map((type) => ( <div key={type.id} className="flex items-center gap-2 text-sm"> <div className="w-3 h-3 rounded" style={{ backgroundColor: type.color }} /> <span className="text-gray-700">{type.name}</span> </div> ))} </div> </div> {/* Selected Character Info */} {selectedCharacter && ( <div className="p-4 border-b border-gray-200"> <h3 className="font-medium text-gray-900 mb-3"> {selectedCharacter.name} </h3> <div className="space-y-3 text-sm"> <div> <span className="font-medium text-gray-700">Role:</span> <span className="ml-2 text-gray-600 capitalize"> {selectedCharacter.role} </span> </div> <div> <span className="font-medium text-gray-700"> Relationships: </span> <span className="ml-2 text-gray-600"> {selectedCharacter.relationships?.length || 0} </span> </div> {selectedCharacter.relationships && selectedCharacter.relationships.length > 0 && ( <div> <span className="font-medium text-gray-700 block mb-2"> Connections: </span> <div className="space-y-1 max-h-40 overflow-y-auto"> {selectedCharacter.relationships.map((rel, index) => ( <div key={index} className="flex items-center justify-between p-2 bg-gray-50 rounded text-xs" > <div className="flex items-center gap-2"> <span className="font-medium">{rel.withCharacter}</span> <span className="px-2 py-1 rounded-full" style={{ backgroundColor: relationshipTypes.find((t) => t.id === rel.type)?.color + '20', color: relationshipTypes.find((t) => t.id === rel.type)?.color, }} > {rel.type.replace('_', ' ')} </span> </div> <span className="text-gray-500"> {rel.arcInfluence} </span> </div> ))} </div> </div> )} </div> </div> )} {/* Network Stats */} <div className="p-4"> <h3 className="font-medium text-gray-900 mb-3">Network Stats</h3> <div className="space-y-2 text-sm"> <div className="flex justify-between"> <span className="text-gray-600">Characters:</span> <span className="font-medium text-gray-900">{nodes.length}</span> </div> <div className="flex justify-between"> <span className="text-gray-600">Relationships:</span> <span className="font-medium text-gray-900">{edges.length}</span> </div> <div className="flex justify-between"> <span className="text-gray-600">Avg Connections:</span> <span className="font-medium text-gray-900"> {nodes.length > 0 ? (edges.length / nodes.length).toFixed(1) : 0} </span> </div> <div className="flex justify-between"> <span className="text-gray-600">Most Connected:</span> <span className="font-medium text-gray-900 text-xs"> {nodes.sort((a, b) => b.connections - a.connections)[0]?.name || 'None'} </span> </div> </div> </div> </div> </div> </div> ); } 
/Users/davehail/Developer/inkwell/src/components/Layout/AppShell.tsx:16:  sidebar?: React.ReactNode;
/Users/davehail/Developer/inkwell/src/components/Layout/AppShell.tsx:20:function AppShellComponent({ children, header, sidebar, banner }: AppShellProps) {
/Users/davehail/Developer/inkwell/src/components/Layout/AppShell.tsx:68:        {/* Main region: sidebar + scrollable content */}
/Users/davehail/Developer/inkwell/src/components/Layout/AppShell.tsx:70:          {sidebar ? (
/Users/davehail/Developer/inkwell/src/components/Layout/AppShell.tsx:71:            <aside className="hidden lg:block border-r overflow-auto">{sidebar}</aside>
/Users/davehail/Developer/inkwell/src/components/ExportWizard/ExportWizard.tsx:10:import { _ProgressBar as ProgressBar } from './ProgressBar';
/Users/davehail/Developer/inkwell/src/components/ExportWizard/ExportWizard.tsx:136:        {/* Progress Bar */}
/Users/davehail/Developer/inkwell/src/components/ExportWizard/ExportWizard.tsx:138:          <ProgressBar
/Users/davehail/Developer/inkwell/src/components/Layout/FooterLight.tsx:1:// src/components/Layout/FooterLight.tsx
/Users/davehail/Developer/inkwell/src/components/Layout/FooterLight.tsx:6:export function FooterLight() {
/Users/davehail/Developer/inkwell/src/components/Layout/FooterLight.tsx:8:    <footer
/Users/davehail/Developer/inkwell/src/components/Layout/FooterLight.tsx:10:      aria-label="Site footer"
/Users/davehail/Developer/inkwell/src/components/Layout/FooterLight.tsx:64:    </footer>
/Users/davehail/Developer/inkwell/src/components/ProjectInsights/ProjectInsights.tsx:1:// src/components/ProjectInsights/ProjectInsights.tsx import { TrendingUp, Clock, FileText, Target, Zap, Award, BarChart3, Star, BookOpen, } from 'lucide-react'; import React, { useMemo } from 'react'; import { useAppContext } from '@/context/AppContext'; import { useProjectMetadata, formatTimeSpent } from '@/hooks/useProjectMetadata'; interface ProjectInsightsProps { compact?: boolean; } const ProjectInsights: React.FC<ProjectInsightsProps> = ({ compact = false }) => { const { state, currentProject: _currentProject } = useAppContext(); const { getUsageStats, getProjectMetadata, getAllTags, getFavoriteProjectIds } = useProjectMetadata(); const insights = useMemo(() => { const usageStats = getUsageStats(); const favoriteIds = getFavoriteProjectIds(); const allTags = getAllTags(); // Calculate writing streaks and patterns const now = Date.now(); const dayMs = 24 * 60 * 60 * 1000; // milliseconds in a day const _weekMs = 7 * dayMs; // Get projects with recent activity (last 30 days) const recentProjects = state.projects.filter((project: any) => { const daysSinceUpdate = (now - new Date(project.updatedAt).getTime()) / dayMs; return daysSinceUpdate <= 30; }); // Calculate word count growth over time const totalWords = state.projects.reduce((sum: number, project: any) => { return sum + (project.metadata?.totalWordCount || 0); }, 0); // Estimate reading time (average 200 words per minute) const estimatedReadingTime = Math.ceil(totalWords / 200); // Calculate average project completion (mock data for now) const avgCompletion = state.projects.length > 0 ? Math.round( (state.projects.filter( (p: any) => p.metadata?.totalWordCount && p.metadata.totalWordCount > 1000, ).length / state.projects.length) * 100, ) : 0; // Find most worked project const projectsWithTime = state.projects .map((project: any) => ({ project, metadata: getProjectMetadata(project.id), wordCount: project.metadata?.totalWordCount || 0, })) .sort((a: any, b: any) => b.metadata.totalTimeSpent - a.metadata.totalTimeSpent); const mostWorkedProject = projectsWithTime[0]; // Writing velocity (words per hour of writing) const totalWritingTime = usageStats.totalTimeSpent; // in minutes const wordsPerHour = totalWritingTime > 0 ? Math.round((totalWords / totalWritingTime) * 60) : 0; // Genre distribution const genreCount: Record<string, number> = {}; state.projects.forEach((project: any) => { const genre = project.metadata?.genre || 'Unspecified'; genreCount[genre] = (genreCount[genre] || 0) + 1; }); const topGenre = Object.entries(genreCount).sort( ([, a], [, b]) => (b as number) - (a as number), )[0]; return { totalProjects: state.projects.length, totalWords, estimatedReadingTime, avgCompletion, recentProjectsCount: recentProjects.length, favoriteCount: favoriteIds.length, totalTags: allTags.length, totalWritingTime: usageStats.totalTimeSpent, averageTimePerProject: usageStats.averageTimePerProject, totalSessions: usageStats.totalOpens, mostWorkedProject, wordsPerHour, topGenre: topGenre ? { genre: topGenre[0], count: topGenre[1] } : null, }; }, [state.projects, getUsageStats, getProjectMetadata, getAllTags, getFavoriteProjectIds]); if (compact) { return ( <div className="grid grid-cols-2 md:grid-cols-4 gap-4"> <div className="text-center"> <div className="text-2xl font-bold text-slate-900 mb-1"> {insights.totalProjects} </div> <div className="text-xs text-slate-500">Projects</div> </div> <div className="text-center"> <div className="text-2xl font-bold text-slate-900 mb-1"> {(insights.totalWords / 1000).toFixed(1)}K </div> <div className="text-xs text-slate-500">Words</div> </div> <div className="text-center"> <div className="text-2xl font-bold text-slate-900 mb-1"> {formatTimeSpent(insights.totalWritingTime)} </div> <div className="text-xs text-slate-500">Writing Time</div> </div> <div className="text-center"> <div className="text-2xl font-bold text-slate-900 mb-1"> {insights.favoriteCount} </div> <div className="text-xs text-slate-500">Favorites</div> </div> </div> ); } return ( <div className="project-insights"> {/* Overview Cards */} <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"> <div className="card"> <div className="card-content"> <div className="flex items-center gap-3 mb-4"> <div className="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"> <BookOpen className="w-5 h-5 text-blue-600" /> </div> <div> <h3 className="font-semibold text-slate-900">Total Projects</h3> <p className="text-xs text-slate-500">Your writing portfolio</p> </div> </div> <div className="text-3xl font-bold text-slate-900 mb-2"> {insights.totalProjects} </div> <div className="flex items-center text-sm text-slate-600"> <Star className="w-4 h-4 text-yellow-500 mr-1" /> {insights.favoriteCount} favorites </div> </div> </div> <div className="card"> <div className="card-content"> <div className="flex items-center gap-3 mb-4"> <div className="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"> <FileText className="w-5 h-5 text-green-600" /> </div> <div> <h3 className="font-semibold text-slate-900">Total Words</h3> <p className="text-xs text-slate-500">Across all projects</p> </div> </div> <div className="text-3xl font-bold text-slate-900 mb-2"> {insights.totalWords.toLocaleString()} </div> <div className="flex items-center text-sm text-slate-600"> <Clock className="w-4 h-4 mr-1" />~{insights.estimatedReadingTime}min read </div> </div> </div> <div className="card"> <div className="card-content"> <div className="flex items-center gap-3 mb-4"> <div className="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center"> <BarChart3 className="w-5 h-5 text-purple-600" /> </div> <div> <h3 className="font-semibold text-slate-900">Writing Time</h3> <p className="text-xs text-slate-500">Total time spent</p> </div> </div> <div className="text-3xl font-bold text-slate-900 mb-2"> {formatTimeSpent(insights.totalWritingTime)} </div> <div className="flex items-center text-sm text-slate-600"> <TrendingUp className="w-4 h-4 mr-1" /> {insights.totalSessions} sessions </div> </div> </div> <div className="card"> <div className="card-content"> <div className="flex items-center gap-3 mb-4"> <div className="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center"> <Target className="w-5 h-5 text-orange-600" /> </div> <div> <h3 className="font-semibold text-slate-900">Progress</h3> <p className="text-xs text-slate-500">Average completion</p> </div> </div> <div className="text-3xl font-bold text-slate-900 mb-2"> {insights.avgCompletion}% </div> <div className="flex items-center text-sm text-slate-600"> <Award className="w-4 h-4 mr-1" /> {insights.recentProjectsCount} active </div> </div> </div> </div> {/* Detailed Insights */} <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"> {/* Writing Velocity */} <div className="card"> <div className="card-content"> <h3 className="text-lg font-semibold text-slate-900 mb-4"> Writing Velocity </h3> <div className="space-y-4"> <div className="flex items-center justify-between"> <span className="text-sm text-slate-600">Words per hour</span> <span className="font-semibold text-slate-900"> {insights.wordsPerHour} </span> </div> <div className="flex items-center justify-between"> <span className="text-sm text-slate-600"> Avg. time per project </span> <span className="font-semibold text-slate-900"> {formatTimeSpent(insights.averageTimePerProject)} </span> </div> <div className="flex items-center justify-between"> <span className="text-sm text-slate-600">Total tags used</span> <span className="font-semibold text-slate-900"> {insights.totalTags} </span> </div> </div> {insights.wordsPerHour > 0 && ( <div className="mt-4 p-3 bg-green-50 rounded-lg"> <div className="flex items-center gap-2 text-sm text-green-700"> <Zap className="w-4 h-4" /> <span> {insights.wordsPerHour > 300 ? 'Fast' : insights.wordsPerHour > 150 ? 'Steady' : 'Thoughtful'}{' '} writer </span> </div> </div> )} </div> </div> {/* Most Worked Project */} {insights.mostWorkedProject && ( <div className="card"> <div className="card-content"> <h3 className="text-lg font-semibold text-slate-900 mb-4"> Most Worked Project </h3> <div className="space-y-3"> <div> <h4 className="font-medium text-slate-900"> {insights.mostWorkedProject.project.name} </h4> <p className="text-sm text-slate-600 line-clamp-2"> {insights.mostWorkedProject.project.description} </p> </div> <div className="grid grid-cols-2 gap-4 text-sm"> <div> <span className="text-slate-500">Time spent:</span> <div className="font-semibold text-slate-900"> {formatTimeSpent(insights.mostWorkedProject.metadata.totalTimeSpent)} </div> </div> <div> <span className="text-slate-500">Word count:</span> <div className="font-semibold text-slate-900"> {insights.mostWorkedProject.wordCount.toLocaleString()} </div> </div> <div> <span className="text-slate-500">Sessions:</span> <div className="font-semibold text-slate-900"> {insights.mostWorkedProject.metadata.openCount} </div> </div> <div> <span className="text-slate-500">Tags:</span> <div className="font-semibold text-slate-900"> {insights.mostWorkedProject.metadata.tags.length} </div> </div> </div> </div> </div> </div> )} </div> {/* Genre Distribution */} {insights.topGenre && ( <div className="card"> <div className="card-content"> <h3 className="text-lg font-semibold text-slate-900 mb-4"> Writing Preferences </h3> <div className="flex items-center gap-4"> <div className="flex-1"> <div className="flex items-center justify-between mb-2"> <span className="text-sm text-slate-600">Favorite genre</span> <span className="font-semibold text-slate-900"> {insights.topGenre.genre} </span> </div> <div className="flex items-center justify-between"> <span className="text-sm text-slate-600"> Projects in this genre </span> <span className="font-semibold text-slate-900"> {insights.topGenre.count} / {insights.totalProjects} </span> </div> </div> <div className="text-right"> <div className="text-2xl font-bold text-primary-600"> {Math.round((insights.topGenre.count / insights.totalProjects) * 100)}% </div> <div className="text-xs text-slate-500">of projects</div> </div> </div> </div> </div> )} {/* Motivational Message */} {insights.totalProjects > 0 && ( <div className="card bg-gradient-to-r from-primary-50 to-purple-50 border-primary-200"> <div className="card-content"> <div className="flex items-center gap-3"> <div className="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center"> <Award className="w-5 h-5 text-primary-600" /> </div> <div> <h3 className="font-semibold text-primary-900"> Keep up the great work! </h3> <p className="text-sm text-primary-700"> You've written {insights.totalWords.toLocaleString()} words across{' '} {insights.totalProjects} projects. {insights.totalWritingTime > 0 && ( <> {' '} That's {formatTimeSpent(insights.totalWritingTime)} of dedicated writing time! </> )} </p> </div> </div> </div> </div> )} </div> ); }; export default ProjectInsights; 
/Users/davehail/Developer/inkwell/src/components/ui/Card.tsx:39:export const CardFooter: React.FC<{ children: React.ReactNode; className?: string }> = ({
/Users/davehail/Developer/inkwell/src/components/Planning/WorldBuilding/WorldFormModal.tsx:369:            {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Planning/BeatSheetPlanner.tsx:229:        {/* Progress Bar */}
/Users/davehail/Developer/inkwell/src/styles/design-system.css:1:/* Inkwell Design System - Professional & Cohesive UI */ /* ============================================= COLOR SYSTEM ============================================= */ :root, [data-theme='light'] { /* Primary Brand Colors */ --color-primary-50: #eff6ff; --color-primary-100: #dbeafe; --color-primary-200: #bfdbfe; --color-primary-300: #93c5fd; --color-primary-400: #60a5fa; --color-primary-500: #3b82f6; --color-primary-600: #2563eb; --color-primary-700: #1d4ed8; --color-primary-800: #1e40af; --color-primary-900: #1e3a8a; /* Neutral Colors */ --color-slate-50: #f8fafc; --color-slate-100: #f1f5f9; --color-slate-200: #e2e8f0; --color-slate-300: #cbd5e1; --color-slate-400: #94a3b8; --color-slate-500: #64748b; --color-slate-600: #475569; --color-slate-700: #334155; --color-slate-800: #1e293b; --color-slate-900: #0f172a; /* Semantic Colors */ --color-success-50: #f0fdf4; --color-success-500: #22c55e; --color-success-600: #16a34a; --color-warning-50: #fffbeb; --color-warning-500: #f59e0b; --color-warning-600: #d97706; --color-error-50: #fef2f2; --color-error-500: #ef4444; --color-error-600: #dc2626; /* Background Colors */ --color-bg-primary: var(--color-slate-50); --color-bg-secondary: #fff; --color-bg-tertiary: var(--color-slate-100); --color-bg-accent: var(--color-primary-50); /* Text Colors */ --color-text-primary: var(--color-slate-900); --color-text-secondary: var(--color-slate-600); --color-text-muted: var(--color-slate-500); --color-text-inverse: #fff; /* Border Colors */ --color-border-light: var(--color-slate-200); --color-border-medium: var(--color-slate-300); --color-border-strong: var(--color-slate-400); --color-border-accent: var(--color-primary-200); /* Spacing System */ --space-1: 0.25rem; /* 4px */ --space-2: 0.5rem; /* 8px */ --space-3: 0.75rem; /* 12px */ --space-4: 1rem; /* 16px */ --space-5: 1.25rem; /* 20px */ --space-6: 1.5rem; /* 24px */ --space-8: 2rem; /* 32px */ --space-10: 2.5rem; /* 40px */ --space-12: 3rem; /* 48px */ --space-16: 4rem; /* 64px */ --space-20: 5rem; /* 80px */ /* Radius System */ --radius-sm: 0.375rem; /* 6px */ --radius-md: 0.5rem; /* 8px */ --radius-lg: 0.75rem; /* 12px */ --radius-xl: 1rem; /* 16px */ --radius-2xl: 1.5rem; /* 24px */ /* Shadow System */ --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 5%); --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 10%), 0 1px 2px -1px rgb(0 0 0 / 10%); --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 10%), 0 2px 4px -2px rgb(0 0 0 / 10%); --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 10%), 0 4px 6px -4px rgb(0 0 0 / 10%); --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 10%), 0 8px 10px -6px rgb(0 0 0 / 10%); /* Typography Scale */ --font-size-xs: 0.75rem; /* 12px */ --font-size-sm: 0.875rem; /* 14px */ --font-size-base: 1rem; /* 16px */ --font-size-lg: 1.125rem; /* 18px */ --font-size-xl: 1.25rem; /* 20px */ --font-size-2xl: 1.5rem; /* 24px */ --font-size-3xl: 1.875rem; /* 30px */ --font-size-4xl: 2.25rem; /* 36px */ --font-size-5xl: 3rem; /* 48px */ /* Line Heights */ --leading-tight: 1.25; --leading-snug: 1.375; --leading-normal: 1.5; --leading-relaxed: 1.625; --leading-loose: 2; /* Font Weights */ --font-weight-normal: 400; --font-weight-medium: 500; --font-weight-semibold: 600; --font-weight-bold: 700; /* Transitions */ --transition-fast: 150ms ease; --transition-normal: 250ms ease; --transition-slow: 350ms ease; } /* Dark mode colors */ .dark, [data-theme='dark'] { --color-bg-primary: var(--color-slate-900); --color-bg-secondary: var(--color-slate-800); --color-bg-tertiary: var(--color-slate-700); --color-bg-accent: #1e40af; --color-text-primary: var(--color-slate-100); --color-text-secondary: var(--color-slate-300); --color-text-muted: var(--color-slate-400); --color-border-light: var(--color-slate-700); --color-border-medium: var(--color-slate-600); --color-border-strong: var(--color-slate-500); --color-border-accent: var(--color-primary-500); } /* ============================================= TYPOGRAPHY SYSTEM ============================================= */ .text-display-2xl { font-size: var(--font-size-5xl); font-weight: var(--font-weight-bold); line-height: var(--leading-tight); letter-spacing: -0.025em; } .text-display-xl { font-size: var(--font-size-4xl); font-weight: var(--font-weight-bold); line-height: var(--leading-tight); letter-spacing: -0.025em; } .text-heading-xl { font-size: var(--font-size-3xl); font-weight: var(--font-weight-semibold); line-height: var(--leading-tight); letter-spacing: -0.025em; } .text-heading-lg { font-size: var(--font-size-2xl); font-weight: var(--font-weight-semibold); line-height: var(--leading-tight); } .text-heading-md { font-size: var(--font-size-xl); font-weight: var(--font-weight-semibold); line-height: var(--leading-snug); } .text-heading-sm { font-size: var(--font-size-lg); font-weight: var(--font-weight-semibold); line-height: var(--leading-snug); } .text-body-lg { font-size: var(--font-size-lg); font-weight: var(--font-weight-normal); line-height: var(--leading-relaxed); } .text-body-base { font-size: var(--font-size-base); font-weight: var(--font-weight-normal); line-height: var(--leading-normal); } .text-body-sm { font-size: var(--font-size-sm); font-weight: var(--font-weight-normal); line-height: var(--leading-normal); } .text-caption { font-size: var(--font-size-xs); font-weight: var(--font-weight-normal); line-height: var(--leading-normal); color: var(--color-text-muted); } .text-overline { font-size: var(--font-size-xs); font-weight: var(--font-weight-semibold); line-height: var(--leading-normal); text-transform: uppercase; letter-spacing: 0.1em; color: var(--color-text-muted); } /* ============================================= COMPONENT SYSTEM ============================================= */ /* Base Card Component */ .card { background-color: var(--color-bg-secondary); border: 1px solid var(--color-border-light); border-radius: var(--radius-lg); box-shadow: var(--shadow-xs); transition: all var(--transition-normal); overflow: hidden; } .card:hover { box-shadow: var(--shadow-sm); border-color: var(--color-border-medium); } .card-interactive { cursor: pointer; } .card-interactive:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); border-color: var(--color-border-accent); } .card-header { padding: var(--space-6); border-bottom: 1px solid var(--color-border-light); } .card-content { padding: var(--space-6); } .card-footer { padding: var(--space-6); border-top: 1px solid var(--color-border-light); background-color: var(--color-bg-tertiary); } /* Button System */ .btn { display: inline-flex; align-items: center; justify-content: center; gap: var(--space-2); padding: var(--space-3) var(--space-4); border-radius: var(--radius-md); font-size: var(--font-size-sm); font-weight: var(--font-weight-medium); line-height: var(--leading-tight); text-decoration: none; transition: all var(--transition-fast); cursor: pointer; border: 1px solid transparent; white-space: nowrap; } .btn:disabled { opacity: 0.6; cursor: not-allowed; } .btn-sm { padding: var(--space-2) var(--space-3); font-size: var(--font-size-xs); } .btn-lg { padding: var(--space-4) var(--space-6); font-size: var(--font-size-base); } .btn-primary { background-color: var(--color-primary-600); color: var(--color-text-inverse); border-color: var(--color-primary-600); } .btn-primary:hover { background-color: var(--color-primary-700); border-color: var(--color-primary-700); transform: translateY(-1px); box-shadow: var(--shadow-sm); } .btn-secondary { background-color: var(--color-bg-secondary); color: var(--color-text-primary); border-color: var(--color-border-medium); } .btn-secondary:hover { background-color: var(--color-bg-tertiary); border-color: var(--color-border-strong); } .btn-ghost { background-color: transparent; color: var(--color-text-secondary); border-color: transparent; } .btn-ghost:hover { background-color: var(--color-bg-tertiary); color: var(--color-text-primary); } .btn-danger { background-color: var(--color-error-500); color: var(--color-text-inverse); border-color: var(--color-error-500); } .btn-danger:hover { background-color: var(--color-error-600); border-color: var(--color-error-600); } /* Input System */ .input { width: 100%; padding: var(--space-3) var(--space-4); background-color: var(--color-bg-secondary); border: 1px solid var(--color-border-medium); border-radius: var(--radius-md); font-size: var(--font-size-sm); line-height: var(--leading-normal); color: var(--color-text-primary); transition: all var(--transition-fast); } .input::placeholder { color: var(--color-text-muted); } .input:focus { outline: none; border-color: var(--color-primary-500); box-shadow: 0 0 0 3px var(--color-primary-100); } .input:disabled { opacity: 0.6; cursor: not-allowed; background-color: var(--color-bg-tertiary); } .dark .input:focus { box-shadow: 0 0 0 3px rgb(59 130 246 / 30%); } /* Badge System */ .badge { display: inline-flex; align-items: center; gap: var(--space-1); padding: var(--space-1) var(--space-2); border-radius: var(--radius-sm); font-size: var(--font-size-xs); font-weight: var(--font-weight-medium); line-height: var(--leading-tight); text-transform: uppercase; letter-spacing: 0.05em; } .badge-primary { background-color: var(--color-primary-100); color: var(--color-primary-800); } .badge-success { background-color: var(--color-success-50); color: var(--color-success-600); } .badge-warning { background-color: var(--color-warning-50); color: var(--color-warning-600); } .badge-error { background-color: var(--color-error-50); color: var(--color-error-600); } .badge-neutral { background-color: var(--color-slate-100); color: var(--color-slate-700); } /* Progress System */ .progress { width: 100%; height: var(--space-2); background-color: var(--color-slate-200); border-radius: var(--radius-sm); overflow: hidden; } .dark .progress { background-color: var(--color-slate-700); } .progress-bar { height: 100%; background-color: var(--color-primary-500); transition: width var(--transition-slow); border-radius: var(--radius-sm); } /* Divider */ .divider { border: none; border-top: 1px solid var(--color-border-light); margin: var(--space-6) 0; } /* Focus Ring */ .focus-ring:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--color-primary-200); } .dark .focus-ring:focus-visible { box-shadow: 0 0 0 3px rgb(59 130 246 / 30%); } /* Loading States */ .loading { position: relative; overflow: hidden; } .loading::after { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, var(--color-slate-200), transparent); animation: shimmer 2s infinite; } .dark .loading::after { background: linear-gradient(90deg, transparent, var(--color-slate-600), transparent); } @keyframes shimmer { 0% { left: -100%; } 100% { left: 100%; } } /* ============================================= LAYOUT UTILITIES ============================================= */ .container { max-width: 1200px; margin: 0 auto; padding: 0 var(--space-6); } .container-sm { max-width: 640px; margin: 0 auto; padding: 0 var(--space-4); } .container-lg { max-width: 1400px; margin: 0 auto; padding: 0 var(--space-8); } .stack { display: flex; flex-direction: column; } .stack-sm > * + * { margin-top: var(--space-2); } .stack-md > * + * { margin-top: var(--space-4); } .stack-lg > * + * { margin-top: var(--space-6); } .cluster { display: flex; flex-wrap: wrap; gap: var(--space-2); align-items: center; } .cluster-sm { gap: var(--space-1); } .cluster-lg { gap: var(--space-4); } .center { display: flex; align-items: center; justify-content: center; } .between { display: flex; justify-content: space-between; align-items: center; } .surface { background-color: var(--color-bg-secondary); border-radius: var(--radius-lg); padding: var(--space-6); box-shadow: var(--shadow-xs); } /* ============================================= ANIMATION UTILITIES ============================================= */ .fade-in { animation: fade-in var(--transition-normal) ease-out; } .slide-up { animation: slide-up var(--transition-normal) ease-out; } .scale-in { animation: scale-in var(--transition-normal) ease-out; } @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } } @keyframes slide-up { from { opacity: 0; transform: translateY(var(--space-4)); } to { opacity: 1; transform: translateY(0); } } @keyframes scale-in { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } } /* ============================================= TAILWIND COMPATIBILITY LAYER ============================================= */ @layer components { .bg-primary-50 { background-color: var(--color-primary-50); } .bg-primary-100 { background-color: var(--color-primary-100); } .bg-primary-500 { background-color: var(--color-primary-500); } .bg-primary-600 { background-color: var(--color-primary-600); } .bg-primary-700 { background-color: var(--color-primary-700); } .bg-primary-900 { background-color: var(--color-primary-900); } .text-primary-400 { color: var(--color-primary-400); } .text-primary-500 { color: var(--color-primary-500); } .text-primary-600 { color: var(--color-primary-600); } .border-primary-200 { border-color: var(--color-primary-200); } .border-primary-500 { border-color: var(--color-primary-500); } .border-primary-800 { border-color: var(--color-primary-800); } } /* ============================================= RESPONSIVE UTILITIES ============================================= */ @media (width <= 640px) { .container { padding: 0 var(--space-4); } .card-content, .card-header, .card-footer { padding: var(--space-4); } .text-display-2xl { font-size: var(--font-size-3xl); } .text-display-xl { font-size: var(--font-size-2xl); } .text-heading-xl { font-size: var(--font-size-xl); } } 
/Users/davehail/Developer/inkwell/src/components/Onboarding/__tests__/tourSafety.test.tsx:24:      const sidebar = document.createElement('nav');
/Users/davehail/Developer/inkwell/src/components/Onboarding/__tests__/tourSafety.test.tsx:25:      sidebar.setAttribute('data-tour-id', 'sidebar');
/Users/davehail/Developer/inkwell/src/components/Onboarding/__tests__/tourSafety.test.tsx:26:      document.body.appendChild(sidebar);
/Users/davehail/Developer/inkwell/src/components/Auth/AuthForm.tsx:346:      {/* Account switching links removed - now handled by AuthFooter component */}
/Users/davehail/Developer/inkwell/src/components/ExportWizard/ProgressBar.tsx:1:interface ProgressBarProps {
/Users/davehail/Developer/inkwell/src/components/ExportWizard/ProgressBar.tsx:9:export function _ProgressBar({
/Users/davehail/Developer/inkwell/src/components/ExportWizard/ProgressBar.tsx:15:}: ProgressBarProps) {
/Users/davehail/Developer/inkwell/src/components/Planning/ArcConflictAnalyzer.tsx:1:// src/components/Planning/ArcConflictAnalyzer.tsx - Intelligent character arc conflict analysis and recommendations import { AlertTriangle, CheckCircle, XCircle, TrendingUp, Users, Clock, Target, Lightbulb, ArrowRight, BarChart3, } from 'lucide-react'; import React, { useMemo, useState } from 'react'; import type { GeneratedCharacter } from '../../services/storyArchitectService'; interface ConflictAnalysis { id: string; type: 'pacing' | 'development' | 'relationship' | 'structure' | 'balance'; severity: 'low' | 'medium' | 'high' | 'critical'; title: string; description: string; affectedCharacters: string[]; chapters: number[]; suggestions: string[]; impact: 'story_flow' | 'character_growth' | 'reader_engagement' | 'narrative_balance'; } interface DevelopmentMetrics { character: string; totalGrowthMoments: number; arcStageDistribution: { [stage: string]: number }; povBalance: number; relationshipComplexity: number; developmentScore: number; pacingScore: number; } interface ArcConflictAnalyzerProps { characters: GeneratedCharacter[]; totalChapters: number; onApplySuggestion?: (conflictId: string, suggestion: string) => void; className?: string; } export default function ArcConflictAnalyzer({ characters = [], totalChapters = 20, onApplySuggestion, className = '', }: ArcConflictAnalyzerProps) { const [selectedFilter, setSelectedFilter] = useState<string>('all'); const [selectedSeverity, setSelectedSeverity] = useState<string>('all'); const [expandedAnalysis, setExpandedAnalysis] = useState<Set<string>>(new Set()); // Calculate comprehensive development metrics for each character const developmentMetrics = useMemo(() => { return characters.map((character): DevelopmentMetrics => { const arcStages = character.arcStages || []; const relationships = character.relationships || []; const povChapters = character.povChapters || []; const growthMoments = character.growthMoments || []; // Arc stage distribution analysis const stageDistribution: { [stage: string]: number } = {}; arcStages.forEach((stage) => { stageDistribution[stage.stage] = (stageDistribution[stage.stage] || 0) + 1; }); // POV balance calculation const povBalance = povChapters.length / totalChapters; // Relationship complexity score const relationshipComplexity = relationships.reduce((score, rel) => { const typeWeight = { ally: 1, enemy: 1.5, love_interest: 1.2, mentor: 1, family: 1.1, neutral: 1, rival: 1.3, }[rel.type] || 1; const influenceWeight = { major: 3, moderate: 2, minor: 1, }[rel.arcInfluence] || 1; return score + typeWeight * influenceWeight; }, 0); // Development score calculation const developmentScore = Math.min( 100, arcStages.length * 10 + relationships.length * 5 + growthMoments.length * 8 + (character.voiceProfile ? 20 : 0) + (character.internalConflict && character.externalConflict ? 15 : 0), ); // Pacing score based on arc stage distribution const idealChapterGaps = totalChapters / Math.max(arcStages.length, 1); const actualGaps = arcStages .map((stage, index) => { const nextStage = arcStages[index + 1]; return nextStage ? nextStage.chapter - stage.chapter : 0; }) .filter((gap) => gap > 0); const avgGap = actualGaps.length > 0 ? actualGaps.reduce((a, b) => a + b, 0) / actualGaps.length : idealChapterGaps; const pacingScore = Math.max(0, 100 - Math.abs(avgGap - idealChapterGaps) * 10); return { character: character.name, totalGrowthMoments: growthMoments.length, arcStageDistribution: stageDistribution, povBalance, relationshipComplexity, developmentScore, pacingScore, }; }); }, [characters, totalChapters]); // Perform comprehensive conflict analysis const conflictAnalyses = useMemo(() => { const conflicts: ConflictAnalysis[] = []; const metrics = developmentMetrics; // 1. Pacing Conflicts characters.forEach((character, _charIndex) => { const arcStages = character.arcStages || []; if (arcStages.length > 1) { // Check for stages too close together for (let i = 0; i < arcStages.length - 1; i++) { const current = arcStages[i]; const next = arcStages[i + 1]; if (current && next && next.chapter - current.chapter < 2) { conflicts.push({ id: `pacing-tight-${character.name}-${i}`, type: 'pacing', severity: 'medium', title: 'Arc Stages Too Close', description: `${character.name}'s "${current?.stage}" and "${next?.stage}" stages are only ${(next?.chapter || 0) - (current?.chapter || 0)} chapter(s) apart, which may rush character development.`, affectedCharacters: [character.name], chapters: [current?.chapter || 0, next?.chapter || 0], suggestions: [ `Move "${next?.stage}" to chapter ${(next?.chapter || 0) + 2} or later`, `Add transitional development between the stages`, `Consider combining the stages if they serve similar purposes`, ], impact: 'character_growth', }); } } // Check for large gaps for (let i = 0; i < arcStages.length - 1; i++) { const current = arcStages[i]; const next = arcStages[i + 1]; if (current && next && next.chapter - current.chapter > 6) { conflicts.push({ id: `pacing-gap-${character.name}-${i}`, type: 'pacing', severity: 'low', title: 'Large Gap in Character Development', description: `${character.name} has a ${(next?.chapter || 0) - (current?.chapter || 0)}-chapter gap between "${current?.stage}" and "${next?.stage}", which may cause development to feel disconnected.`, affectedCharacters: [character.name], chapters: [current?.chapter || 0, next?.chapter || 0], suggestions: [ 'Add intermediate development moments or smaller arc stages', 'Include character reflection or growth scenes in the gap', 'Consider subplot development during this period', ], impact: 'story_flow', }); } } } }); // 2. Development Balance Conflicts const avgDevelopmentScore = metrics.reduce((sum, m) => sum + m.developmentScore, 0) / metrics.length; metrics.forEach((metric) => { if (metric.developmentScore < avgDevelopmentScore * 0.7) { conflicts.push({ id: `development-low-${metric.character}`, type: 'development', severity: metric.developmentScore < 30 ? 'high' : 'medium', title: 'Underdeveloped Character Arc', description: `${metric.character} has a development score of ${metric.developmentScore}%, significantly below the story average of ${avgDevelopmentScore.toFixed(1)}%.`, affectedCharacters: [metric.character], chapters: [], suggestions: [ 'Add more arc stages to show character growth', 'Develop additional relationships and conflicts', 'Include more growth moments and challenges', 'Create a more detailed voice profile', ], impact: 'character_growth', }); } }); // 3. POV Balance Conflicts const povCharacters = characters.filter((char) => (char.povChapters?.length || 0) > 0); if (povCharacters.length > 1) { const povBalances = povCharacters.map((char) => ({ character: char.name, balance: (char.povChapters?.length || 0) / totalChapters, chapters: char.povChapters?.length || 0, })); const avgPovBalance = povBalances.reduce((sum, pov) => sum + pov.balance, 0) / povBalances.length; povBalances.forEach((pov) => { if (pov.balance < avgPovBalance * 0.5 && pov.chapters > 0) { conflicts.push({ id: `pov-imbalance-${pov.character}`, type: 'balance', severity: 'medium', title: 'POV Chapter Imbalance', description: `${pov.character} has only ${pov.chapters} POV chapters (${(pov.balance * 100).toFixed(1)}%) compared to the average of ${(avgPovBalance * 100).toFixed(1)}%.`, affectedCharacters: [pov.character], chapters: [], suggestions: [ `Add ${Math.ceil((avgPovBalance - pov.balance) * totalChapters)} more POV chapters for ${pov.character}`, 'Consider if this character needs POV representation for their arc', 'Balance POV distribution more evenly across key characters', ], impact: 'reader_engagement', }); } }); } // 4. Relationship Conflicts const relationshipMatrix: { [key: string]: { [key: string]: string } } = {}; characters.forEach((character) => { character.relationships?.forEach((rel) => { if (!relationshipMatrix[character.name]) relationshipMatrix[character.name] = {}; if (!relationshipMatrix[rel.withCharacter]) relationshipMatrix[rel.withCharacter] = {}; relationshipMatrix[character.name]![rel.withCharacter] = rel.type; // Check for reciprocal relationships const reciprocalChar = characters.find((c) => c.name === rel.withCharacter); const reciprocalRel = reciprocalChar?.relationships?.find( (r) => r.withCharacter === character.name, ); if (reciprocalRel && reciprocalRel.type !== rel.type) { conflicts.push({ id: `relationship-mismatch-${character.name}-${rel.withCharacter}`, type: 'relationship', severity: 'high', title: 'Conflicting Relationship Definitions', description: `${character.name} views ${rel.withCharacter} as "${rel.type}" but ${rel.withCharacter} views ${character.name} as "${reciprocalRel.type}".`, affectedCharacters: [character.name, rel.withCharacter], chapters: [], suggestions: [ 'Align relationship definitions between characters', 'Create intentional relationship tension if this is deliberate', 'Add character development to resolve relationship conflicts', ], impact: 'narrative_balance', }); } }); }); // 5. Structural Conflicts const protagonists = characters.filter((char) => char.role === 'protagonist'); const antagonists = characters.filter((char) => char.role === 'antagonist'); if (protagonists.length === 0) { conflicts.push({ id: 'structure-no-protagonist', type: 'structure', severity: 'critical', title: 'No Protagonist Identified', description: 'Your story has no characters marked as protagonists, which may confuse readers about the main character(s).', affectedCharacters: [], chapters: [], suggestions: [ 'Designate at least one character as the protagonist', 'Consider if you have an ensemble cast with multiple protagonists', 'Review character roles and adjust accordingly', ], impact: 'reader_engagement', }); } if (antagonists.length === 0 && characters.length > 2) { conflicts.push({ id: 'structure-no-antagonist', type: 'structure', severity: 'medium', title: 'No Clear Antagonist', description: 'Your story may benefit from a clear antagonistic force to create conflict and drive character development.', affectedCharacters: [], chapters: [], suggestions: [ 'Consider designating one character as the primary antagonist', 'Create internal conflicts that serve as antagonistic forces', 'Develop environmental or situational antagonists', ], impact: 'story_flow', }); } return conflicts; }, [characters, totalChapters, developmentMetrics]); // Filter conflicts based on selected filters const filteredConflicts = useMemo(() => { return conflictAnalyses.filter((conflict) => { const typeMatch = selectedFilter === 'all' || conflict.type === selectedFilter; const severityMatch = selectedSeverity === 'all' || conflict.severity === selectedSeverity; return typeMatch && severityMatch; }); }, [conflictAnalyses, selectedFilter, selectedSeverity]); const toggleExpanded = (conflictId: string) => { const newExpanded = new Set(expandedAnalysis); if (newExpanded.has(conflictId)) { newExpanded.delete(conflictId); } else { newExpanded.add(conflictId); } setExpandedAnalysis(newExpanded); }; const getSeverityColor = (severity: string) => { switch (severity) { case 'low': return 'text-blue-600 bg-blue-50'; case 'medium': return 'text-yellow-600 bg-yellow-50'; case 'high': return 'text-orange-600 bg-orange-50'; case 'critical': return 'text-red-600 bg-red-50'; default: return 'text-gray-600 bg-gray-50'; } }; const getSeverityIcon = (severity: string) => { switch (severity) { case 'low': return <CheckCircle className="w-4 h-4" />; case 'medium': return <AlertTriangle className="w-4 h-4" />; case 'high': return <AlertTriangle className="w-4 h-4" />; case 'critical': return <XCircle className="w-4 h-4" />; default: return <AlertTriangle className="w-4 h-4" />; } }; const conflictTypes = [ { id: 'all', name: 'All Issues', icon: BarChart3 }, { id: 'pacing', name: 'Pacing', icon: Clock }, { id: 'development', name: 'Development', icon: TrendingUp }, { id: 'relationship', name: 'Relationships', icon: Users }, { id: 'structure', name: 'Structure', icon: Target }, { id: 'balance', name: 'Balance', icon: BarChart3 }, ]; const severityLevels = [ { id: 'all', name: 'All Severities' }, { id: 'critical', name: 'Critical' }, { id: 'high', name: 'High' }, { id: 'medium', name: 'Medium' }, { id: 'low', name: 'Low' }, ]; const conflictStats = useMemo(() => { const stats = { critical: 0, high: 0, medium: 0, low: 0, total: conflictAnalyses.length }; conflictAnalyses.forEach((conflict) => { stats[conflict.severity as keyof typeof stats]++; }); return stats; }, [conflictAnalyses]); return ( <div className={`bg-white rounded-lg shadow-sm border border-gray-200 ${className}`} > {/* Header */} <div className="p-4 border-b border-gray-200"> <div className="flex items-center justify-between"> <div> <h2 className="text-lg font-semibold text-gray-900"> Arc Conflict Analysis </h2> <p className="text-sm text-gray-600"> Intelligent analysis of character development conflicts and recommendations </p> </div> <div className="text-sm text-gray-500"> {filteredConflicts.length} of {conflictAnalyses.length} issues shown </div> </div> </div> {/* Stats Overview */} <div className="p-4 border-b border-gray-200 bg-gray-50"> <div className="grid grid-cols-2 md:grid-cols-5 gap-4"> <div className="text-center"> <div className="text-lg font-semibold text-red-600"> {conflictStats.critical} </div> <div className="text-xs text-gray-600">Critical</div> </div> <div className="text-center"> <div className="text-lg font-semibold text-orange-600"> {conflictStats.high} </div> <div className="text-xs text-gray-600">High</div> </div> <div className="text-center"> <div className="text-lg font-semibold text-yellow-600"> {conflictStats.medium} </div> <div className="text-xs text-gray-600">Medium</div> </div> <div className="text-center"> <div className="text-lg font-semibold text-blue-600"> {conflictStats.low} </div> <div className="text-xs text-gray-600">Low</div> </div> <div className="text-center"> <div className="text-lg font-semibold text-gray-900"> {conflictStats.total} </div> <div className="text-xs text-gray-600">Total Issues</div> </div> </div> </div> {/* Filters */} <div className="p-4 border-b border-gray-200"> <div className="flex flex-wrap gap-4"> <div className="flex items-center gap-2"> <label className="text-sm font-medium text-gray-700">Type:</label> <select value={selectedFilter} onChange={(e) => setSelectedFilter(e.target.value)} className="bg-white border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" > {conflictTypes.map((type) => ( <option key={type.id} value={type.id}> {type.name} </option> ))} </select> </div> <div className="flex items-center gap-2"> <label className="text-sm font-medium text-gray-700"> Severity: </label> <select value={selectedSeverity} onChange={(e) => setSelectedSeverity(e.target.value)} className="bg-white border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" > {severityLevels.map((level) => ( <option key={level.id} value={level.id}> {level.name} </option> ))} </select> </div> </div> </div> {/* Conflicts List */} <div className="max-h-96 overflow-y-auto"> {filteredConflicts.length > 0 ? ( <div className="divide-y divide-gray-200"> {filteredConflicts.map((conflict) => ( <div key={conflict.id} className="p-4"> <div className="flex items-start justify-between cursor-pointer" onClick={() => toggleExpanded(conflict.id)} > <div className="flex items-start gap-3 flex-1"> <div className={`p-1 rounded ${getSeverityColor(conflict.severity)}`}> {getSeverityIcon(conflict.severity)} </div> <div className="flex-1"> <div className="flex items-center gap-2 mb-1"> <h3 className="font-medium text-gray-900"> {conflict.title} </h3> <span className={`px-2 py-1 rounded-full text-xs font-medium ${getSeverityColor(conflict.severity)}`} > {conflict.severity} </span> </div> <p className="text-sm text-gray-600 mb-2"> {conflict.description} </p> <div className="flex items-center gap-4 text-xs text-gray-500"> {conflict.affectedCharacters.length > 0 && ( <div className="flex items-center gap-1"> <Users className="w-3 h-3" /> {conflict.affectedCharacters.join(', ')} </div> )} {conflict.chapters.length > 0 && ( <div className="flex items-center gap-1"> <Clock className="w-3 h-3" /> Ch. {conflict.chapters.join(', ')} </div> )} </div> </div> </div> <ArrowRight className={`w-4 h-4 text-gray-400 transition-transform ${ expandedAnalysis.has(conflict.id) ? 'rotate-90' : '' }`} /> </div> {expandedAnalysis.has(conflict.id) && ( <div className="mt-4 pl-10"> <div className="bg-gray-50 rounded-lg p-4"> <div className="flex items-center gap-2 mb-3"> <Lightbulb className="w-4 h-4 text-yellow-600" /> <h4 className="font-medium text-gray-900">Suggestions</h4> </div> <ul className="space-y-2"> {conflict.suggestions.map((suggestion, index) => ( <li key={index} className="flex items-start gap-2"> <span className="text-gray-400">‚Ä¢</span> <div className="flex-1 flex items-center justify-between"> <span className="text-sm text-gray-700"> {suggestion} </span> {onApplySuggestion && ( <button onClick={() => onApplySuggestion(conflict.id, suggestion)} className="ml-2 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors" > Apply </button> )} </div> </li> ))} </ul> </div> </div> )} </div> ))} </div> ) : ( <div className="p-8 text-center text-gray-500"> <CheckCircle className="w-12 h-12 mx-auto mb-3 opacity-50" /> <h3 className="font-medium mb-2">No Issues Found</h3> <p className="text-sm"> {conflictAnalyses.length === 0 ? 'Your character arcs look well-balanced!' : 'No issues match the selected filters.'} </p> </div> )} </div> </div> ); } 
/Users/davehail/Developer/inkwell/src/styles/components.css:1:/* Add to src/styles/components.css or your main CSS file */ /* Command Palette Styles */ .command-palette-trigger { @apply w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors; } .command-palette-trigger:focus { @apply ring-2 ring-blue-500 ring-opacity-50 outline-none; } .command-icon { @apply w-4 h-4 text-gray-400; } .keyboard-shortcut { @apply ml-auto px-2 py-1 text-xs font-mono text-gray-500 bg-white rounded border border-gray-200 } /* Header button styles for command palette trigger */ .header-button { @apply p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors; } .header-button:focus { @apply ring-2 ring-blue-500 ring-opacity-50 outline-none; } .header-button-icon { @apply w-5 h-5; } /* Command hint styles */ .command-hint { @apply mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg; } .command-hint-content { @apply flex items-center gap-3 text-sm text-blue-700 } .command-hint-icon { @apply w-4 h-4 text-blue-500; } .command-hint kbd { @apply px-2 py-1 text-xs font-mono bg-white border border-blue-300 rounded; } /* Quick action styles */ .quick-action { @apply w-full p-4 text-left bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all; } .quick-action-content { @apply flex items-center gap-3; } .quick-action-icon { @apply w-5 h-5 text-gray-500 } .quick-action-title { @apply font-medium text-gray-900 } .quick-action-description { @apply text-sm text-gray-500 mt-1; } .quick-actions-grid { @apply grid grid-cols-1 md:grid-cols-2 gap-4; } /* Sidebar command palette trigger */ .sidebar-command-palette { @apply px-4 pb-4; } /* Navigation shortcuts */ .nav-shortcut { @apply ml-auto px-1.5 py-0.5 text-xs font-mono text-gray-400 bg-gray-100 rounded border border-gray-200 } /* Focus styles for accessibility */ .command-palette-trigger:focus-visible, .header-button:focus-visible, .quick-action:focus-visible { @apply ring-2 ring-blue-500 ring-opacity-50 outline-none; } 
/Users/davehail/Developer/inkwell/src/components/Auth/AuthFooter.tsx:9:export default function AuthFooter({ mode, redirect = '/dashboard' }: Props) {
/Users/davehail/Developer/inkwell/src/components/Onboarding/__tests__/tourSafety.test.ts:24:      const sidebar = document.createElement('nav');
/Users/davehail/Developer/inkwell/src/components/Onboarding/__tests__/tourSafety.test.ts:25:      sidebar.setAttribute('data-tour-id', 'sidebar');
/Users/davehail/Developer/inkwell/src/components/Onboarding/__tests__/tourSafety.test.ts:26:      document.body.appendChild(sidebar);
/Users/davehail/Developer/inkwell/src/components/Onboarding/FeatureDiscovery.tsx:58:    id: 'ai-toolbar-hint',
/Users/davehail/Developer/inkwell/src/components/Onboarding/FeatureDiscovery.tsx:62:    target: '[data-hint="ai-toolbar"]',
/Users/davehail/Developer/inkwell/src/components/Onboarding/FeatureDiscovery.tsx:81:    id: 'sidebar-collapse-hint',
/Users/davehail/Developer/inkwell/src/components/Onboarding/FeatureDiscovery.tsx:83:    description: 'Click here to collapse the sidebar and get more writing space.',
/Users/davehail/Developer/inkwell/src/components/Onboarding/FeatureDiscovery.tsx:84:    target: '[data-hint="sidebar-toggle"]',
/Users/davehail/Developer/inkwell/src/styles/layout.css:1:/* Vertical spacing helpers */ .space-y-6 > * + * { @apply mt-6; } .space-y-4 > * + * { @apply mt-4; } /* Global layout baseline */ body { @apply font-sans bg-gray-50 text-gray-900 leading-relaxed; } .focus-mode .Sidebar, .focus-mode .Topbar { display: none; } .focus-mode .WritingArea { padding: 1rem; } 
/Users/davehail/Developer/inkwell/src/styles/focus-mode.css:1:/* src/styles/focus-mode.css */ /* Base Focus Mode Styles */ .focus-mode { overflow: hidden; } .focus-mode * { transition: all 0.3s ease; } /* Typewriter Mode Styles */ .typewriter-mode .ProseMirror { padding-top: 40vh !important; padding-bottom: 40vh !important; line-height: 2; } .typewriter-mode .ProseMirror p { opacity: 0.6; transition: opacity 0.3s ease; } .typewriter-mode .ProseMirror p.is-editor-focused, .typewriter-mode .ProseMirror p:hover { opacity: 1; } /* Add a subtle highlight for the current paragraph in typewriter mode */ .typewriter-mode .ProseMirror p.is-editor-focused { background: rgba(147, 51, 234, 0.05); border-radius: 4px; padding: 0.5rem; margin: -0.5rem; } /* Zen Mode Styles */ .zen-mode .focus-mode-overlay .top-controls { opacity: 0; transform: translateY(-100%); pointer-events: none; } .zen-mode .focus-mode-overlay .bottom-status { opacity: 0; transform: translateY(100%); pointer-events: none; } .zen-mode .focus-mode-overlay:hover .top-controls, .zen-mode .focus-mode-overlay:hover .bottom-status { opacity: 1; transform: translateY(0); pointer-events: auto; } /* Sprint Progress Animations */ .sprint-progress-bar { background: linear-gradient(90deg, transparent 0%, rgba(147, 51, 234, 0.2) 50%, transparent 100%); background-size: 200% 100%; animation: shimmer 2s infinite; } @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } } /* Focus Mode Editor Styles */ .focus-mode-editor { background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%); min-height: 100vh; } .focus-mode-editor .prose { color: #e2e8f0; max-width: none; } .focus-mode-editor .prose h1, .focus-mode-editor .prose h2, .focus-mode-editor .prose h3 { color: #f1f5f9; } .focus-mode-editor .prose p { color: #cbd5e1; line-height: 1.8; } .focus-mode-editor .prose strong { color: #f1f5f9; } .focus-mode-editor .prose em { color: #a78bfa; } /* Ambient Sound Visualizer */ .ambient-visualizer { position: fixed; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, rgba(147, 51, 234, 0.3) 0%, rgba(79, 70, 229, 0.3) 50%, rgba(147, 51, 234, 0.3) 100%); background-size: 200% 100%; animation: audioWave 4s ease-in-out infinite; z-index: 100; } @keyframes audioWave { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } } /* Sprint Timer Pulse */ .sprint-timer.urgent { animation: timerPulse 1s ease-in-out infinite; } @keyframes timerPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } } /* Focus Mode Transitions */ .focus-enter { opacity: 0; transform: scale(0.95); } .focus-enter-active { opacity: 1; transform: scale(1); transition: opacity 0.3s ease, transform 0.3s ease; } .focus-exit { opacity: 1; transform: scale(1); } .focus-exit-active { opacity: 0; transform: scale(0.95); transition: opacity 0.3s ease, transform 0.3s ease; } /* Responsive Focus Mode */ @media (max-width: 768px) { .typewriter-mode .ProseMirror { padding-top: 20vh !important; padding-bottom: 20vh !important; } .focus-mode-overlay .top-controls { flex-direction: column; gap: 0.5rem; } .focus-mode-overlay .top-controls > div { flex-wrap: wrap; justify-content: center; } } /* Dark Mode Adjustments */ .dark .focus-mode-editor { background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%); } .dark .focus-mode-editor .prose { color: #e2e8f0; } /* Custom Scrollbar for Focus Mode */ .focus-mode-editor::-webkit-scrollbar { width: 8px; } .focus-mode-editor::-webkit-scrollbar-track { background: rgba(30, 27, 75, 0.3); } .focus-mode-editor::-webkit-scrollbar-thumb { background: rgba(147, 51, 234, 0.5); border-radius: 4px; } .focus-mode-editor::-webkit-scrollbar-thumb:hover { background: rgba(147, 51, 234, 0.7); } /* Sprint Celebration Animation */ .sprint-complete { animation: celebration 0.6s ease-out; } @keyframes celebration { 0% { transform: scale(1); } 50% { transform: scale(1.1); background-color: rgba(34, 197, 94, 0.2); } 100% { transform: scale(1); } } /* Focus Mode Button States */ .focus-button { position: relative; overflow: hidden; } .focus-button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); transition: left 0.5s; } .focus-button:hover::before { left: 100%; } /* Word Count Animation */ .word-count-change { animation: wordPop 0.3s ease-out; } @keyframes wordPop { 0% { transform: scale(1); } 50% { transform: scale(1.1); color: #22c55e; } 100% { transform: scale(1); } } /* Breathing Animation for Zen Mode */ .zen-mode .focus-mode-editor { animation: breathe 8s ease-in-out infinite; } @keyframes breathe { 0%, 100% { opacity: 0.95; } 50% { opacity: 1; } }
/Users/davehail/Developer/inkwell/src/components/Onboarding/WelcomeModal.tsx:5:// IMPORTANT: import from the barrel so tests that mock "@/components/icons" work
/Users/davehail/Developer/inkwell/src/components/Onboarding/WelcomeModal.tsx:281:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Panels/DashboardPanel.tsx:2:import { PlusCircle, FileText, Clock, BarChart3, BookOpen, Download } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Panels/DashboardPanel.tsx:97:              <BarChart3 className="w-5 h-5 text-purple-500" />
/Users/davehail/Developer/inkwell/src/components/Brand/BrandShowcase.tsx:160:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Brand/BrandShowcase.tsx:161:        <footer className="text-center py-8 border-t border-gray-200">
/Users/davehail/Developer/inkwell/src/components/Brand/BrandShowcase.tsx:166:        </footer>
/Users/davehail/Developer/inkwell/src/components/Panels/WritingPanel.tsx:24:import ClaudeToolbar from '@/components/Writing/ClaudeToolbar';
/Users/davehail/Developer/inkwell/src/components/Panels/WritingPanel.tsx:144:  // Initialize with mock data if no chapter exists
/Users/davehail/Developer/inkwell/src/components/Panels/WritingPanel.tsx:397:        {/* Claude Toolbar */}
/Users/davehail/Developer/inkwell/src/components/Panels/WritingPanel.tsx:398:        <ClaudeToolbar
/Users/davehail/Developer/inkwell/src/components/Panels/WritingPanel.tsx:410:        {/* Scene List Sidebar */}
/Users/davehail/Developer/inkwell/src/components/Onboarding/WelcomeModalNew.tsx:275:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklistNew.tsx:16:  BarChart3,
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklistNew.tsx:65:    icon: BarChart3,
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklistNew.tsx:180:          {/* Progress bar */}
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklistNew.tsx:300:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Panels/AnalyticsPanel.tsx:2:import { BarChart3, TrendingUp, Clock, Target, BookOpen, FileText } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Panels/AnalyticsPanel.tsx:75:              <BarChart3 className="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0" />
/Users/davehail/Developer/inkwell/src/components/Panels/AnalyticsPanel.tsx:91:                <BarChart3 className="w-5 h-5 text-blue-600 dark:text-blue-400" />
/Users/davehail/Developer/inkwell/src/components/Panels/AnalyticsPanel.tsx:217:              <BarChart3 className="w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-3" />
/Users/davehail/Developer/inkwell/src/components/Views/StoryPlanningView.tsx:2:import { BookOpen, Users, Map, FileText, BarChart3, Wand2 } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Views/StoryPlanningView.tsx:31:    { id: 'health' as const, label: 'Story Health', icon: BarChart3 },
/Users/davehail/Developer/inkwell/src/components/Views/StoryPlanningView.tsx:178:                  <BarChart3 className="w-4 h-4 text-purple-600" />
/Users/davehail/Developer/inkwell/src/components/Views/StoryPlanningView.tsx:300:                  <BarChart3 className="w-4 h-4 text-purple-600" />
/Users/davehail/Developer/inkwell/src/components/lazy/index.tsx:1:// Lazy loading registry for major features import React from 'react'; // Plot Boards - Heavy kanban board feature export const LazyPlotBoards = React.lazy(() => import( /* webpackChunkName: "plot-boards" */ '../../features/plotboards' ) .then((module) => ({ default: module.PlotBoards })) .catch((error) => { console.error('Failed to load PlotBoards:', error); return { default: () => <div>Failed to load Plot Boards</div> }; }), ); // Timeline View - Complex timeline management export const LazyTimelineView = React.lazy(() => import( /* webpackChunkName: "timeline-view" */ '../../components/Views/TimelineView' ).catch((error) => { console.error('Failed to load TimelineView:', error); return { default: () => <div>Failed to load Timeline View</div> }; }), ); // Analytics View - Heavy charting and calculations export const LazyAnalyticsView = React.lazy(() => import( /* webpackChunkName: "analytics-view" */ '../../components/Analytics/WritingAnalyticsView' ).catch((error) => { console.error('Failed to load Analytics View:', error); return { default: () => <div>Failed to load Analytics View</div> }; }), ); // Timeline Panel - Sidebar panel component export const LazyTimelinePanel = React.lazy(() => import( /* webpackChunkName: "timeline-panel" */ '../../components/Panels/TimelinePanel' ).catch((error) => { console.error('Failed to load Timeline Panel:', error); return { default: () => <div>Failed to load Timeline Panel</div> }; }), ); // Performance Charts - Heavy visualization library (if it exists) export const LazyPerformanceChart = React.lazy(() => import( /* webpackChunkName: "performance-chart" */ '../../components/PerformanceChart' ).catch(() => { // Fallback if PerformanceChart doesn't exist return { default: () => ( <div className="h-64 bg-gray-100 rounded animate-pulse flex items-center justify-center"> <span className="text-gray-500">Chart component not available</span> </div> ), }; }), ); // Phrase Hygiene Widget - Text analysis component (if it exists) export const LazyPhraseHygieneWidget = React.lazy(() => import( /* webpackChunkName: "phrase-hygiene" */ '../../components/Analytics/PhraseHygieneWidget' ).catch(() => { // Fallback if component doesn't exist return { default: () => ( <div className="p-4 bg-gray-100 rounded"> <span className="text-gray-500">Phrase hygiene widget not available</span> </div> ), }; }), ); // Export preload functions for strategic loading export const preloadHeavyFeatures = { plotBoards: () => import('../../features/plotboards').catch(() => {}), timeline: () => import('../../components/Views/TimelineView').catch(() => {}), analytics: () => import('../../components/Analytics/WritingAnalyticsView').catch(() => {}), }; // Preload critical features based on user behavior export function preloadOnUserIdle() { if ('requestIdleCallback' in window) { requestIdleCallback(() => { // Preload most commonly accessed features first preloadHeavyFeatures.analytics(); requestIdleCallback(() => { preloadHeavyFeatures.timeline(); requestIdleCallback(() => { preloadHeavyFeatures.plotBoards(); }); }); }); } else { // Fallback for browsers without requestIdleCallback setTimeout(() => { preloadHeavyFeatures.analytics(); }, 2000); } } 
/Users/davehail/Developer/inkwell/src/components/editor/ConsistencyIssuesPanel.tsx:1:// src/components/editor/ConsistencyIssuesPanel.tsx - Sidebar panel showing consistency issues
/Users/davehail/Developer/inkwell/src/components/editor/ConsistencyIssuesPanel.tsx:451:      {/* Status Bar */}
/Users/davehail/Developer/inkwell/src/components/EmptyStates/TeachingEmptyState.tsx:1:// src/components/EmptyStates/TeachingEmptyState.tsx import React from 'react'; import { Button } from '../ui/Button'; import { Card, CardContent } from '../ui/Card'; export interface TeachingEmptyStateProps { title: string; what: string; when: string; primaryActionLabel: string; onPrimaryAction: () => void; exampleBullets?: string[]; icon?: React.ReactNode; helpText?: string; isInFirstDraftPath?: boolean; stepNumber?: number; } export function TeachingEmptyState({ title, what, when, primaryActionLabel, onPrimaryAction, exampleBullets, icon, helpText, isInFirstDraftPath = false, stepNumber, }: TeachingEmptyStateProps) { return ( <div className="flex items-center justify-center min-h-[400px] p-8"> <Card className="w-full max-w-lg"> <CardContent className="p-8 text-center space-y-6"> {/* Icon */} {icon && <div className="text-6xl mb-4">{icon}</div>} {/* Step indicator for First Draft Path */} {isInFirstDraftPath && stepNumber && ( <div className="inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium"> Step {stepNumber} of 5 </div> )} {/* Title */} <h2 className="text-2xl font-bold text-gray-900">{title}</h2> {/* What it is */} <div className="space-y-2"> <p className="text-sm font-medium text-gray-500 uppercase tracking-wide"> What this is </p> <p className="text-gray-700">{what}</p> </div> {/* When to use it */} <div className="space-y-2"> <p className="text-sm font-medium text-gray-500 uppercase tracking-wide"> When to use it </p> <p className="text-gray-700">{when}</p> </div> {/* Examples */} {exampleBullets && exampleBullets.length > 0 && ( <div className="space-y-2"> <p className="text-sm font-medium text-gray-500 uppercase tracking-wide">Examples</p> <ul className="text-gray-700 space-y-1"> {exampleBullets.map((example, index) => ( <li key={index} className="text-sm"> ‚Ä¢ {example} </li> ))} </ul> </div> )} {/* Primary action */} <div className="pt-4"> <Button onClick={onPrimaryAction} size="lg" className="w-full"> {primaryActionLabel} </Button> </div> {/* Help text */} {helpText && <p className="text-sm text-gray-500 mt-4">{helpText}</p>} </CardContent> </Card> </div> ); } // Pre-configured empty states for core panels export function ProjectsEmptyState({ onCreateProject, isInFirstDraftPath = false, }: { onCreateProject: () => void; isInFirstDraftPath?: boolean; }) { return ( <TeachingEmptyState title="Welcome to Inkwell" what="a container for your book" when="anytime you start a new idea" primaryActionLabel="Create project" onPrimaryAction={onCreateProject} exampleBullets={['River City Mystery', 'The Summer Map', 'Untitled Project']} icon="üìö" helpText="You can change the name later." isInFirstDraftPath={isInFirstDraftPath} stepNumber={1} /> ); } export function ChaptersEmptyState({ onAddChapter, isInFirstDraftPath = false, }: { onAddChapter: () => void; isInFirstDraftPath?: boolean; }) { return ( <TeachingEmptyState title="Add your first chapter" what="a large unit in your book" when="to group related scenes" primaryActionLabel="Add chapter" onPrimaryAction={onAddChapter} exampleBullets={['Chapter 1', 'The Beginning', 'Morning Coffee']} icon="üìë" helpText="Short titles keep you moving. You can refine later." isInFirstDraftPath={isInFirstDraftPath} stepNumber={2} /> ); } export function ScenesEmptyState({ onAddScene, isInFirstDraftPath = false, }: { onAddScene: () => void; isInFirstDraftPath?: boolean; }) { return ( <TeachingEmptyState title="Add your first scene" what="where writing happens" when="for a single unit of action" primaryActionLabel="Add scene" onPrimaryAction={onAddScene} exampleBullets={['Opening scene', 'The discovery', 'Coffee shop conversation']} icon="‚úçÔ∏è" helpText="Inkwell saves while you type." isInFirstDraftPath={isInFirstDraftPath} stepNumber={3} /> ); } export function NotesEmptyState({ onCreateNote, isInFirstDraftPath = false, }: { onCreateNote: () => void; isInFirstDraftPath?: boolean; }) { return ( <TeachingEmptyState title="Create your first note" what="simple scratchpad for ideas" when="names, places, to-dos" primaryActionLabel="Create note" onPrimaryAction={onCreateNote} exampleBullets={['Character names', 'Plot ideas', 'Research notes']} icon="üìù" helpText="Keep all your ideas in one place." isInFirstDraftPath={isInFirstDraftPath} /> ); } export function ExportEmptyState({ onExport, isInFirstDraftPath = false, }: { onExport: () => void; isInFirstDraftPath?: boolean; }) { return ( <TeachingEmptyState title="Export a snippet" what="a copy of your work for backups or sharing" when="after a writing session" primaryActionLabel="Export snippet" onPrimaryAction={onExport} exampleBullets={['PDF for printing', 'Word doc for sharing', 'Markdown for web']} icon="üì§" helpText="Default format: Markdown" isInFirstDraftPath={isInFirstDraftPath} stepNumber={5} /> ); } export function FocusWriteEmptyState({ onStartWriting, wordCount = 0, targetWords = 300, isInFirstDraftPath = false, }: { onStartWriting: () => void; wordCount?: number; targetWords?: number; isInFirstDraftPath?: boolean; }) { const percentage = Math.min(Math.round((wordCount / targetWords) * 100), 100); return ( <div className="flex items-center justify-center min-h-[400px] p-8"> <Card className="w-full max-w-lg"> <CardContent className="p-8 text-center space-y-6"> {/* Step indicator */} {isInFirstDraftPath && ( <div className="inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium"> Step 4 of 5 </div> )} {/* Icon */} <div className="text-6xl mb-4">‚úçÔ∏è</div> {/* Title */} <h2 className="text-2xl font-bold text-gray-900">Write for five minutes</h2> {/* Goal */} <div className="space-y-2"> <p className="text-sm font-medium text-gray-500 uppercase tracking-wide">Goal</p> <p className="text-gray-700">get words on the page</p> </div> {/* Progress bar */} <div className="space-y-3"> <div className="flex justify-between text-sm text-gray-600"> <span>{wordCount} words</span> <span>{targetWords} target</span> </div> <div className="w-full bg-gray-200 rounded-full h-2"> <div className="bg-blue-600 h-2 rounded-full transition-all duration-300" style={{ width: `${percentage}%` }} /> </div> </div> {/* Primary action */} <div className="pt-4"> <Button onClick={onStartWriting} size="lg" className="w-full"> Start Focus writing </Button> </div> {/* Help text */} <div className="space-y-2 text-sm text-gray-600"> <p>Focus mode hides distractions. Write freely. You can edit later.</p> <p>If you want help, try "Tighten this paragraph" above the editor.</p> <p className="font-medium"> Progress hint: Aim for {targetWords} words. The counter updates as you type. </p> </div> </CardContent> </Card> </div> ); } 
/Users/davehail/Developer/inkwell/src/components/Onboarding/utils/tourSafety.ts:93:      '[data-tour="sidebar"], .sidebar-nav, nav[role="navigation"]': '#tour-viewport-anchor',
/Users/davehail/Developer/inkwell/src/components/Onboarding/FirstDraftPath.tsx:1:// src/components/Onboarding/FirstDraftPath.tsx import { CheckCircle, Circle, Clock } from 'lucide-react'; import React, { useEffect, useState } from 'react'; import { useSelector, useDispatch } from 'react-redux'; import { useProfile } from '../../context/ProfileContext'; import { analyticsService } from '../../services/analyticsService'; import { OnboardingStep, selectProjectOnboarding, selectCurrentStep, selectStepProgress, selectWordCountProgress, selectIsInFirstDraftPath, markStepCompleted, advanceStep, exitFirstDraftPath, } from '../../state/onboarding/onboardingSlice'; import { Button } from '../ui/Button'; import { Card, CardContent } from '../ui/Card'; import { Progress } from '../ui/progress'; interface FirstDraftPathProps { projectId: string; onStepComplete?: (step: OnboardingStep) => void; onPathComplete?: () => void; onExitPath?: () => void; } interface StepData { key: OnboardingStep; title: string; description: string; icon: string; estimatedTime: string; } const STEPS_DATA: StepData[] = [ { key: 'project', title: 'Create your project', description: 'Set up a container for your book', icon: 'üìö', estimatedTime: '1 min', }, { key: 'chapter', title: 'Add your first chapter', description: 'Create a section to organize scenes', icon: 'üìë', estimatedTime: '1 min', }, { key: 'scene', title: 'Add your first scene', description: 'Create a place where writing happens', icon: '‚úçÔ∏è', estimatedTime: '1 min', }, { key: 'focusWrite', title: 'Write for five minutes', description: 'Get 300 words on the page', icon: 'üéØ', estimatedTime: '5 min', }, { key: 'export', title: 'Export a snippet', description: 'Save a copy of your work', icon: 'üì§', estimatedTime: '1 min', }, ]; export function FirstDraftPath({ projectId, onStepComplete, onPathComplete, onExitPath, }: FirstDraftPathProps) { const dispatch = useDispatch(); const { activeProfileId } = useProfile(); const projectOnboarding = useSelector((state: any) => selectProjectOnboarding(state, activeProfileId || 'anonymous', projectId), ); const currentStep = useSelector((state: any) => selectCurrentStep(state, activeProfileId || 'anonymous', projectId), ); const stepProgress = useSelector((state: any) => selectStepProgress(state, activeProfileId || 'anonymous', projectId), ); const wordProgress = useSelector((state: any) => selectWordCountProgress(state, activeProfileId || 'anonymous', projectId), ); const isInFirstDraftPath = useSelector((state: any) => selectIsInFirstDraftPath(state, activeProfileId || 'anonymous', projectId), ); const [_startTime] = useState(Date.now()); useEffect(() => { if (!projectOnboarding) return; // Track step starts analyticsService.track('first_draft_step_viewed', { profileId: activeProfileId || 'anonymous', projectId, step: currentStep, stepIndex: STEPS_DATA.findIndex((s) => s.key === currentStep), }); }, [currentStep, projectId, projectOnboarding]); const handleStepComplete = (step: OnboardingStep) => { dispatch(markStepCompleted({ profileId: activeProfileId || 'anonymous', projectId, step })); onStepComplete?.(step); // Check if this was the final step if (step === 'export') { handlePathComplete(); } }; const handleAdvanceStep = () => { dispatch(advanceStep({ profileId: activeProfileId || 'anonymous', projectId })); }; const handlePathComplete = () => { analyticsService.track('first_draft_path_completed', { profileId: activeProfileId || 'anonymous', projectId, totalDuration: Date.now() - (projectOnboarding?.startedAt || Date.now()), stepsCompleted: STEPS_DATA.length, }); onPathComplete?.(); }; const handleExitPath = () => { dispatch( exitFirstDraftPath({ profileId: activeProfileId || 'anonymous', projectId, reason: 'user_choice', }), ); onExitPath?.(); }; if (!isInFirstDraftPath || !projectOnboarding) { return null; } const isCurrentStep = (stepKey: OnboardingStep) => stepKey === currentStep; const isCompleted = (stepKey: OnboardingStep) => !!projectOnboarding.completed[stepKey]; const isPending = (stepKey: OnboardingStep) => { const stepIndex = STEPS_DATA.findIndex((s) => s.key === stepKey); const currentIndex = STEPS_DATA.findIndex((s) => s.key === currentStep); return stepIndex > currentIndex; }; return ( <div className="max-w-2xl mx-auto p-6"> {/* Header */} <div className="text-center mb-8"> <h1 className="text-3xl font-bold text-gray-900 mb-2">Welcome to Inkwell</h1> <p className="text-lg text-gray-600 mb-4"> You are five steps from a first saved scene. We will keep the screen simple and move one step at a time. </p> <div className="flex items-center justify-center space-x-4 text-sm text-gray-500"> <div className="flex items-center"> <Clock className="w-4 h-4 mr-1" /> <span>~15 minutes</span> </div> <div> <Progress value={stepProgress.percentage} className="w-32" /> </div> <span> {stepProgress.current} of {stepProgress.total} complete </span> </div> </div> {/* Steps */} <div className="space-y-4"> {STEPS_DATA.map((stepData, index) => { const completed = isCompleted(stepData.key); const current = isCurrentStep(stepData.key); const _pending = isPending(stepData.key); return ( <Card key={stepData.key} className={`transition-all duration-200 ${ current ? 'ring-2 ring-blue-500 shadow-lg' : completed ? 'bg-green-50 border-green-200' : 'opacity-60' }`} > <CardContent className="p-6"> <div className="flex items-center space-x-4"> {/* Step icon/status */} <div className="flex-shrink-0"> {completed ? ( <CheckCircle className="w-8 h-8 text-green-600" /> ) : current ? ( <div className="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm font-medium"> {index + 1} </div> ) : ( <Circle className="w-8 h-8 text-gray-400" /> )} </div> {/* Step content */} <div className="flex-1"> <div className="flex items-center justify-between"> <div> <h3 className={`font-semibold ${ completed ? 'text-green-800' : current ? 'text-blue-900' : 'text-gray-700' }`} > {stepData.icon} {stepData.title} </h3> <p className={`text-sm ${ completed ? 'text-green-600' : current ? 'text-blue-700' : 'text-gray-500' }`} > {stepData.description} </p> </div> <div className="text-right"> <div className={`text-xs ${ completed ? 'text-green-600' : current ? 'text-blue-600' : 'text-gray-400' }`} > {stepData.estimatedTime} </div> {current && stepData.key === 'focusWrite' && ( <div className="text-xs text-blue-600 mt-1"> {wordProgress.current}/{wordProgress.target} words </div> )} </div> </div> {/* Progress bar for focus write step */} {current && stepData.key === 'focusWrite' && ( <div className="mt-3"> <Progress value={wordProgress.percentage} className="h-2" /> <div className="flex justify-between text-xs text-gray-500 mt-1"> <span>Keep writing...</span> <span>{wordProgress.percentage}% complete</span> </div> </div> )} {/* Action buttons */} {current && ( <div className="mt-4 flex space-x-3"> <Button onClick={() => handleStepComplete(stepData.key)} disabled={stepData.key === 'focusWrite' && !wordProgress.hasReachedTarget} > {stepData.key === 'focusWrite' && !wordProgress.hasReachedTarget ? 'Keep writing...' : `Complete ${stepData.title.toLowerCase()}`} </Button> {index < STEPS_DATA.length - 1 && ( <Button variant="outline" onClick={handleAdvanceStep}> Skip for now </Button> )} </div> )} {/* Completed state */} {completed && ( <div className="mt-4 text-sm text-green-600 font-medium">‚úì Completed</div> )} </div> </div> </CardContent> </Card> ); })} </div> {/* Success message */} {stepProgress.percentage === 100 && ( <Card className="mt-8 bg-green-50 border-green-200"> <CardContent className="p-6 text-center"> <div className="text-4xl mb-4">üéâ</div> <h3 className="text-xl font-bold text-green-800 mb-2">Congratulations!</h3> <p className="text-green-700 mb-4"> You created a project, added a chapter, wrote your first scene, and exported a snippet. Nice work. </p> <div className="space-x-3"> <Button onClick={handlePathComplete}>Continue writing</Button> <Button variant="outline" onClick={() => { // This would switch to Pro mode handlePathComplete(); }} > Switch to Pro view </Button> </div> </CardContent> </Card> )} {/* Exit option (subtle) */} <div className="mt-8 text-center"> <button onClick={handleExitPath} className="text-xs text-gray-400 hover:text-gray-600 underline" > I'm experienced, skip to full interface </button> </div> </div> ); } // Minimal checklist component for in-panel display export function FirstDraftChecklist({ projectId, className = '', }: { projectId: string; className?: string; }) { const { activeProfileId } = useProfile(); const stepProgress = useSelector((state: any) => selectStepProgress(state, activeProfileId || 'anonymous', projectId), ); const currentStep = useSelector((state: any) => selectCurrentStep(state, activeProfileId || 'anonymous', projectId), ); const isInFirstDraftPath = useSelector((state: any) => selectIsInFirstDraftPath(state, activeProfileId || 'anonymous', projectId), ); if (!isInFirstDraftPath) return null; return ( <div className={`bg-blue-50 border border-blue-200 rounded-lg p-4 ${className}`}> <div className="flex items-center justify-between mb-3"> <h4 className="font-medium text-blue-900">First Draft Path</h4> <div className="text-sm text-blue-700"> {stepProgress.current}/{stepProgress.total} </div> </div> <Progress value={stepProgress.percentage} className="h-2 mb-3" /> <div className="space-y-2"> {STEPS_DATA.map((step, index) => ( <div key={step.key} className={`flex items-center text-sm ${ step.key === currentStep ? 'text-blue-800 font-medium' : 'text-blue-600' }`} > <div className="w-4 h-4 mr-2 flex items-center justify-center"> {stepProgress.current > index ? ( <CheckCircle className="w-3 h-3 text-green-600" /> ) : step.key === currentStep ? ( <div className="w-2 h-2 rounded-full bg-blue-600" /> ) : ( <Circle className="w-3 h-3 text-blue-400" /> )} </div> <span>{step.title}</span> </div> ))} </div> </div> ); } 
/Users/davehail/Developer/inkwell/src/components/EmptyStates/ProfessionalEmptyStates.tsx:1:// src/components/EmptyStates/ProfessionalEmptyStates.tsx import { BookOpen, FileText, Users, Calendar, BarChart3, Lightbulb, ArrowRight, Sparkles, Coffee, Zap, TrendingUp, } from 'lucide-react'; import React from 'react'; import { useTour, ONBOARDING_STEPS } from '@/components/Onboarding/TourProvider'; import { useAppContext, View } from '@/context/AppContext'; import { createSampleProject } from '@/data/sampleProject'; interface EmptyStateProps { title: string; description: string; icon: React.ElementType; actionButton?: { label: string; onClick: () => void; variant?: 'primary' | 'secondary'; }; secondaryAction?: { label: string; onClick: () => void; }; illustration?: React.ReactNode; tips?: string[]; className?: string; } const EmptyState: React.FC<EmptyStateProps> = ({ title, description, icon: Icon, actionButton, secondaryAction, illustration, tips, className = '', }) => { return ( <div className={`empty-state text-center py-16 max-w-2xl mx-auto ${className}`}> {/* Icon or Illustration */} {illustration || ( <div className="w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6"> <Icon className="w-10 h-10 text-primary-600" /> </div> )} {/* Content */} <h2 className="text-heading-xl text-slate-900 mb-4">{title}</h2> <p className="text-body-lg text-slate-600 mb-8 max-w-lg mx-auto"> {description} </p> {/* Actions */} <div className="flex items-center justify-center gap-4 mb-8"> {actionButton && ( <button onClick={actionButton.onClick} className={`btn ${actionButton.variant === 'secondary' ? 'btn-secondary' : 'btn-primary'} btn-lg`} > {actionButton.label} </button> )} {secondaryAction && ( <button onClick={secondaryAction.onClick} className="btn btn-ghost"> {secondaryAction.label} <ArrowRight className="w-4 h-4" /> </button> )} </div> {/* Tips */} {tips && tips.length > 0 && ( <div className="bg-slate-50 rounded-xl p-6 text-left"> <div className="flex items-center gap-3 mb-4"> <div className="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center"> <Lightbulb className="w-4 h-4 text-yellow-600" /> </div> <h3 className="text-heading-sm text-slate-900">Pro Tips</h3> </div> <ul className="space-y-2"> {tips.map((tip, index) => ( <li key={index} className="flex items-start gap-3 text-body-sm text-slate-600" > <div className="w-1.5 h-1.5 bg-primary-500 rounded-full mt-2 flex-shrink-0" /> {tip} </li> ))} </ul> </div> )} </div> ); }; // Specific Empty States export const NoProjectsEmptyState: React.FC = () => { const { addProject, setCurrentProjectId, dispatch } = useAppContext(); const { startTour, setTourSteps, tourState, updateChecklist } = useTour(); const createNewProject = async () => { const newProject = { id: `project-${Date.now()}`, name: 'My First Story', description: 'A new fiction project', content: '', createdAt: Date.now(), updatedAt: Date.now(), }; addProject({ ...newProject, chapters: [], characters: [], beatSheet: [] } as any); setCurrentProjectId(newProject.id); dispatch({ type: 'SET_VIEW', payload: View.Writing }); // Update checklist - user created their first project! updateChecklist('createProject'); // Start onboarding tour for first-time users if (tourState.isFirstTimeUser) { setTourSteps(ONBOARDING_STEPS); setTimeout(() => { startTour('full-onboarding'); }, 1500); // Give time for view transition } }; const createSampleProjectDemo = () => { const sampleProject = createSampleProject(); // Convert domain Project to AppContext Project format const contextProject = { ...sampleProject, createdAt: sampleProject.createdAt.getTime(), updatedAt: sampleProject.updatedAt.getTime(), characters: [] as never[], // AppContext expects empty characters array beatSheet: [ { id: 'opening-image', title: 'Opening Image', description: 'Elena working alone in the library after hours, establishing the quiet, mysterious atmosphere.', type: 'plot', order: 1, completed: true, createdAt: Date.now() - 6 * 24 * 60 * 60 * 1000, updatedAt: Date.now() - 6 * 24 * 60 * 60 * 1000, }, { id: 'inciting-incident', title: 'The Books Come Alive', description: 'At midnight, Elena discovers that fictional characters emerge from the books in the library.', type: 'plot', order: 2, completed: true, createdAt: Date.now() - 5 * 24 * 60 * 60 * 1000, updatedAt: Date.now() - 5 * 24 * 60 * 60 * 1000, }, ] as never[], }; addProject(contextProject); setCurrentProjectId(sampleProject.id); dispatch({ type: 'SET_VIEW', payload: View.Writing }); // Update multiple checklist items since sample project has content updateChecklist('createProject'); updateChecklist('addChapter'); updateChecklist('addCharacter'); updateChecklist('writeContent'); // Optional: Show feature discovery instead of full tour for sample project if (tourState.isFirstTimeUser) { setTimeout(() => { startTour('feature-tour'); }, 1000); } }; const tips = [ 'Start with a simple idea - you can always expand later', 'Take the interactive tour to learn key features', 'Use the planning view to organize your story structure', 'Set daily word count goals to maintain momentum', 'Focus mode helps eliminate distractions while writing', ]; return ( <EmptyState title="Welcome to Inkwell" description="Transform your ideas into compelling stories with professional writing tools designed for serious writers." icon={BookOpen} actionButton={{ label: 'Create Your First Project', onClick: createNewProject, }} secondaryAction={{ label: 'Explore Sample Project', onClick: createSampleProjectDemo, }} tips={tips} illustration={ <div className="mb-8"> <div className="relative"> <div className="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4"> <Sparkles className="w-10 h-10 text-white" /> </div> <div className="absolute -top-2 -right-2 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center"> <span className="text-xs">‚ú®</span> </div> </div> </div> } /> ); }; export const NoProjectSelectedEmptyState: React.FC = () => { const { dispatch } = useAppContext(); const goToDashboard = () => { dispatch({ type: 'SET_VIEW', payload: View.Dashboard }); }; return ( <EmptyState title="No Project Selected" description="Select a project from your dashboard to start writing, or create a new project to begin your next story." icon={FileText} actionButton={{ label: 'Go to Dashboard', onClick: goToDashboard, }} className="py-12" /> ); }; export const NoChaptersEmptyState: React.FC = () => { const tips = [ 'Each chapter should advance your plot or develop characters', 'Aim for consistent chapter lengths in your story', 'Use chapter breaks to create natural pacing', 'Consider ending chapters with hooks to keep readers engaged', ]; return ( <EmptyState title="No Chapters Yet" description="Structure your story by creating chapters. Each chapter helps organize your narrative and track your progress." icon={BookOpen} actionButton={{ label: 'Create First Chapter', onClick: () => console.log('Create chapter'), }} tips={tips} /> ); }; export const NoCharactersEmptyState: React.FC = () => { const tips = [ 'Start with your protagonist - who drives your story?', 'Create character profiles with motivations and flaws', 'Consider how characters change throughout your story', 'Supporting characters should serve the plot or theme', ]; return ( <EmptyState title="No Characters Defined" description="Bring your story to life by creating memorable characters. Well-developed characters are the heart of great fiction." icon={Users} actionButton={{ label: 'Add Your First Character', onClick: () => console.log('Add character'), }} tips={tips} /> ); }; export const NoAnalyticsEmptyState: React.FC = () => { const { dispatch } = useAppContext(); const startWriting = () => { dispatch({ type: 'SET_VIEW', payload: View.Writing }); }; return ( <EmptyState title="No Writing Data Yet" description="Start writing to see detailed analytics about your progress, word count trends, and writing habits." icon={BarChart3} actionButton={{ label: 'Start Writing', onClick: startWriting, }} illustration={ <div className="mb-8"> <div className="w-20 h-20 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto"> <TrendingUp className="w-10 h-10 text-white" /> </div> </div> } /> ); }; export const NoTimelineEmptyState: React.FC = () => { const tips = [ 'Set realistic deadlines for your writing milestones', 'Break large goals into smaller, achievable tasks', 'Track your daily writing streaks and celebrate wins', 'Adjust timelines as needed - writing is a creative process', ]; return ( <EmptyState title="No Timeline Set" description="Create a writing schedule and set milestones to stay motivated and track your progress toward completion." icon={Calendar} actionButton={{ label: 'Create Writing Timeline', onClick: () => console.log('Create timeline'), }} tips={tips} /> ); }; export const WritingBreakEmptyState: React.FC = () => { const motivationalMessages = [ 'Every word counts, no matter how small', 'The first draft is just the beginning', 'Great stories are written one sentence at a time', 'Your unique voice matters in this world', 'Writing is rewriting - embrace the process', ]; const randomMessage = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)]; return ( <div className="text-center py-12 max-w-lg mx-auto"> <div className="w-16 h-16 bg-gradient-to-br from-orange-400 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-6"> <Coffee className="w-8 h-8 text-white" /> </div> <h2 className="text-heading-lg text-slate-900 mb-3">Take a Creative Break</h2> <p className="text-body-base text-slate-600 mb-6">{randomMessage}</p> <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200"> <div className="flex items-center gap-3 justify-center text-blue-700"> <Zap className="w-5 h-5" /> <span className="text-body-sm font-medium"> Ready to continue? Your story is waiting. </span> </div> </div> </div> ); }; // Loading State for Better UX export const LoadingEmptyState: React.FC<{ message?: string }> = ({ message = 'Loading your workspace...', }) => { return ( <div className="text-center py-16"> <div className="w-16 h-16 border-4 border-slate-200 border-t-primary-500 rounded-full animate-spin mx-auto mb-6" /> <p className="text-body-base text-slate-600">{message}</p> </div> ); }; // Error State export const ErrorEmptyState: React.FC<{ title?: string; message?: string; onRetry?: () => void; }> = ({ title = 'Something went wrong', message = 'We encountered an error loading your content. Please try again.', onRetry, }) => { return ( <div className="text-center py-16 max-w-lg mx-auto"> <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6"> <span className="text-2xl">üòû</span> </div> <h2 className="text-heading-lg text-slate-900 mb-4">{title}</h2> <p className="text-body-base text-slate-600 mb-6">{message}</p> {onRetry && ( <button onClick={onRetry} className="btn btn-primary"> Try Again </button> )} </div> ); }; 
/Users/davehail/Developer/inkwell/src/components/Onboarding/README.md:78:// Example: Navigation sidebar
/Users/davehail/Developer/inkwell/src/components/Onboarding/README.md:79:<nav data-tour="sidebar" className="sidebar">
/Users/davehail/Developer/inkwell/src/components/Onboarding/README.md:80:  {/* sidebar content */}
/Users/davehail/Developer/inkwell/src/components/Onboarding/README.md:103:<div data-hint="ai-toolbar">
/Users/davehail/Developer/inkwell/src/components/Onboarding/README.md:104:  {/* AI toolbar content */}
/Users/davehail/Developer/inkwell/src/components/Dashboard/ChapterDistributionChart.tsx:4: * Displays a bar chart showing word count distribution across chapters.
/Users/davehail/Developer/inkwell/src/components/Dashboard/ChapterDistributionChart.tsx:9:import { BarChart3 } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Dashboard/ChapterDistributionChart.tsx:55:        <BarChart3 className="w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4" />
/Users/davehail/Developer/inkwell/src/components/Dashboard/ChapterDistributionChart.tsx:71:  // Color palette for bars
/Users/davehail/Developer/inkwell/src/components/Dashboard/ChapterDistributionChart.tsx:72:  const getBarColor = (index: number) => {
/Users/davehail/Developer/inkwell/src/components/Dashboard/ChapterDistributionChart.tsx:98:        <BarChart3 className="w-5 h-5 text-gray-400 dark:text-gray-500" />
/Users/davehail/Developer/inkwell/src/components/Dashboard/ChapterDistributionChart.tsx:129:                  className={`h-full ${getBarColor(index)} transition-all duration-500 ease-out rounded-lg flex items-center px-3 group-hover:opacity-90`}
/Users/davehail/Developer/inkwell/src/components/PWA/__tests__/PWAUpdateNotification.test.tsx:7:// Mock data and state
/Users/davehail/Developer/inkwell/src/components/Onboarding/TourNudges.tsx:2:import { ArrowRight, Clock, X, BookOpen, Users, BarChart3 } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Onboarding/TourNudges.tsx:29:    icon: BarChart3,
/Users/davehail/Developer/inkwell/src/components/Onboarding/TourNudges.tsx:71:    icon: BarChart3,
/Users/davehail/Developer/inkwell/src/components/PWA/__tests__/PWAOfflineIndicator.test.tsx:8:// Mock data
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:162:    it('renders progress bar with correct ARIA attributes', () => {
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:170:      const progressBar = screen.getByRole('progressbar');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:171:      expect(progressBar).toBeInTheDocument();
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:172:      expect(progressBar).toHaveAttribute('aria-valuenow', '100');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:173:      expect(progressBar).toHaveAttribute('aria-valuemin', '0');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:174:      expect(progressBar).toHaveAttribute('aria-valuemax', '100');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:177:    it('shows correct progress bar color based on score', () => {
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:191:      const progressBar = screen.getByRole('progressbar');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:192:      expect(progressBar).toHaveClass('bg-amber-500');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:193:      expect(progressBar).toHaveAttribute('aria-valuenow', '60');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:233:      const progressBar = screen.getByRole('progressbar');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:234:      expect(progressBar).toHaveClass('bg-green-500');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:235:      expect(progressBar).toHaveAttribute('aria-valuenow', '80');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:326:      const progressBar = screen.getByRole('progressbar');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:327:      expect(progressBar).toBeInTheDocument();
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:328:      expect(progressBar).toHaveAttribute('aria-valuenow', '100');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.test.tsx:329:      expect(progressBar).toHaveClass('bg-green-500');
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.tsx:21:  // For now, returning mock data
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.tsx:169:      {/* Progress bar */}
/Users/davehail/Developer/inkwell/src/components/Badges/ExportReadyBadge.tsx:173:            role="progressbar"
/Users/davehail/Developer/inkwell/src/components/Onboarding/tourRegistry.ts:135:    selector: '#sidebar, .dashboard-header, [role="navigation"]',
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklist.tsx:10:  BarChart3,
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklist.tsx:58:    icon: BarChart3,
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklist.tsx:149:          {/* Progress bar */}
/Users/davehail/Developer/inkwell/src/components/Onboarding/CompletionChecklist.tsx:269:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:7:  // Sidebar sections
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:8:  SIDEBAR: '#sidebar',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:9:  PROJECTS_SECTION: '#sidebar-projects-section',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:10:  WORKSPACE_SECTION: '#sidebar-workspace-section',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:20:  EDITOR_TOOLBAR: '.editor-toolbar',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:37:// Map sidebar items to their selectors
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:38:export const SIDEBAR_ITEMS = {
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:39:  PROJECTS: '#sidebar-projects',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:40:  RECENT: '#sidebar-recent',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:41:  CHARACTERS: '#sidebar-characters',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:42:  PLOTS: '#sidebar-plots',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:43:  SETTINGS: '#sidebar-settings',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:44:  HELP: '#sidebar-help',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:58:  SIDEBAR: '#sidebar-tour-target',
/Users/davehail/Developer/inkwell/src/components/Onboarding/selectorMap.ts:71:  sidebar: SIDEBAR_ITEMS,
/Users/davehail/Developer/inkwell/src/components/Dashboard/EnhancedDashboard.tsx:2:import { PlusCircle, FileText, BarChart3, Target, Zap, Star, ArrowRight, X } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/Dashboard/EnhancedDashboard.tsx:112:      icon: BarChart3,
/Users/davehail/Developer/inkwell/src/components/Dashboard/EnhancedDashboard.tsx:482:                <div className="progress-bar" style={{ width: '75%' }} />
/Users/davehail/Developer/inkwell/src/components/PWA/__tests__/PWAUpdateNotification.test.tsx.fixed:7:// Mock data and state
/Users/davehail/Developer/inkwell/src/components/CommandPalette/CommandPaletteProvider.tsx:480:        action: () => showToast('Focus mode toggled (feature coming soon)', 'success'),
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:154:  // Generate headers and footers HTML (for print CSS)
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:156:  const footerHTML = _generateRunningFooter(style, draft);
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:167:/* Running headers and footers */
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:172:  @bottom-left { content: "${footerHTML.left}"; }
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:173:  @bottom-center { content: "${footerHTML.center}"; }
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:174:  @bottom-right { content: "${footerHTML.right}"; }
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:186:/* Replace page tokens in headers/footers */
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:191:  @bottom-left { content: "${footerHTML.left.replace('{page}', '" counter(page) "')}"; }
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:192:  @bottom-center { content: "${footerHTML.center.replace('{page}', '" counter(page) "')}"; }
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:193:  @bottom-right { content: "${footerHTML.right.replace('{page}', '" counter(page) "')}"; }
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:233: * Generates running footer content
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:235:function _generateRunningFooter(style: StylePresetMeta, draft: ManuscriptDraft) {
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:248:    left: replaceTemplateVariables(style.footer?.left || '', context),
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:249:    center: replaceTemplateVariables(style.footer?.center || '', context),
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:250:    right: replaceTemplateVariables(style.footer?.right || '', context),
/Users/davehail/Developer/inkwell/src/exports/exportEngines/pdfEngine.ts:313:- Running headers and footers
/Users/davehail/Developer/inkwell/src/components/PWA/__tests__/PWAOfflineIndicator.test.tsx.new:8:// Mock data
/Users/davehail/Developer/inkwell/src/exports/exportEngines/types-internal.ts:18:    footers: boolean;
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/presets/index.ts:152:/* Headers and footers would be handled by the rendering engine */
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/presets/index.ts:158:.footer {
/Users/davehail/Developer/inkwell/src/components/CommandPalette/CommandPaletteUI.tsx:193:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/exports/exportEngines/docxEngine.ts:20:      footers: true,
/Users/davehail/Developer/inkwell/src/exports/exportEngines/docxEngine.ts:55:    const rtfFooter = '}'; // Close RTF document
/Users/davehail/Developer/inkwell/src/exports/exportEngines/docxEngine.ts:57:    return rtfHeader + rtfBody + rtfFooter;
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/presets/modernBook.json:17:  "footer": { 
/Users/davehail/Developer/inkwell/src/exports/exportTypes.ts:78:  footer: {
/Users/davehail/Developer/inkwell/src/exports/exportEngines/epubEngine.ts:20:      footers: false, // Not standard in EPUB
/Users/davehail/Developer/inkwell/src/components/Search/index.ts:1:// src/components/Search/index.ts export { SearchBar } from './SearchBar'; export { SearchResults } from './SearchResults'; export { default as SmartSearchModal } from './SmartSearchModal'; export { SmartSearchTrigger, QuickSearchButton, SearchHint } from './SmartSearchTrigger'; 
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:1:// File: src/components/Sidebar.tsx
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:9:export const Sidebar: React.FC = () => {
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:10:  const { sidebarCollapsed, openNewProjectDialog, toggleSidebar } = useUI();
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:27:        sidebarCollapsed ? 'w-14' : 'w-64',
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:29:      data-spotlight-id="sidebar.container"
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:30:      data-testid="sidebar"
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:31:      data-tour-id="sidebar"
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:32:      data-collapsed={sidebarCollapsed}
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:34:      <div className="p-4 flex items-center space-x-2" data-spotlight-id="sidebar.logo">
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:37:        {!sidebarCollapsed && <span className="text-slate-100 font-semibold text-lg">Inkwell</span>}
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:40:        aria-label={sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:41:        onClick={toggleSidebar}
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:44:          sidebarCollapsed ? 'self-center' : 'self-end',
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:47:        <InkwellFeather name={sidebarCollapsed ? 'chevron-right' : 'chevron-left'} size="sm" />
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:53:            data-spotlight-id={`sidebar.${key}`}
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:57:              sidebarCollapsed && 'justify-center',
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:62:            {!sidebarCollapsed ? label : null}
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:68:          data-spotlight-id="sidebar.newProject"
/Users/davehail/Developer/inkwell/src/components/Sidebar.tsx:72:          {!sidebarCollapsed ? '+ New Project' : <InkwellFeather name="plus" size="sm" />}
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/presets/classicManuscript.json:19:  "footer": { 
/Users/davehail/Developer/inkwell/src/components/Search/SmartSearchModal.tsx:512:        {/* Footer */}
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/presets/screenplay.json:17:  "footer": { 
/Users/davehail/Developer/inkwell/src/components/Topbar/AutosaveIndicator.tsx:4: * UI component for displaying autosave state in the Topbar.
/Users/davehail/Developer/inkwell/src/components/Tour/tourConfig.ts:13:    target: '[data-spotlight-id="sidebar.newProject"]',
/Users/davehail/Developer/inkwell/src/components/Tour/tourConfig.ts:18:    target: '[data-spotlight-id="topbar.commandPalette"]',
/Users/davehail/Developer/inkwell/src/components/Search/SearchBar.tsx:6:interface SearchBarProps {
/Users/davehail/Developer/inkwell/src/components/Search/SearchBar.tsx:13:export const SearchBar: React.FC<SearchBarProps> = ({
/Users/davehail/Developer/inkwell/src/components/Search/SearchBar.tsx:38:    <form onSubmit={handleSubmit} className={`search-bar ${className}`}>
/Users/davehail/Developer/inkwell/src/components/Storage/StorageStatusIndicator.tsx:4: * Displays real-time storage health in the footer/settings.
/Users/davehail/Developer/inkwell/src/components/Storage/StorageStatusIndicator.tsx:24:  /** Show in compact mode (footer) or expanded mode (settings) */
/Users/davehail/Developer/inkwell/src/components/Storage/StorageStatusIndicator.tsx:133:  // Compact variant (for footer)
/Users/davehail/Developer/inkwell/src/components/icons/README.md:75:| `lg`  | `w-6 h-6`   | 24px   | Toolbar buttons, headers     |
/Users/davehail/Developer/inkwell/src/components/icons/README.md:231:import { Home, Settings, BarChart3 } from 'lucide-react';
/Users/davehail/Developer/inkwell/src/components/icons/README.md:235:<BarChart3 className="w-6 h-6 text-green-500" />
/Users/davehail/Developer/inkwell/src/components/icons/README.md:301:- Choose semantic names over icon-specific names: `analytics` not `bar-chart-3`
/Users/davehail/Developer/inkwell/src/components/TopbarBell.tsx:31:interface TopbarBellProps {
/Users/davehail/Developer/inkwell/src/components/TopbarBell.tsx:35:export default function TopbarBell({ className = '' }: TopbarBellProps) {
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/shared/watermark.svg:7:    <!-- Feather details/barbs -->
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/shared/headerFooter.html:3:<footer id="footer"></footer>
/Users/davehail/Developer/inkwell/src/components/Layout.tsx:1:// src/components/Layout.tsx import React from 'react'; import Sidebar from '@/components/Sidebar'; import Topbar from '@/components/Topbar'; import { useFocusMode } from '@/hooks/useFocusMode'; import { useUI } from '@/hooks/useUI'; import { cn } from '@/utils/cn'; type LayoutProps = { children: React.ReactNode; projectName?: string; theme?: 'light' | 'dark'; onToggleTheme?: () => void; onToggleClaude?: () => void; onOpenNotifications?: () => void; }; export default function Layout({ children, projectName, theme, onToggleTheme, onToggleClaude, onOpenNotifications, }: LayoutProps) { const { isFocusMode } = useFocusMode(); const { sidebarCollapsed } = useUI(); return ( <div className={cn( isFocusMode ? 'focus-mode' : '', 'min-h-screen w-full bg-slate-50 text-slate-900', )} > <div className="flex h-screen w-full overflow-hidden"> {/* Sidebar - rendered but positioned fixed */} {!isFocusMode && <Sidebar />} {/* Main column with responsive margin */} <main className={cn( 'transition-[margin-left] duration-200 min-h-screen flex-1', !isFocusMode && (sidebarCollapsed ? 'ml-14' : 'ml-64'), )} > {/* Topbar */} <div className={cn('Topbar', isFocusMode && 'hidden')}> <Topbar projectName={projectName} _theme={theme} _onToggleTheme={onToggleTheme} _onToggleClaude={onToggleClaude} _onOpenNotifications={onOpenNotifications} /> </div> {/* Content */} <div className={cn( 'WritingArea relative flex-1 overflow-auto', // comfortable padding; reduced when chrome is hidden isFocusMode ? 'p-4 md:p-6 lg:p-8' : 'p-4 md:p-6', )} > {children} </div> </main> </div> </div> ); } 
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/shared/typography.css:101:/* Headers and footers */
/Users/davehail/Developer/inkwell/src/exports/exportTemplates/shared/typography.css:109:.running-footer {
