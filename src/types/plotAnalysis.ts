export type AnalysisIssueType = | 'plot_hole' | 'pacing_spike' | 'continuity_gap' | 'character_inconsistency' | 'timeline_conflict' | 'tone_shift'; export type Severity = 'low' | 'medium' | 'high'; export interface AnalysisIssue { id: string; type: AnalysisIssueType; severity: Severity; title: string; description: string; sceneIds: string[]; // which scenes/cards are implicated suggestions: string[]; // human-actionable } export interface PacingPoint { sceneId: string; index: number; tension: number; // 0..1 pace: number; // 0..1, higher = faster } export interface ConflictCell { row: number; // e.g., act or chapter index col: number; // beat position value: number; // 0..1 density } export interface PlotAnalysis { id: string; profileId: string; projectId: string; updatedAt: number; model: 'claude' | 'mock'; summary: string; issues: AnalysisIssue[]; pacing: PacingPoint[]; conflictHeatmap: ConflictCell[]; qualityScore: number; // 0..100 } export interface AnalyzeSceneInput { profileId: string; projectId: string; sceneId: string; text: string; meta?: Record<string, unknown>; } export interface AnalyzeBoardInput { profileId: string; projectId: string; scenes: { id: string; title: string; text: string; order: number }[]; structure?: 'three_act' | 'heros_journey' | 'save_the_cat'; } 